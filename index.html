
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Winse Blog</title>
  <meta name="author" content="Winse Liu">

  
  <meta name="description" content="买了新的raspberry4后，就没怎么去弄旧的树莓派2了，今天再次看到想着运行起来看看，插上电源后，一直亮着绿灯，然后就没其他反应了。 树莓派2有点旧，现在直接拿着新的手机充电器去接的时刻，一直起不来，刚开始是怀疑是用TTL接错线导致板子烧了，也没有显示器查看界面。 后面想着重新安装一下试试， &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://winse.github.io">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
  <link href="/atom.xml" rel="alternate" title="Winse Blog" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//cdn.bootcss.com/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/libs/jquery.toc.min.js" type="text/javascript"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<!--
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
-->

<script src="/javascripts/generate-toc.js" type="text/javascript"></script>


  
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-43198550-1', 'auto');
  ga('send', 'pageview');

</script>



</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Winse Blog</a></h1>
  
    <h2>走走停停, 熙熙攘攘, 忙忙碌碌, 不知何畏.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:winse.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="站内搜索"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/blog/archives/updated.html">Updated</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2023/03/25/reinstall-raspberry2/">重新折腾raspberry2</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2023-03-25T21:24:35+08:00" pubdate data-updated="true">Sat 2023-03-25 21:24</time>
		
        
		
      </p>
    
  </header>


  <div class="entry-content"><p>买了新的raspberry4后，就没怎么去弄旧的树莓派2了，今天再次看到想着运行起来看看，插上电源后，一直亮着绿灯，然后就没其他反应了。</p>

<p>树莓派2有点旧，现在直接拿着新的手机充电器去接的时刻，一直起不来，刚开始是怀疑是用TTL接错线导致板子烧了，也没有显示器查看界面。</p>

<p>后面想着重新安装一下试试，然后拿着去接网线有线网络，这样就拿了一个旧的充电器的头。没想到这个时刻电源指示灯尽然闪起来了。想来这可能是电流过载保护了。</p>

<p>问题解决了，也把最新的重新安装的记录一下。</p>

<h2>安装</h2>

<p>参考：
* <a href="https://www.raspberrypi.com/documentation/computers/getting-started.html#installing-the-operating-system">Setting up your Raspberry Pi</a></p>

<h3>安装系统</h3>

<p>1 打开 <a href="https://www.raspberrypi.com/software/">Raspberry Pi Imager</a> 下载并安装，然后把SD card插入电脑。</p>

<p><img src="/images/blogs/rasp2/rasp2-1.png" alt="" /></p>

<p>2 设置初始化 用户和密码，并默认打开ssh服务（新版本已经去掉默认用户了，所以要设置一下 <a href="https://www.raspberrypi.com/news/raspberry-pi-bullseye-update-april-2022/">An update to Raspberry Pi OS Bullseye</a> ）</p>

<p><img src="/images/blogs/rasp2/rasp2-2.png" alt="" /></p>

<p>3 选择操作系统</p>

<p><img src="/images/blogs/rasp2/rasp2-3-1.png" alt="" /></p>

<p><img src="/images/blogs/rasp2/rasp2-3-2.png" alt="" /></p>

<p>4 连上有线网络，接通电源。然后打开路由管理界面，查看raspberry的ip地址</p>

<p><img src="/images/blogs/rasp2/rasp2-4-0.png" alt="" /></p>

<p>5 用ssh连接服务器</p>

<p><img src="/images/blogs/rasp2/rasp2-4-1.png" alt="" /></p>

<h3>配置Wifi网络</h3>

<p>原来已经买了usb的无线网卡，用 <code>ifconfig</code> 也能查看到 <code>wlan0</code> 的接口。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>root@raspberrypi:~# apt install vim 
</span><span class='line'>Reading package lists... Done
</span><span class='line'>Building dependency tree... Done
</span><span class='line'>Reading state information... Done
</span><span class='line'>  libgpm2 vim-runtime
</span><span class='line'>Suggested packages:
</span><span class='line'>  gpm ctags vim-doc vim-scripts
</span><span class='line'>The following NEW packages will be installed:
</span><span class='line'>  libgpm2 vim vim-runtime
</span><span class='line'>0 upgraded, 3 newly installed, 0 to remove and 0 not upgraded.
</span><span class='line'>...
</span><span class='line'>update-alternatives: using /usr/bin/vim.basic to provide /usr/bin/vim (vim) in auto mode
</span><span class='line'>update-alternatives: using /usr/bin/vim.basic to provide /usr/bin/vimdiff (vimdiff) in auto mode
</span><span class='line'>update-alternatives: using /usr/bin/vim.basic to provide /usr/bin/rvim (rvim) in auto mode
</span><span class='line'>update-alternatives: using /usr/bin/vim.basic to provide /usr/bin/rview (rview) in auto mode
</span><span class='line'>update-alternatives: using /usr/bin/vim.basic to provide /usr/bin/vi (vi) in auto mode
</span><span class='line'>update-alternatives: using /usr/bin/vim.basic to provide /usr/bin/view (view) in auto mode
</span><span class='line'>update-alternatives: using /usr/bin/vim.basic to provide /usr/bin/ex (ex) in auto mode
</span><span class='line'>Processing triggers for man-db (2.9.4-2) ...
</span><span class='line'>Processing triggers for libc-bin (2.31-13+rpt2+rpi1+deb11u5) ...
</span><span class='line'>
</span><span class='line'>root@raspberrypi:~# echo "set mouse-=a" &gt;&gt;~/.vimrc
</span><span class='line'>root@raspberrypi:~# vim /etc/wpa_supplicant/wpa_supplicant.conf    
</span><span class='line'>root@raspberrypi:~# 
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>root@raspberrypi:~# iwlist wlan0 scan
</span><span class='line'>
</span><span class='line'># 算一个加密的配置
</span><span class='line'>root@raspberrypi:~# wpa_passphrase winse
</span><span class='line'># reading passphrase from stdin
</span><span class='line'>xxx
</span><span class='line'>network={
</span><span class='line'>        ssid="winse"
</span><span class='line'>        #psk="xxx"
</span><span class='line'>        psk=xxx
</span><span class='line'>}
</span><span class='line'>
</span><span class='line'>root@raspberrypi:~# cat /etc/wpa_supplicant/wpa_supplicant.conf   
</span><span class='line'>country=CN
</span><span class='line'>ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev
</span><span class='line'>update_config=1
</span><span class='line'>
</span><span class='line'>network={
</span><span class='line'>        ssid="winse"
</span><span class='line'>        #psk="xxx"
</span><span class='line'>        psk=xxx
</span><span class='line'>}
</span><span class='line'>
</span><span class='line'>
</span><span class='line'># 配置服务
</span><span class='line'>pi@raspberrypi:~ $ cat /lib/systemd/system/wpa_supplicant.service 
</span><span class='line'>[Unit]
</span><span class='line'>Description=WPA supplicant
</span><span class='line'>Before=network.target
</span><span class='line'>After=dbus.service
</span><span class='line'>Wants=network.target
</span><span class='line'>IgnoreOnIsolate=true
</span><span class='line'>
</span><span class='line'>[Service]
</span><span class='line'>#Type=dbus
</span><span class='line'>#BusName=fi.w1.wpa_supplicant1
</span><span class='line'>Type=forking
</span><span class='line'>ExecStart=/sbin/wpa_supplicant -u -s -O /run/wpa_supplicant -c /etc/wpa_supplicant/wpa_supplicant.conf -i wlan0 -B -D wext
</span><span class='line'>Restart=always
</span><span class='line'>
</span><span class='line'>[Install]
</span><span class='line'>WantedBy=multi-user.target
</span><span class='line'>#Alias=dbus-fi.w1.wpa_supplicant1.service
</span><span class='line'>pi@raspberrypi:~ $ cat /etc/systemd/system/dhclient.service 
</span><span class='line'>[Unit]
</span><span class='line'>Description= DHCP Client
</span><span class='line'>Before=network.target
</span><span class='line'>
</span><span class='line'>[Service]
</span><span class='line'>Type=forking
</span><span class='line'>ExecStart=/sbin/dhclient wlan0 -v
</span><span class='line'>ExecStop=/sbin/dhclient wlan0 -r
</span><span class='line'>Restart=always
</span><span class='line'>
</span><span class='line'>[Install] 
</span><span class='line'>WantedBy=multi-user.target
</span><span class='line'>pi@raspberrypi:~ $ 
</span><span class='line'>
</span><span class='line'>root@raspberrypi:~# systemctl daemon-reload 
</span><span class='line'>
</span><span class='line'>root@raspberrypi:~# systemctl stop NetworkManager
</span><span class='line'>root@raspberrypi:~# systemctl enable wpa_supplicant.service 
</span><span class='line'>root@raspberrypi:~# systemctl enable dhclient.service
</span><span class='line'>Created symlink /etc/systemd/system/multi-user.target.wants/dhclient.service → /etc/systemd/system/dhclient.service.
</span></code></pre></td></tr></table></div></figure>


<p>配置好后，重启服务器，再次查看路由器管理web界面：</p>

<p><img src="/images/blogs/rasp2/rasp2-5.png" alt="" /></p>

<p>然后再把网线拔掉，再重启一次确认一下。</p>

<h3>遇到的问题：</h3>

<p>1 <a href="https://zhuanlan.zhihu.com/p/136463580">https://zhuanlan.zhihu.com/p/136463580</a></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>如果树莓派系统使用的是Raspbian Stretch，则ifup命令可能不起作用，可能会收到一条错误消息，
</span><span class='line'>内容如下：“ ifdown：unknown interface wlan0 ”。可以使用以下任何命令来解决：
</span><span class='line'>sudo ifconfig wlan0 up
</span></code></pre></td></tr></table></div></figure>


<p>2 <a href="https://shumeipai.nxez.com/2017/09/13/raspberry-pi-network-configuration-before-boot.html">https://shumeipai.nxez.com/2017/09/13/raspberry-pi-network-configuration-before-boot.html</a></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>说明以及不同安全性的 WiFi 配置示例：
</span><span class='line'>#ssid:网络的ssid
</span><span class='line'>#psk:密码
</span><span class='line'>#priority:连接优先级，数字越大优先级越高（不可以是负数）
</span><span class='line'>#scan_ssid:连接隐藏WiFi时需要指定该值为1
</span><span class='line'>
</span><span class='line'>如果你的 WiFi 没有密码
</span><span class='line'>
</span><span class='line'>network={
</span><span class='line'>  ssid="你的无线网络名称（ssid）"
</span><span class='line'>  key_mgmt=NONE
</span><span class='line'>}
</span><span class='line'>如果你的 WiFi 使用WEP加密
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>network={
</span><span class='line'>  ssid="你的无线网络名称（ssid）"
</span><span class='line'>  key_mgmt=NONE
</span><span class='line'>  wep_key0="你的wifi密码"
</span><span class='line'>}
</span><span class='line'>如果你的 WiFi 使用WPA/WPA2加密
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>network={
</span><span class='line'>  ssid="你的无线网络名称（ssid）"
</span><span class='line'>  key_mgmt=WPA-PSK
</span><span class='line'>  psk="你的wifi密码"
</span><span class='line'>}
</span><span class='line'>
</span><span class='line'>如果你不清楚 WiFi 的加密模式，可以在安卓手机上用 root explorer 打开 /data/misc/wifi/wpa/wpa_supplicant.conf，查看 WiFi 的信息。
</span></code></pre></td></tr></table></div></figure>


<p>3 <a href="https://www.labno3.com/2021/03/22/setting-up-raspberry-pi-wifi/">https://www.labno3.com/2021/03/22/setting-up-raspberry-pi-wifi/</a></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>如果连接有问题，一定要确认Pi是否支持WiFi。也有可能你的SSID是错误的，要扫描和检查，
</span><span class='line'>使用sudo iwlist wlan0 scan并检查essid字段。
</span><span class='line'>这个字段应该和你在ssid字段输入的一样。
</span></code></pre></td></tr></table></div></figure>


<p>4 查看信息 <a href="https://www.baeldung.com/linux/connect-network-cli">https://www.baeldung.com/linux/connect-network-cli</a></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>root@raspberrypi:~# ip link show wlan0
</span><span class='line'>3: wlan0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc mq state DOWN mode DEFAULT group default qlen 1000
</span><span class='line'>  link/ether 00:5a:39:e1:4d:bb brd ff:ff:ff:ff:ff:ff
</span><span class='line'>root@raspberrypi:~# ip link set wlan0 up  
</span><span class='line'>root@raspberrypi:~# ip link show wlan0
</span><span class='line'>3: wlan0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc mq state DOWN mode DEFAULT group default qlen 1000
</span><span class='line'>  link/ether 00:5a:39:e1:4d:bb brd ff:ff:ff:ff:ff:ff
</span><span class='line'>root@raspberrypi:~# 
</span><span class='line'>root@raspberrypi:~# iw wlan0 link
</span><span class='line'>Not connected.
</span><span class='line'>
</span><span class='line'>root@raspberrypi:~# ifconfig wlan0 down
</span><span class='line'>root@raspberrypi:~# ifconfig wlan0 up 
</span><span class='line'>root@raspberrypi:~# ifconfig wlan0
</span><span class='line'>wlan0: flags=4099&lt;UP,BROADCAST,MULTICAST&gt;  mtu 1500
</span><span class='line'>      ether 00:5a:39:e1:4d:bb  txqueuelen 1000  (Ethernet)
</span><span class='line'>      RX packets 0  bytes 0 (0.0 B)
</span><span class='line'>      RX errors 0  dropped 0  overruns 0  frame 0
</span><span class='line'>      TX packets 0  bytes 0 (0.0 B)
</span><span class='line'>      TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
</span></code></pre></td></tr></table></div></figure>


<p>5 <a href="https://shapeshed.com/linux-wifi/">https://shapeshed.com/linux-wifi/</a></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>wpa_cli
</span></code></pre></td></tr></table></div></figure>


<p>6 <a href="https://www.bilibili.com/read/cv8895717">https://www.bilibili.com/read/cv8895717</a></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>vim /etc/wpa_supplicant/wpa_supplicant.conf 编辑该文件，在文件顶部增加以下内容
</span><span class='line'>country=CN
</span><span class='line'>ctrl_interface=/run/wpa_supplicant
</span><span class='line'>update_config=1
</span><span class='line'>
</span><span class='line'>特别说明：country=CN 由于各个国家wifi使用频段不同，尤其5G频段
</span><span class='line'>
</span><span class='line'>vim /etc/rc.local 添加以下内容
</span><span class='line'>
</span><span class='line'>#!/bin/bash
</span><span class='line'>
</span><span class='line'>ip link set wlan0 up &
</span><span class='line'>wpa_supplicant -B -i wlan0 -D nl80211 -c /etc/wpa_supplicant/wpa_supplicant.conf &
</span><span class='line'>dhclient wlan0
</span><span class='line'>
</span><span class='line'>exit 0</span></code></pre></td></tr></table></div></figure>


<p>7 <a href="https://blog.csdn.net/u010049696/article/details/48765999">https://blog.csdn.net/u010049696/article/details/48765999</a></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>配置service。进入到/usr/lib/systemd/system目录，可以看到下面四个文件：
</span><span class='line'>
</span><span class='line'>wpa_supplicant-nl80211@.service
</span><span class='line'>wpa_supplicant.service
</span><span class='line'>wpa_supplicant@.service
</span><span class='line'>wpa_supplicant-wired@.service
</span><span class='line'>
</span><span class='line'>编辑wpa_supplicant.service文件，如下：
</span><span class='line'>
</span><span class='line'>[Unit]
</span><span class='line'>Description=WPA supplicant
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>[Service]
</span><span class='line'>Type=dbus
</span><span class='line'>BusName=fi.epitest.hostap.WPASupplicant
</span><span class='line'>ExecStart=/usr/bin/wpa_supplicant -c/etc/wpa_supplicant/test.conf -i wlp3s0
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>[Install]
</span><span class='line'>WantedBy=multi-user.target
</span><span class='line'>Alias=dbus-fi.epitest.hostap.WPASupplicant.service
</span><span class='line'>
</span><span class='line'>其中，只需修改ExecStart=/usr/bin/wpa_supplicant -c/etc/wpa_supplicant/test.conf -i wlp3s0即可。</span></code></pre></td></tr></table></div></figure>


<p>8 <a href="https://www.linuxbabe.com/command-line/ubuntu-server-16-04-wifi-wpa-supplicant">https://www.linuxbabe.com/command-line/ubuntu-server-16-04-wifi-wpa-supplicant</a></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Auto Connect on Startup
</span><span class='line'>To automatically connect to wireless network at boot time, we need to edit the wpa_supplicant.service file. It’s a good idea to copy the file from /lib/systemd/system/ directory to /etc/systemd/system/ directory, then edit it because we don’t want newer version of wpasupplicant to override our modifications.
</span><span class='line'>
</span><span class='line'>sudo cp /lib/systemd/system/wpa_supplicant.service /etc/systemd/system/wpa_supplicant.service
</span><span class='line'>
</span><span class='line'>sudo nano /etc/systemd/system/wpa_supplicant.service
</span><span class='line'>Find the following line.
</span><span class='line'>
</span><span class='line'>ExecStart=/sbin/wpa_supplicant -u -s -O /run/wpa_supplicant
</span><span class='line'>Change it to the following. Obviously you need to change wlp3s0 if that isn’t your interface name.
</span><span class='line'>
</span><span class='line'>ExecStart=/sbin/wpa_supplicant -u -s -c /etc/wpa_supplicant.conf -i wlp3s0
</span><span class='line'>It’s recommended to always try to restart wpa_supplicant when failure is detected. Add the following right below the ExecStart line.
</span><span class='line'>
</span><span class='line'>Restart=always
</span><span class='line'>If you can find the following line in this file, comment it out (Add the # character at the beginning of the line).
</span><span class='line'>
</span><span class='line'>Alias=dbus-fi.w1.wpa_supplicant1.service
</span><span class='line'>Save and close the file. Then enable wpa_supplicant service to start at boot time.
</span><span class='line'>
</span><span class='line'>sudo systemctl enable wpa_supplicant.service
</span><span class='line'>
</span><span class='line'>~~~
</span><span class='line'>
</span><span class='line'>sudo nano /etc/systemd/system/dhclient.service
</span><span class='line'>Put the following text into the file.
</span><span class='line'>
</span><span class='line'>[Unit]
</span><span class='line'>Description= DHCP Client
</span><span class='line'>Before=network.target
</span><span class='line'>
</span><span class='line'>[Service]
</span><span class='line'>Type=forking
</span><span class='line'>ExecStart=/sbin/dhclient wlp3s0 -v
</span><span class='line'>ExecStop=/sbin/dhclient wlp3s0 -r
</span><span class='line'>Restart=always
</span><span class='line'>
</span><span class='line'>[Install] 
</span><span class='line'>WantedBy=multi-user.target
</span><span class='line'>Save and close the file. Then enable this service.
</span><span class='line'>
</span><span class='line'>sudo systemctl enable dhclient.service
</span></code></pre></td></tr></table></div></figure>


<p>&ndash;END</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2023/03/25/mirror-request/">请求复制/镜像</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2023-03-25T18:28:14+08:00" pubdate data-updated="true">Sat 2023-03-25 18:28</time>
		
        
		
      </p>
    
  </header>


  <div class="entry-content"><p>在测试一个新功能，如果写入原程序的情况下再写一份到新的程序呢？比如Elasticsearch和OpenSearch。还有把生产的流量引一份出来测试，如果来实现呢？</p>

<p>一般的转换功能复制，如logstash、vector，但这些不能返回结果，不符合。只能往反向代理上找：nginx。</p>

<ul>
<li><a href="https://cloud.tencent.com/developer/article/1495449">Nginx 流量镜像使用技巧</a></li>
<li><a href="https://juejin.cn/post/7101267337332375559">Nginx流量镜像</a></li>
</ul>


<h2>nginx_http_mirror_module模块</h2>

<p>当请求到达 Nginx 时，如果 Nginx 开启了流量镜像功能，就会将请求复制一份，并根据 mirror location 中的配置来处理这份复制的请求。</p>

<h2>配置</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>  listen 9200;
</span><span class='line'>  server_name elasticsearch;
</span><span class='line'>  client_max_body_size 50m;
</span><span class='line'>
</span><span class='line'># error_log /var/log/nginx/elasticsearch-errors.log;
</span><span class='line'># access_log /var/log/nginx/elasticsearch.log;
</span><span class='line'>
</span><span class='line'>  location / {
</span><span class='line'>  
</span><span class='line'>    # Deny Nodes shutdown API
</span><span class='line'>    if ($request_filename ~ "_shutdown") { 
</span><span class='line'>      return 403;
</span><span class='line'>      break;
</span><span class='line'>    }
</span><span class='line'>    
</span><span class='line'>    # Deny access to cluster API
</span><span class='line'>    if ($request_filename ~ "_cluster") {
</span><span class='line'>      return 403;
</span><span class='line'>      break;
</span><span class='line'>    }
</span><span class='line'>    
</span><span class='line'>    # Pass requests to ETasticsearch
</span><span class='line'>    proxy_pass http://localhost:9201;
</span><span class='line'>    proxy_redirect off;
</span><span class='line'>    
</span><span class='line'>    proxy_set_header X-Real-IP $remote_addr;
</span><span class='line'>    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
</span><span class='line'>    proxy_set_header Host $http_host;
</span><span class='line'>    
</span><span class='line'>    # For CORS Ajax 
</span><span class='line'>    proxy_pass_header Access-Control-Allow-origin;
</span><span class='line'>    proxy_pass_header Access-Control-Allow-Method proxy_hide_header Access-Control-Allow-Headers;
</span><span class='line'>    add_header Access-control-A1low-Headers 'X-Requested-with, Content-Type';
</span><span class='line'>    # add_header Access-Control-Allow-credentials true;
</span><span class='line'>        
</span><span class='line'>    # Authorize access 
</span><span class='line'>    #auth basic "elasticsearch";
</span><span class='line'>    #auth_basic_user_file /usr/local/etc/elasticsearch/passwords;
</span><span class='line'>    
</span><span class='line'>    mirror /mirror;
</span><span class='line'>    mirror_request_body on;
</span><span class='line'>  }
</span><span class='line'>  
</span><span class='line'>  location /mirror {
</span><span class='line'>    internal; # 指定此location只能被“内部的”请求调用
</span><span class='line'>  
</span><span class='line'>    # Pass requests to OpenSearch
</span><span class='line'>    proxy_pass http://127.0.0.1:19200$request_uri;
</span><span class='line'>    proxy_redirect off:
</span><span class='line'>  
</span><span class='line'>    proxy_set_header X-Real-IP $remote_addr;
</span><span class='line'>    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
</span><span class='line'>    proxy_set_header Host $http_host;
</span><span class='line'>  }
</span><span class='line'>}
</span><span class='line'>
</span><span class='line'>server {
</span><span class='line'>  listen 127.0.0.1:19200;
</span><span class='line'>  location / { # 增加一层，方便在nginx中输出日志定位问题
</span><span class='line'>    proxy_pass https://192.168.1.21:9200;
</span><span class='line'>
</span><span class='line'>    proxy_set_header X-Real-IP $remote_addr;
</span><span class='line'>    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
</span><span class='line'>    proxy_set_header Host $http_host;
</span><span class='line'>  
</span><span class='line'>    proxy_set_header Authorization "Basic YWRtaW46YWRtaW4=";
</span></code></pre></td></tr></table></div></figure>


<p>shell中计算base64的时刻要注意加上 <code>-ne</code> ，也可以直接网上 <a href="https://tool.chinaz.com/tools/base64.aspx">https://tool.chinaz.com/tools/base64.aspx</a> 算一下。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>echo -ne 'admin:admin'|base64 -</span></code></pre></td></tr></table></div></figure>


<p>&ndash;END</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2023/03/18/wechat-on-openai/">微信对接OpenAI</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2023-03-18T14:13:00+08:00" pubdate data-updated="true">Sat 2023-03-18 14:13</time>
		
        
		
      </p>
    
  </header>


  <div class="entry-content"><p>前篇通过sms申请国外手机号注册了OpenAI，在网页上体验了一把ChatGPT。由于需要翻墙，在手机上使用起来并不是很方便，也不能把账号给所有想用的朋友用，范围受限。</p>

<p>最近OpenAI的接口功对接，以及很多文章讲微信对接的文章，我也蹭着这股风把原来的公众号捡起来熟悉熟悉。</p>

<h1>使用开源的方案</h1>

<p>参考文章：</p>

<ul>
<li><a href="https://mp.weixin.qq.com/s/y1Uv3HlVAzo2tSo1XbmyOA">https://mp.weixin.qq.com/s/y1Uv3HlVAzo2tSo1XbmyOA</a></li>
<li><a href="https://github.com/zhayujie/bot-on-anything">https://github.com/zhayujie/bot-on-anything</a></li>
<li><a href="https://github.com/zhayujie/chatgpt-on-wechat">https://github.com/zhayujie/chatgpt-on-wechat</a></li>
</ul>


<h2>搞一台国外的服务器（同事通过自己的机器+翻墙也是可以的）</h2>

<h2>安装Python3.8（OpenAI接口有要求）</h2>

<p>我用的服务器是CentOS7的，已经安装了Python3.6，官方yum中最新的也就3.6。使用scl（Software Collections，类似NVM多版本共存）的方式安装：</p>

<p><strong>再回顾：如果还要更多个python版本，安装conda也是一个不错的选择。</strong></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[root@izt4nhcmmx33bjwcsdmf8oz ~]# sudo yum install centos-release-scl
</span><span class='line'>
</span><span class='line'>[root@izt4nhcmmx33bjwcsdmf8oz ~]# yum install rh-python38
</span><span class='line'>Loaded plugins: fastestmirror, langpacks
</span><span class='line'>Loading mirror speeds from cached hostfile
</span><span class='line'> * centos-sclo-rh: mirror.vodien.com
</span><span class='line'> * centos-sclo-sclo: mirror.vodien.com
</span><span class='line'>Resolving Dependencies
</span><span class='line'>--&gt; Running transaction check
</span><span class='line'>---&gt; Package rh-python38.x86_64 0:2.0-4.el7 will be installed
</span><span class='line'>--&gt; Processing Dependency: rh-python38-runtime for package: rh-python38-2.0-4.el7.x86_64
</span><span class='line'>--&gt; Processing Dependency: rh-python38-python for package: rh-python38-2.0-4.el7.x86_64
</span><span class='line'>--&gt; Processing Dependency: rh-python38-python-pip for package: rh-python38-2.0-4.el7.x86_64
</span><span class='line'>--&gt; Processing Dependency: rh-python38-python-setuptools for package: rh-python38-2.0-4.el7.x86_64
</span><span class='line'>--&gt; Running transaction check
</span><span class='line'>---&gt; Package rh-python38-python.x86_64 0:3.8.13-1.el7 will be installed
</span><span class='line'>--&gt; Processing Dependency: rh-python38-python-libs(x86-64) = 3.8.13-1.el7 for package: rh-python38-python-3.8.13-1.el7.x86_64
</span><span class='line'>--&gt; Processing Dependency: libpython3.8.so.rh-python38-1.0()(64bit) for package: rh-python38-python-3.8.13-1.el7.x86_64
</span><span class='line'>---&gt; Package rh-python38-python-pip.noarch 0:19.3.1-3.el7 will be installed
</span><span class='line'>---&gt; Package rh-python38-python-setuptools.noarch 0:41.6.0-7.el7 will be installed
</span><span class='line'>---&gt; Package rh-python38-runtime.x86_64 0:2.0-4.el7 will be installed
</span><span class='line'>--&gt; Running transaction check
</span><span class='line'>---&gt; Package rh-python38-python-libs.x86_64 0:3.8.13-1.el7 will be installed
</span><span class='line'>--&gt; Processing Dependency: rh-python38-python-pip-wheel for package: rh-python38-python-libs-3.8.13-1.el7.x86_64
</span><span class='line'>--&gt; Processing Dependency: rh-python38-python-setuptools-wheel for package: rh-python38-python-libs-3.8.13-1.el7.x86_64
</span><span class='line'>--&gt; Running transaction check
</span><span class='line'>---&gt; Package rh-python38-python-pip-wheel.noarch 0:19.3.1-3.el7 will be installed
</span><span class='line'>---&gt; Package rh-python38-python-setuptools-wheel.noarch 0:41.6.0-7.el7 will be installed
</span><span class='line'>--&gt; Finished Dependency Resolution
</span><span class='line'>
</span><span class='line'>Dependencies Resolved
</span><span class='line'>
</span><span class='line'>====================================================================================================================================================
</span><span class='line'> Package                                              Arch                    Version                         Repository                       Size
</span><span class='line'>====================================================================================================================================================
</span><span class='line'>Installing:
</span><span class='line'> rh-python38                                          x86_64                  2.0-4.el7                       centos-sclo-rh                  2.8 k
</span><span class='line'>Installing for dependencies:
</span><span class='line'> rh-python38-python                                   x86_64                  3.8.13-1.el7                    centos-sclo-rh                   71 k
</span><span class='line'> rh-python38-python-libs                              x86_64                  3.8.13-1.el7                    centos-sclo-rh                  7.7 M
</span><span class='line'> rh-python38-python-pip                               noarch                  19.3.1-3.el7                    centos-sclo-rh                  1.6 M
</span><span class='line'> rh-python38-python-pip-wheel                         noarch                  19.3.1-3.el7                    centos-sclo-rh                  1.0 M
</span><span class='line'> rh-python38-python-setuptools                        noarch                  41.6.0-7.el7                    centos-sclo-rh                  636 k
</span><span class='line'> rh-python38-python-setuptools-wheel                  noarch                  41.6.0-7.el7                    centos-sclo-rh                  299 k
</span><span class='line'> rh-python38-runtime                                  x86_64                  2.0-4.el7                       centos-sclo-rh                  1.1 M
</span><span class='line'>
</span><span class='line'>Transaction Summary
</span><span class='line'>====================================================================================================================================================
</span><span class='line'>Install  1 Package (+7 Dependent packages)
</span><span class='line'>
</span><span class='line'>Total download size: 12 M
</span><span class='line'>Installed size: 48 M
</span><span class='line'>Is this ok [y/d/N]: y
</span><span class='line'>Downloading packages:
</span><span class='line'>warning: /var/cache/yum/x86_64/7/centos-sclo-rh/packages/rh-python38-2.0-4.el7.x86_64.rpm: Header V4 RSA/SHA1 Signature, key ID f2ee9d55: NOKEY
</span><span class='line'>Public key for rh-python38-2.0-4.el7.x86_64.rpm is not installed
</span><span class='line'>(1/8): rh-python38-2.0-4.el7.x86_64.rpm                                                                                      | 2.8 kB  00:00:00     
</span><span class='line'>(2/8): rh-python38-python-3.8.13-1.el7.x86_64.rpm                                                                            |  71 kB  00:00:00     
</span><span class='line'>(3/8): rh-python38-python-pip-19.3.1-3.el7.noarch.rpm                                                                        | 1.6 MB  00:00:00     
</span><span class='line'>(4/8): rh-python38-python-pip-wheel-19.3.1-3.el7.noarch.rpm                                                                  | 1.0 MB  00:00:00     
</span><span class='line'>(5/8): rh-python38-python-setuptools-41.6.0-7.el7.noarch.rpm                                                                 | 636 kB  00:00:00     
</span><span class='line'>(6/8): rh-python38-python-libs-3.8.13-1.el7.x86_64.rpm                                                                       | 7.7 MB  00:00:00     
</span><span class='line'>(7/8): rh-python38-python-setuptools-wheel-41.6.0-7.el7.noarch.rpm                                                           | 299 kB  00:00:00     
</span><span class='line'>(8/8): rh-python38-runtime-2.0-4.el7.x86_64.rpm                                                                              | 1.1 MB  00:00:00     
</span><span class='line'>----------------------------------------------------------------------------------------------------------------------------------------------------
</span><span class='line'>Total                                                                                                                21 MB/s |  12 MB  00:00:00     
</span><span class='line'>Retrieving key from file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-SIG-SCLo
</span><span class='line'>Importing GPG key 0xF2EE9D55:
</span><span class='line'> Userid     : "CentOS SoftwareCollections SIG (https://wiki.centos.org/SpecialInterestGroup/SCLo) &lt;security@centos.org&gt;"
</span><span class='line'> Fingerprint: c4db d535 b1fb ba14 f8ba 64a8 4eb8 4e71 f2ee 9d55
</span><span class='line'> Package    : centos-release-scl-rh-2-3.el7.centos.noarch (@extras)
</span><span class='line'> From       : /etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-SIG-SCLo
</span><span class='line'>Is this ok [y/N]: y
</span><span class='line'>Running transaction check
</span><span class='line'>Running transaction test
</span><span class='line'>Transaction test succeeded
</span><span class='line'>Running transaction
</span><span class='line'>  Installing : rh-python38-runtime-2.0-4.el7.x86_64                                                                                             1/8 
</span><span class='line'>  Installing : rh-python38-python-pip-wheel-19.3.1-3.el7.noarch                                                                                 2/8 
</span><span class='line'>  Installing : rh-python38-python-setuptools-wheel-41.6.0-7.el7.noarch                                                                          3/8 
</span><span class='line'>  Installing : rh-python38-python-setuptools-41.6.0-7.el7.noarch                                                                                4/8 
</span><span class='line'>  Installing : rh-python38-python-3.8.13-1.el7.x86_64                                                                                           5/8 
</span><span class='line'>  Installing : rh-python38-python-libs-3.8.13-1.el7.x86_64                                                                                      6/8 
</span><span class='line'>  Installing : rh-python38-python-pip-19.3.1-3.el7.noarch                                                                                       7/8 
</span><span class='line'>  Installing : rh-python38-2.0-4.el7.x86_64                                                                                                     8/8 
</span><span class='line'>  Verifying  : rh-python38-2.0-4.el7.x86_64                                                                                                     1/8 
</span><span class='line'>  Verifying  : rh-python38-python-pip-wheel-19.3.1-3.el7.noarch                                                                                 2/8 
</span><span class='line'>  Verifying  : rh-python38-python-setuptools-wheel-41.6.0-7.el7.noarch                                                                          3/8 
</span><span class='line'>  Verifying  : rh-python38-python-3.8.13-1.el7.x86_64                                                                                           4/8 
</span><span class='line'>  Verifying  : rh-python38-python-pip-19.3.1-3.el7.noarch                                                                                       5/8 
</span><span class='line'>  Verifying  : rh-python38-python-libs-3.8.13-1.el7.x86_64                                                                                      6/8 
</span><span class='line'>  Verifying  : rh-python38-python-setuptools-41.6.0-7.el7.noarch                                                                                7/8 
</span><span class='line'>  Verifying  : rh-python38-runtime-2.0-4.el7.x86_64                                                                                             8/8 
</span><span class='line'>
</span><span class='line'>Installed:
</span><span class='line'>  rh-python38.x86_64 0:2.0-4.el7                                                                                                                    
</span><span class='line'>
</span><span class='line'>Dependency Installed:
</span><span class='line'>  rh-python38-python.x86_64 0:3.8.13-1.el7                              rh-python38-python-libs.x86_64 0:3.8.13-1.el7                              
</span><span class='line'>  rh-python38-python-pip.noarch 0:19.3.1-3.el7                          rh-python38-python-pip-wheel.noarch 0:19.3.1-3.el7                         
</span><span class='line'>  rh-python38-python-setuptools.noarch 0:41.6.0-7.el7                   rh-python38-python-setuptools-wheel.noarch 0:41.6.0-7.el7                  
</span><span class='line'>  rh-python38-runtime.x86_64 0:2.0-4.el7                               
</span><span class='line'>
</span><span class='line'>Complete!
</span><span class='line'>[root@izt4nhcmmx33bjwcsdmf8oz ~]# 
</span></code></pre></td></tr></table></div></figure>


<p>检测一下，查看Python版本：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[root@izt4nhcmmx33bjwcsdmf8oz ~]# scl enable rh-python38 bash
</span><span class='line'>
</span><span class='line'>[root@izt4nhcmmx33bjwcsdmf8oz ~]# python --version
</span><span class='line'>Python 3.8.13
</span><span class='line'>[root@izt4nhcmmx33bjwcsdmf8oz ~]# pip --version 
</span><span class='line'>pip 19.3.1 from /opt/rh/rh-python38/root/usr/lib/python3.8/site-packages/pip (python 3.8)
</span><span class='line'>[root@izt4nhcmmx33bjwcsdmf8oz ~]# </span></code></pre></td></tr></table></div></figure>


<p>下载代码：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[root@izt4nhcmmx33bjwcsdmf8oz ~]# git clone https://github.com/zhayujie/bot-on-anything
</span></code></pre></td></tr></table></div></figure>


<h2>对接个人微信</h2>

<p>1 安装依赖</p>

<p>参考 <a href="https://github.com/zhayujie/chatgpt-on-wechat">https://github.com/zhayujie/chatgpt-on-wechat</a> 的说明：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>## [root@izt4nhcmmx33bjwcsdmf8oz Python-3.8.1]# yum install libffi-devel
</span><span class='line'>
</span><span class='line'>[root@izt4nhcmmx33bjwcsdmf8oz ~]# pip3 install itchat-uos==1.5.0.dev0
</span><span class='line'>WARNING: Running pip install with root privileges is generally not a good idea. Try `pip3 install --user` instead.
</span><span class='line'>Looking in indexes: http://mirrors.aliyun.com/pypi/simple/
</span><span class='line'>Collecting itchat-uos==1.5.0.dev0
</span><span class='line'>  Downloading http://mirrors.aliyun.com/pypi/packages/31/2b/0be7e46195dc3c461518b046a6fb9c34c97cd2fd44847b840a0011686575/itchat_uos-1.5.0.dev0-py3-none-any.whl (52kB)
</span><span class='line'>     |████████████████████████████████| 61kB 1.9MB/s 
</span><span class='line'>Collecting requests
</span><span class='line'>  Downloading http://mirrors.aliyun.com/pypi/packages/d2/f4/274d1dbe96b41cf4e0efb70cbced278ffd61b5c7bb70338b62af94ccb25b/requests-2.28.2-py3-none-any.whl (62kB)
</span><span class='line'>     |████████████████████████████████| 71kB 2.0MB/s 
</span><span class='line'>Collecting pyqrcode
</span><span class='line'>  Downloading http://mirrors.aliyun.com/pypi/packages/37/61/f07226075c347897937d4086ef8e55f0a62ae535e28069884ac68d979316/PyQRCode-1.2.1.tar.gz
</span><span class='line'>Collecting pypng
</span><span class='line'>  Downloading http://mirrors.aliyun.com/pypi/packages/3e/b9/3766cc361d93edb2ce81e2e1f87dd98f314d7d513877a342d31b30741680/pypng-0.20220715.0-py3-none-any.whl (58kB)
</span><span class='line'>     |████████████████████████████████| 61kB 1.8MB/s 
</span><span class='line'>Collecting certifi&gt;=2017.4.17
</span><span class='line'>  Downloading http://mirrors.aliyun.com/pypi/packages/71/4c/3db2b8021bd6f2f0ceb0e088d6b2d49147671f25832fb17970e9b583d742/certifi-2022.12.7-py3-none-any.whl (155kB)
</span><span class='line'>     |████████████████████████████████| 163kB 1.7MB/s 
</span><span class='line'>Collecting idna&lt;4,&gt;=2.5
</span><span class='line'>  Downloading http://mirrors.aliyun.com/pypi/packages/fc/34/3030de6f1370931b9dbb4dad48f6ab1015ab1d32447850b9fc94e60097be/idna-3.4-py3-none-any.whl (61kB)
</span><span class='line'>     |████████████████████████████████| 71kB 1.9MB/s 
</span><span class='line'>Collecting urllib3&lt;1.27,&gt;=1.21.1
</span><span class='line'>  Downloading http://mirrors.aliyun.com/pypi/packages/fe/ca/466766e20b767ddb9b951202542310cba37ea5f2d792dae7589f1741af58/urllib3-1.26.14-py2.py3-none-any.whl (140kB)
</span><span class='line'>     |████████████████████████████████| 143kB 1.3MB/s 
</span><span class='line'>Collecting charset-normalizer&lt;4,&gt;=2
</span><span class='line'>  Downloading http://mirrors.aliyun.com/pypi/packages/20/a2/16b2cbf5f73bdd10624b94647b85c008ba25059792a5c7b4fdb8358bceeb/charset_normalizer-3.0.1-cp38-cp38-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (195kB)
</span><span class='line'>     |████████████████████████████████| 204kB 1.5MB/s 
</span><span class='line'>Installing collected packages: certifi, idna, urllib3, charset-normalizer, requests, pyqrcode, pypng, itchat-uos
</span><span class='line'>    Running setup.py install for pyqrcode ... done
</span><span class='line'>Successfully installed certifi-2022.12.7 charset-normalizer-3.0.1 idna-3.4 itchat-uos-1.5.0.dev0 pypng-0.20220715.0 pyqrcode-1.2.1 requests-2.28.2 urllib3-1.26.14
</span><span class='line'>
</span><span class='line'>[root@izt4nhcmmx33bjwcsdmf8oz ~]# pip3 install --upgrade openai
</span><span class='line'>WARNING: Running pip install with root privileges is generally not a good idea. Try `pip3 install --user` instead.
</span><span class='line'>Looking in indexes: http://mirrors.aliyun.com/pypi/simple/
</span><span class='line'>Collecting openai
</span><span class='line'>  Downloading http://mirrors.aliyun.com/pypi/packages/2f/15/b29ed5ad2eed1f49b8b3e2067fbbbb63cfbfc496ca2a27b772bcf0907ad8/openai-0.27.0-py3-none-any.whl (70kB)
</span><span class='line'>     |████████████████████████████████| 71kB 1.7MB/s 
</span><span class='line'>Collecting tqdm
</span><span class='line'>  Downloading http://mirrors.aliyun.com/pypi/packages/e6/02/a2cff6306177ae6bc73bc0665065de51dfb3b9db7373e122e2735faf0d97/tqdm-4.65.0-py3-none-any.whl (77kB)
</span><span class='line'>     |████████████████████████████████| 81kB 1.9MB/s 
</span><span class='line'>Collecting aiohttp
</span><span class='line'>  Downloading http://mirrors.aliyun.com/pypi/packages/d2/e5/cef5eeb11d7e8bac830b3bee1c8311b19bf8e8a1c45fe14b876c70adcd06/aiohttp-3.8.4-cp38-cp38-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (1.0MB)
</span><span class='line'>     |████████████████████████████████| 1.0MB 1.5MB/s 
</span><span class='line'>Requirement already satisfied, skipping upgrade: requests&gt;=2.20 in /opt/rh/rh-python38/root/usr/local/lib/python3.8/site-packages (from openai) (2.28.2)
</span><span class='line'>Collecting yarl&lt;2.0,&gt;=1.0
</span><span class='line'>  Downloading http://mirrors.aliyun.com/pypi/packages/b3/0d/0ba1f2022b9a36ae670c1f3c579ed08d0958398cb6beaf4687e606ad33d4/yarl-1.8.2-cp38-cp38-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (262kB)
</span><span class='line'>     |████████████████████████████████| 266kB 1.7MB/s 
</span><span class='line'>Collecting aiosignal&gt;=1.1.2
</span><span class='line'>  Downloading http://mirrors.aliyun.com/pypi/packages/76/ac/a7305707cb852b7e16ff80eaf5692309bde30e2b1100a1fcacdc8f731d97/aiosignal-1.3.1-py3-none-any.whl
</span><span class='line'>Collecting attrs&gt;=17.3.0
</span><span class='line'>  Downloading http://mirrors.aliyun.com/pypi/packages/fb/6e/6f83bf616d2becdf333a1640f1d463fef3150e2e926b7010cb0f81c95e88/attrs-22.2.0-py3-none-any.whl (60kB)
</span><span class='line'>     |████████████████████████████████| 61kB 1.7MB/s 
</span><span class='line'>Requirement already satisfied, skipping upgrade: charset-normalizer&lt;4.0,&gt;=2.0 in /opt/rh/rh-python38/root/usr/local/lib64/python3.8/site-packages (from aiohttp-&gt;openai) (3.0.1)
</span><span class='line'>Collecting frozenlist&gt;=1.1.1
</span><span class='line'>  Downloading http://mirrors.aliyun.com/pypi/packages/ec/ab/a440db757401a1e8863c9abb374a77cb2884eda74ffbf555dedcf1fbe7f6/frozenlist-1.3.3-cp38-cp38-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_17_x86_64.manylinux2014_x86_64.whl (161kB)
</span><span class='line'>     |████████████████████████████████| 163kB 1.8MB/s 
</span><span class='line'>Collecting multidict&lt;7.0,&gt;=4.5
</span><span class='line'>  Downloading http://mirrors.aliyun.com/pypi/packages/fe/0c/8469202f8f4b0e65816f91c3febc4bda7316c995b59ecdf3b15c574f7a24/multidict-6.0.4-cp38-cp38-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (121kB)
</span><span class='line'>     |████████████████████████████████| 122kB 1.9MB/s 
</span><span class='line'>Collecting async-timeout&lt;5.0,&gt;=4.0.0a3
</span><span class='line'>  Downloading http://mirrors.aliyun.com/pypi/packages/d6/c1/8991e7c5385b897b8c020cdaad718c5b087a6626d1d11a23e1ea87e325a7/async_timeout-4.0.2-py3-none-any.whl
</span><span class='line'>Requirement already satisfied, skipping upgrade: idna&lt;4,&gt;=2.5 in /opt/rh/rh-python38/root/usr/local/lib/python3.8/site-packages (from requests&gt;=2.20-&gt;openai) (3.4)
</span><span class='line'>Requirement already satisfied, skipping upgrade: certifi&gt;=2017.4.17 in /opt/rh/rh-python38/root/usr/local/lib/python3.8/site-packages (from requests&gt;=2.20-&gt;openai) (2022.12.7)
</span><span class='line'>Requirement already satisfied, skipping upgrade: urllib3&lt;1.27,&gt;=1.21.1 in /opt/rh/rh-python38/root/usr/local/lib/python3.8/site-packages (from requests&gt;=2.20-&gt;openai) (1.26.14)
</span><span class='line'>Installing collected packages: tqdm, multidict, yarl, frozenlist, aiosignal, attrs, async-timeout, aiohttp, openai
</span><span class='line'>Successfully installed aiohttp-3.8.4 aiosignal-1.3.1 async-timeout-4.0.2 attrs-22.2.0 frozenlist-1.3.3 multidict-6.0.4 openai-0.27.0 tqdm-4.65.0 yarl-1.8.2
</span><span class='line'>[root@izt4nhcmmx33bjwcsdmf8oz ~]# 
</span></code></pre></td></tr></table></div></figure>


<p>2 修改配置用个人微信方式使用</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[root@izt4nhcmmx33bjwcsdmf8oz bot-on-anything]# cp config-template.json config.json
</span><span class='line'>
</span><span class='line'>[root@izt4nhcmmx33bjwcsdmf8oz bot-on-anything]# cat config.json 
</span><span class='line'>{
</span><span class='line'>  "model": {
</span><span class='line'>    "type" : "chatgpt",
</span><span class='line'>    "openai": {
</span><span class='line'>      "api_key": "sk-xxx",
</span><span class='line'>      "proxy": "",
</span><span class='line'>      "conversation_max_tokens": 1000,
</span><span class='line'>      "character_desc": "你是ChatGPT, 一个由OpenAI训练的大型语言模型, 你旨在回答并解决人们的任何问题，并且可以使用多种语言与人交流。"
</span><span class='line'>    }
</span><span class='line'>  },
</span><span class='line'>
</span><span class='line'>  "channel": {
</span><span class='line'>    "type": "wechat",
</span><span class='line'>    "single_chat_prefix": ["bot", "@bot"],
</span><span class='line'>    "single_chat_reply_prefix": "[bot] ",
</span><span class='line'>    "group_chat_prefix": ["@bot"],
</span><span class='line'>    "group_name_white_list": ["ChatGPT测试群"],
</span><span class='line'>    "image_create_prefix": ["画", "看", "找一张"],
</span><span class='line'>
</span><span class='line'>    "terminal": {
</span><span class='line'>    },
</span><span class='line'>
</span><span class='line'>    "wechat": {
</span><span class='line'>    },
</span></code></pre></td></tr></table></div></figure>


<p>配置解释说明：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>  "single_chat_prefix": ["bot", "@bot"], # 私聊时文本需要包含该前缀才能触发机器人回复
</span><span class='line'>  "single_chat_reply_prefix": "[bot] ", # 私聊时自动回复的前缀，用于区分真人
</span><span class='line'>  "group_chat_prefix": ["@bot"], # 群聊时包含该前缀则会触发机器人回复
</span><span class='line'>  "group_name_white_list": ["ChatGPT测试群", "ChatGPT测试群2"], # 开启自动回复的群名称列表
</span><span class='line'>  "image_create_prefix": ["画", "看", "找"], # 开启图片回复的前缀</span></code></pre></td></tr></table></div></figure>


<p>可以把 group_chat_prefix 改成你要使用的微信号的名称，这样人家@你，就能触发机器人了。</p>

<p>3 启动</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[root@izt4nhcmmx33bjwcsdmf8oz bot-on-anything]# cat startup.sh 
</span><span class='line'>#!/bin/bash
</span><span class='line'>
</span><span class='line'>scl enable rh-python38 - &lt;&lt; \EOF
</span><span class='line'>
</span><span class='line'>mv nohup.out{,$(date +'%Y%m%d%H%M')}
</span><span class='line'>touch nohup.out
</span><span class='line'>nohup python3 app.py & tail -f nohup.out
</span><span class='line'>
</span><span class='line'>EOF
</span><span class='line'>
</span><span class='line'>[root@izt4nhcmmx33bjwcsdmf8oz bot-on-anything]# 
</span><span class='line'>
</span><span class='line'>[root@izt4nhcmmx33bjwcsdmf8oz bot-on-anything]# sh startup.sh 
</span></code></pre></td></tr></table></div></figure>


<p>启动后，会输出一个二维码，使用微信扫描登录。然后建群 <code>ChatGPT测试群</code> 就可以和ChatGPT聊天了。</p>

<h2>对接微信公众号</h2>

<p>1 做域名外网映射</p>

<p>微信公众号要求443或者80端口，首先用 花生壳 做一个映射（还不要求外网ip的443端口）。</p>

<ul>
<li><a href="https://hsk.oray.com/download">https://hsk.oray.com/download</a></li>
<li><a href="https://service.oray.com/question/11630.html">https://service.oray.com/question/11630.html</a></li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[root@izt4nhcmmx33bjwcsdmf8oz ~]# wget "https://down.oray.com/hsk/linux/phddns_5.2.0_amd64.rpm" -O phddns_5.2.0_amd64.rpm
</span><span class='line'>--2023-03-16 12:59:06--  https://down.oray.com/hsk/linux/phddns_5.2.0_amd64.rpm
</span><span class='line'>
</span><span class='line'>Resolving down.oray.com (down.oray.com)... 163.181.42.225, 163.181.42.228, 163.181.42.223, ...
</span><span class='line'>Connecting to down.oray.com (down.oray.com)|163.181.42.225|:443... connected.
</span><span class='line'>HTTP request sent, awaiting response... 200 OK
</span><span class='line'>Length: 295240 (288K) [application/x-redhat-package-manager]
</span><span class='line'>Saving to: ‘phddns_5.2.0_amd64.rpm’
</span><span class='line'>
</span><span class='line'>100%[==========================================================================================================&gt;] 295,240     1.25MB/s   in 0.2s   
</span><span class='line'>
</span><span class='line'>2023-03-16 12:59:07 (1.25 MB/s) - ‘phddns_5.2.0_amd64.rpm’ saved [295240/295240]
</span><span class='line'>
</span><span class='line'>[root@izt4nhcmmx33bjwcsdmf8oz ~]# 
</span><span class='line'>
</span><span class='line'>[root@izt4nhcmmx33bjwcsdmf8oz ~]# rpm -ivh phddns_5.2.0_amd64.rpm       
</span><span class='line'>Preparing...                          ################################# [100%]
</span><span class='line'>
</span><span class='line'>+----------------Phtunnel start install--------------+
</span><span class='line'>
</span><span class='line'>Updating / installing...
</span><span class='line'>   1:phddns-5.2.0-1                   ################################# [100%]
</span><span class='line'>Binary file /proc/1/cmdline matches
</span><span class='line'>Created symlink from /etc/systemd/system/multi-user.target.wants/phtunnel.service to /usr/lib/systemd/system/phtunnel.service.
</span><span class='line'>Created symlink from /etc/systemd/system/multi-user.target.wants/phddns_mini_httpd.service to /usr/lib/systemd/system/phddns_mini_httpd.service.
</span><span class='line'>
</span><span class='line'>+-----------Phtunnel Service Install Success---------+
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>+--------------------------------------------------------+
</span><span class='line'>|                Oray Phtunnel Linux 5.2.0               |
</span><span class='line'>+--------------------------------------------------------+
</span><span class='line'>|     SN: orayc1xxxxx   Default password: admin     |
</span><span class='line'>+--------------------------------------------------------+
</span><span class='line'>| Usage: phddns(start|status|stop|restart|reset|version) |
</span><span class='line'>+--------------------------------------------------------+
</span><span class='line'>|       Remote Management Address http://b.oray.com      |
</span><span class='line'>+--------------------------------------------------------+
</span><span class='line'>
</span><span class='line'>[root@izt4nhcmmx33bjwcsdmf8oz ~]# 
</span><span class='line'>
</span><span class='line'># 卸载：yum remove phddns
</span><span class='line'># phddns start（启动）| status（状态）| stop（停止）|restart（重启）| reset（重置）|enable（开机自启动）|disable（关闭开机自启动）|version（版本）
</span></code></pre></td></tr></table></div></figure>


<p>用上面的SN号和密码登录，在linux上会以一个设备的方式，然后绑定给到我们的账号，然后再到自己的账号设置 <code>https://console.hsk.oray.com/forward</code> 内网穿透，配置一个https映射的。</p>

<p>2 修改配置连接公众号</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>
</span><span class='line'>[root@izt4nhcmmx33bjwcsdmf8oz bot-on-anything]# cat config.json 
</span><span class='line'>{
</span><span class='line'>  "model": {
</span><span class='line'>    "type" : "chatgpt",
</span><span class='line'>    "openai": {
</span><span class='line'>      "api_key": "sk-xxxxxx",
</span><span class='line'>      "proxy": "",
</span><span class='line'>      "conversation_max_tokens": 1000,
</span><span class='line'>      "character_desc": "你是ChatGPT, 一个由OpenAI训练的大型语言模型, 你旨在回答并解决人们的任何问题，并且可以使用多种语言与人交流。"
</span><span class='line'>    }
</span><span class='line'>  },
</span><span class='line'>
</span><span class='line'>  "channel": {
</span><span class='line'>    "type": "wechat_mp",
</span><span class='line'>    "single_chat_prefix": ["bot", "@bot"],
</span><span class='line'>    "single_chat_reply_prefix": "[ChatGPT] ",
</span><span class='line'>    "group_chat_prefix": ["@bot"],
</span><span class='line'>    "group_name_white_list": ["ChatGPT测试群", "ChatGPT哇哇哇", "刘兰家", "ChatGPT"],
</span><span class='line'>    "image_create_prefix": ["画", "看", "找一张"],
</span><span class='line'>
</span><span class='line'>    "terminal": {
</span><span class='line'>    },
</span><span class='line'>
</span><span class='line'>    "wechat": {
</span><span class='line'>    },
</span><span class='line'>
</span><span class='line'>    "wechat_mp": {
</span><span class='line'>      "token": "xxxxxx",
</span><span class='line'>      "port": "3000"
</span><span class='line'>    },
</span><span class='line'>  
</span></code></pre></td></tr></table></div></figure>


<p>3 安装依赖</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[root@izt4nhcmmx33bjwcsdmf8oz bot-on-anything]# scl enable rh-python38 bash 
</span><span class='line'>[root@izt4nhcmmx33bjwcsdmf8oz bot-on-anything]# pip3 install werobot
</span><span class='line'>WARNING: Running pip install with root privileges is generally not a good idea. Try `pip3 install --user` instead.
</span><span class='line'>Looking in indexes: http://mirrors.aliyun.com/pypi/simple/
</span><span class='line'>Collecting werobot
</span><span class='line'>  Downloading http://mirrors.aliyun.com/pypi/packages/84/98/6a16bc6c9b3c216efd28babe06f1891ff1fe3f7f96dfb88516545a8c9b30/WeRoBot-1.13.1-py2.py3-none-any.whl (44kB)
</span><span class='line'>     |████████████████████████████████| 51kB 2.0MB/s 
</span><span class='line'>Collecting bottle
</span><span class='line'>  Downloading http://mirrors.aliyun.com/pypi/packages/bb/1f/5977ea88c6a3df6199db97d320e5da816d415d1eb75a987a1f6823d5cc9d/bottle-0.12.25-py3-none-any.whl (90kB)
</span><span class='line'>     |████████████████████████████████| 92kB 1.8MB/s 
</span><span class='line'>Requirement already satisfied: requests in /opt/rh/rh-python38/root/usr/local/lib/python3.8/site-packages (from werobot) (2.28.2)
</span><span class='line'>Collecting xmltodict
</span><span class='line'>  Downloading http://mirrors.aliyun.com/pypi/packages/94/db/fd0326e331726f07ff7f40675cd86aa804bfd2e5016c727fa761c934990e/xmltodict-0.13.0-py2.py3-none-any.whl
</span><span class='line'>Requirement already satisfied: certifi&gt;=2017.4.17 in /opt/rh/rh-python38/root/usr/local/lib/python3.8/site-packages (from requests-&gt;werobot) (2022.12.7)
</span><span class='line'>Requirement already satisfied: urllib3&lt;1.27,&gt;=1.21.1 in /opt/rh/rh-python38/root/usr/local/lib/python3.8/site-packages (from requests-&gt;werobot) (1.26.14)
</span><span class='line'>Requirement already satisfied: charset-normalizer&lt;4,&gt;=2 in /opt/rh/rh-python38/root/usr/local/lib64/python3.8/site-packages (from requests-&gt;werobot) (3.0.1)
</span><span class='line'>Requirement already satisfied: idna&lt;4,&gt;=2.5 in /opt/rh/rh-python38/root/usr/local/lib/python3.8/site-packages (from requests-&gt;werobot) (3.4)
</span><span class='line'>Installing collected packages: bottle, xmltodict, werobot
</span><span class='line'>Successfully installed bottle-0.12.25 werobot-1.13.1 xmltodict-0.13.0
</span><span class='line'>[root@izt4nhcmmx33bjwcsdmf8oz bot-on-anything]# 
</span></code></pre></td></tr></table></div></figure>


<p>再下载一个敏感字过滤文件：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[root@izt4nhcmmx33bjwcsdmf8oz bot-on-anything]# wget https://raw.githubusercontent.com/qloog/sensitive_words/master/keywords
</span><span class='line'>--2023-03-16 13:52:30--  https://raw.githubusercontent.com/qloog/sensitive_words/master/keywords
</span><span class='line'>Resolving raw.githubusercontent.com (raw.githubusercontent.com)... 185.199.108.133, 185.199.110.133, 185.199.109.133, ...
</span><span class='line'>Connecting to raw.githubusercontent.com (raw.githubusercontent.com)|185.199.108.133|:443... connected.
</span><span class='line'>HTTP request sent, awaiting response... 200 OK
</span><span class='line'>Length: 289615 (283K) [text/plain]
</span><span class='line'>Saving to: ‘keywords’
</span><span class='line'>
</span><span class='line'>100%[==========================================================================================================&gt;] 289,615     --.-K/s   in 0.009s  
</span><span class='line'>
</span><span class='line'>2023-03-16 13:52:31 (32.0 MB/s) - ‘keywords’ saved [289615/289615]
</span><span class='line'>
</span><span class='line'>[root@izt4nhcmmx33bjwcsdmf8oz bot-on-anything]# mv keywords  sensitive_words.txt
</span><span class='line'>[root@izt4nhcmmx33bjwcsdmf8oz bot-on-anything]# 
</span></code></pre></td></tr></table></div></figure>


<p>配置好后，先启动服务，再修改微信公众号接口地址。</p>

<p>启动还是用上面的脚本即可：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Bottle v0.12.25 server starting up (using AutoServer())...
</span><span class='line'>Listening on http://0.0.0.0:3000/</span></code></pre></td></tr></table></div></figure>


<p>4 修改微信公众号的接口地址</p>

<p>在 <code>设置与开发</code> - <code>基本配置</code> 的 <code>服务器配置</code> 的 <code>服务器地址</code> 。<code>令牌TOKEN</code> 与 config.json 里面的一致。</p>

<p>然后就可以用微信公众号与ChatGPT聊天了。</p>

<h1>自己码</h1>

<p>1 对接</p>

<p>参考：</p>

<ul>
<li><a href="https://cnodejs.org/topic/59294bff9e32cc84569a746a">https://cnodejs.org/topic/59294bff9e32cc84569a746a</a></li>
<li><a href="https://github.com/SilenceHVK/wechatByNode">https://github.com/SilenceHVK/wechatByNode</a></li>
</ul>


<p>在微信公众号开启接口自动回复功能，在基本配置-服务器配置指定地址和令牌。</p>

<p>服务器地址(URL) <a href="https://xxx.goho.co/">https://xxx.goho.co/</a></p>

<p>地址的端口要是80的，我们可以通过 花生壳内网映射外网的软件 来配置一个https，指定到本地机器启动的服务。</p>

<p>2 socks proxy:</p>

<ul>
<li><a href="https://blog.csdn.net/z_xuewen/article/details/125935182">https://blog.csdn.net/z_xuewen/article/details/125935182</a></li>
<li><a href="https://medium.com/@paynoattn/using-a-socks-proxy-to-make-requests-in-node-js-ba5125c7999f">https://medium.com/@paynoattn/using-a-socks-proxy-to-make-requests-in-node-js-ba5125c7999f</a></li>
<li><a href="https://levelup.gitconnected.com/how-to-use-a-socks-proxy-in-axios-6c0355a2e013">https://levelup.gitconnected.com/how-to-use-a-socks-proxy-in-axios-6c0355a2e013</a></li>
</ul>


<p>3 pkg 打包nodejs程序</p>

<ul>
<li><a href="https://segmentfault.com/a/1190000041958374">https://segmentfault.com/a/1190000041958374</a></li>
</ul>


<p>&ndash;END</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2023/02/01/git-reset-hard/">记git Reset &#8211;hard</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2023-02-01T08:39:26+08:00" pubdate data-updated="true">Wed 2023-02-01 08:39</time>
		
        
		
      </p>
    
  </header>


  <div class="entry-content"><p>平时不是所有的改动都提交，也保留一些临时代码。今天在主干上提交了后，需要reset后退到前几天的版本，但是直接checkout是新建一个分支，如果reset sort还需要处理index，麻烦，就在eclipse中点击了reset hard，我勒个去，<strong>直接把 原来提交过的代码 改动没提交的 给还原了</strong>！！！</p>

<p><a href="https://stackoverflow.com/questions/9529078/how-do-i-use-git-reset-hard-head-to-revert-to-a-previous-commit">https://stackoverflow.com/questions/9529078/how-do-i-use-git-reset-hard-head-to-revert-to-a-previous-commit</a></p>

<blockquote><p>First, it&rsquo;s always worth noting that git reset &ndash;hard is a potentially dangerous command, since it throws away all your uncommitted changes. For safety, you should always check that the output of git status is clean (that is, empty) before using it.</p></blockquote>

<p>&ndash;END</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2023/02/01/register-openai/">注册OpenAI</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2023-02-01T07:09:45+08:00" pubdate data-updated="true">Wed 2023-02-01 07:09</time>
		
        
		
      </p>
    
  </header>


  <div class="entry-content"><p>ChatGPT再一次火，自己也想尝试一下子。找到官网<a href="https://chat.openai.com">https://chat.openai.com</a>但注册的时刻需要手机验证码，咱国内的手机号码是不行的。</p>

<p>搜索之后找到可以通过虚拟手机号来接收短信完成注册的方法：<a href="https://cloud.tencent.com/developer/article/2190154">一文教你快速注册OpenAi（ChatGPT），国内也可以！</a></p>

<p>实操步骤如下：</p>

<h2>注册登录sms并充值</h2>

<p>1、 注册登录 <a href="https://sms-activate.org/#">https://sms-activate.org/#</a> ，可直接使用国内邮箱。</p>

<p>2、 充值的时刻，先搜一下openai服务需要的金额。</p>

<p><img src="/images/blogs/openai/openai-sms.png" alt="" /></p>

<p>然后选择又上角的余额下拉菜单的充值按钮，然后选择支付宝，充对应金额的钱（我这里是10卢布）。</p>

<p><img src="/images/blogs/openai/openai-pay.png" alt="" /></p>

<p>支付成功后，要等一小会（反正我刷了几分钟，充值页面最下面可以看充值历史），本来是充10卢布的，到账10.55卢布。</p>

<p>3、 搜openai，在提供的列表中选择一个国家购买，就能得到一个对应国家的号码</p>

<p>一开始我是选马来西亚的，但是openai注册的时刻说这个号码被注册次数太多，后面换了印度的10.5（汇率多出的0.5还是蛮好的），就可以了。</p>

<p><img src="/images/blogs/openai/openai-phone.png" alt="" /></p>

<h2>邮箱注册openai</h2>

<p>直接<a href="https://chat.openai.com/chat">https://chat.openai.com/chat</a>使用国内的邮箱注册，然后在填手机号码的页面选择sms中的国家和提供的号码，等几十秒就能在sms的页面看到6位数字的短信验证码</p>

<p>注意: 需要翻墙才能访问！！！</p>

<p><img src="/images/blogs/openai/openai.png" alt="" /></p>

<h2>玩玩</h2>

<p><img src="/images/blogs/openai/openai-e1.jpg" alt="" /></p>

<p><img src="/images/blogs/openai/openai-e2.png" alt="hello world" /></p>

<p>&ndash;END</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/posts/2">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>佛爷</h1>
  <p>来之不易, 且等且珍惜. <br>得之我幸; 不得<span style="display:none">-争-复争-且不得</span>, 命也, 乐享天命, 福也. </p>
  <p><a href="https://github.com/winse"><i class="fa fa-github-alt">winse</i></a>&nbsp;&nbsp;<a href="http://weibo.com/winseliu"><i class="fa fa-weibo">winseliu</i></a></p>
</section>
<section>
  <h1><a class='category' href='/blog/categories/recommend/'>Recommend</a></h1>
	<ul role="list">
		
			<li class="post">
				<a href="/blog/2019/04/10/try-k8s/">Try K8s</a>
			</li>
		
			<li class="post">
				<a href="/blog/2018/08/25/video-auto-translate/">视频自动翻译</a>
			</li>
		
			<li class="post">
				<a href="/blog/2018/06/09/reasonable-way-to-access-the-internet/">科学上网（续）</a>
			</li>
		
			<li class="post">
				<a href="/blog/2017/11/16/sphinx-generate-docs/">使用Sphinx生成/管理文档</a>
			</li>
		
			<li class="post">
				<a href="/blog/2017/10/30/windows-run-ubuntu/">Windows Run Ubuntu</a>
			</li>
		
			<li class="post">
				<a href="/blog/2017/07/30/kubeadm-install-kubenetes-on-centos7/">Kubeadm部署kubernetes</a>
			</li>
		
			<li class="post">
				<a href="/blog/2017/07/08/casperjs-crawler/">爬虫之CasperJS</a>
			</li>
		
			<li class="post">
				<a href="/blog/2016/09/19/163-open-movies-download/">批量下载163-open的视频</a>
			</li>
		
			<li class="post">
				<a href="/blog/2016/04/23/hadoop-guide-catalog/">[整理] Hadoop入门</a>
			</li>
		
			<li class="post">
				<a href="/blog/2016/04/04/rpm-build-your-package/">RPM打包</a>
			</li>
		
			<li class="post">
				<a href="/blog/2015/11/22/gfw-ladder/">搭梯笔记</a>
			</li>
		
			<li class="post">
				<a href="/blog/2015/08/24/manual-install-supervisor/">Supervisor安装配置</a>
			</li>
		
			<li class="post">
				<a href="/blog/2014/07/27/start-redis/">[读读书]Redis入门指南</a>
			</li>
		
			<li class="post">
				<a href="/blog/2014/04/21/hadoop2-windows-startguide/">Windows下部署/配置/调试hadoop2</a>
			</li>
		
			<li class="post">
				<a href="/blog/2014/03/30/git-cheatsheet/">GIT操作记录手册</a>
			</li>
		
			<li class="post">
				<a href="/blog/2014/02/23/quickly-open-program-in-windows/">[Windows运行]快速打开程序</a>
			</li>
		
	</ul>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2023/03/25/reinstall-raspberry2/">重新折腾raspberry2</a>
      </li>
    
      <li class="post">
        <a href="/blog/2023/03/25/mirror-request/">请求复制/镜像</a>
      </li>
    
      <li class="post">
        <a href="/blog/2023/03/18/wechat-on-openai/">微信对接OpenAI</a>
      </li>
    
      <li class="post">
        <a href="/blog/2023/02/01/git-reset-hard/">记git Reset &#8211;hard</a>
      </li>
    
      <li class="post">
        <a href="/blog/2023/02/01/register-openai/">注册OpenAI</a>
      </li>
    
      <li class="post">
        <a href="/blog/2022/07/24/xinchuang-install-postgres/">信创环境迁移浅析-以Postgres为例</a>
      </li>
    
      <li class="post">
        <a href="/blog/2022/04/19/k8s-nfs-run-example/">K8S官方例子NFS</a>
      </li>
    
      <li class="post">
        <a href="/blog/2022/04/14/k8s-nfs/">k8s共享存储使用NFS</a>
      </li>
    
  </ul>
</section>
<section>
  <h1>Categories</h1>

	 
	<ul role="list">
		
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/0/'>0</a> (1) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/alluxio/'>alluxio</a> (1) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/android/'>android</a> (1) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/bigdata/'>bigdata</a> (1) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/blabla/'>blabla</a> (7) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/books/'>books</a> (5) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/debug/'>debug</a> (1) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/deprecated/'>deprecated</a> (1) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/devops/'>devops</a> (1) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/docker/'>docker</a> (16) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/elasticsearch/'>elasticsearch</a> (3) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/es/'>es</a> (1) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/flume/'>flume</a> (1) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/ganglia/'>ganglia</a> (5) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/git/'>git</a> (4) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/hadoop/'>hadoop</a> (44) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/hbase/'>hbase</a> (1) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/hive/'>hive</a> (8) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/hole/'>hole</a> (1) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/java/'>java</a> (13) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/jekyll/'>jekyll</a> (8) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/jenkins/'>jenkins</a> (1) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/jeykll/'>jeykll</a> (1) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/k2/'>k2</a> (2) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/k8s/'>k8s</a> (15) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/kafka/'>kafka</a> (3) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/kubeadm/'>kubeadm</a> (3) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/logstash/'>logstash</a> (1) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/map/'>map</a> (2) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/nfs/'>nfs</a> (1) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/nginx/'>nginx</a> (5) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/openai/'>openai</a> (2) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/openeuler/'>openeuler</a> (2) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/openvpn/'>openvpn</a> (1) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/puppet/'>puppet</a> (11) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/r4a/'>r4a</a> (1) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/raspberry/'>raspberry</a> (4) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/recommend/'>recommend</a> (16) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/redis/'>redis</a> (7) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/scala/'>scala</a> (4) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/shell/'>shell</a> (3) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/spark/'>spark</a> (13) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/staf/'>staf</a> (1) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/tachyon/'>tachyon</a> (3) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/tez/'>tez</a> (2) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/tools/'>tools</a> (70) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/topics/'>topics</a> (2) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/vagrant/'>vagrant</a> (1) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/vnc/'>vnc</a> (1) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/wsl/'>wsl</a> (1) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/zookeeper/'>zookeeper</a> (1) 
		</li>
		
		
		<li style="clear:both; width: 1px; margin: 0; padding: 0;"></li>
		<li class="category"><a href="/blog/archives">All categories</a> (233)</li>
	</ul>
	
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/winse">@winse</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'winse',
            count: 4,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>

<section>
<!--
  <h1>Softs, I&#8217;m using</h1>
  <ul>
    <li class="post">
		<a href="http://hadoop.apache.org/releases.html">hadoop-2.6.3</a>
	</li>
	<li class="post">
		<a href="https://issues.apache.org/jira/browse/HBASE/?selectedTab=com.atlassian.jira.jira-projects-plugin:changelog-panel">hbase-0.96.0</a>
	</li>
	<li class="post">
		<a href="https://hive.apache.org/downloads.html">hive-1.2.1</a>
	</li>
	<li class="post">
		<a href="https://issues.apache.org/jira/browse/TEZ/?selectedTab=com.atlassian.jira.jira-projects-plugin:summary-panel">tez-0.7.0</a>
    </li>
  </ul>
&#8211;>
</section>

  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2023 - Winse Liu -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
  <script type="text/javascript">document.write(unescape("%3Cspan id='cnzz_stat_icon_1253103971'%3E%3C/span%3E%3Cscript src='https://s19.cnzz.com/z_stat.php%3Fid%3D1253103971%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script>
</p>

</footer>
  


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
<script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>

<script>

var time=location.pathname.substring(6).substring(0,11);
var eName=location.pathname.substring(17);
var gitalk = new Gitalk({
  clientID: 'c14f68eac6330d15d984',
  clientSecret: '73b7c1fffa98e299ff0cdd332821201933858e6e',
  repo: 'winse.github.com',
  owner: 'winse',
  admin: ['winse'],
  id: eName,
  labels: ['Gitalk', time],
  body: "http://winse.github.io" + location.pathname,
  createIssueManually: true,
  
  // facebook-like distraction free mode
  distractionFreeMode: false
})

gitalk.render('gitalk-container')

</script>



<script>
/*
$.ajax({
  type: "POST",
  url: "http://log.winseliu.com:20000",
  data: JSON.stringify({
    title: document.title,
    location: JSON.stringify(location),
    referrer: document.referrer,
    userAgent: navigator.userAgent
  }),
  contentType: "application/json; charset=utf-8",
  dataType: "json"
});
*/
</script>











</body>
</html>
