
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Winse Blog</title>
  <meta name="author" content="Winse Liu">

  
  <meta name="description" content="看到linux上各种录制gif的工具： 1
2
3
yum install byzanz byzanz-record -d 10 -x 0 -y 0 -w 1363 -h 758 byzanz-demo.gif 还有各种包装的工具：mkcast 本来想在cygwin中安装byzanz， &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://winseliu.com/posts/16">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
  <link href="/atom.xml" rel="alternate" title="Winse Blog" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="http://cdn.bootcss.com/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<!--
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
-->


  
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-43198550-1', 'auto');
  ga('send', 'pageview');

</script>



</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Winse Blog</a></h1>
  
    <h2>走走停停, 熙熙攘攘, 忙忙碌碌, 不知何畏.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:winseliu.com" />
    <input class="search" type="text" name="q" results="0" placeholder="站内搜索"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/blog/archives/updated.html">Updated</a></li>
  <li><a href="https://yunpan.cn/cuYhpFBPgQYgT" >Books[5aee]</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/02/04/windows-gif/">Windows Gif</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-02-04T15:18:20+08:00" pubdate data-updated="true">Wed 2015-02-04 15:18</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>看到linux上各种录制gif的工具：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>yum install byzanz
</span><span class='line'>
</span><span class='line'>byzanz-record -d 10 -x 0 -y 0 -w 1363 -h 758 byzanz-demo.gif</span></code></pre></td></tr></table></div></figure>


<p>还有各种包装的工具：<a href="https://github.com/KeyboardFire/mkcast">mkcast</a></p>

<p>本来想在cygwin中安装byzanz，但是编译需要各种库，最终放弃了。</p>

<p>其实在windows下面，也有很好的gif录制的工具：<a href="http://www.cockos.com/licecap/">LICEcap</a></p>

<p><img src="/images/blogs/gif-capture-helloworld.gif" alt="" /></p>

<h2>参考</h2>

<ul>
<li><a href="http://v2ex.com/t/139035">windows 下有没有什么录制 gif 截屏质量较好的软件可推荐?</a></li>
<li><a href="http://v5b7.com/other/ubuntu_byzanz.html">Ubuntu录制GIF图</a></li>
</ul>


<p>&ndash;END</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/01/22/build-redis/">Build redis-2.8</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-01-22T09:59:13+08:00" pubdate data-updated="true">Thu 2015-01-22 09:59</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>jemalloc</h2>

<p>默认make使用的libc，在内存方面会产生比较多的碎片。可以使用jemalloc要进行内存的分配管理。</p>

<p>如果报<code>make cc Command not found</code>，需要先安装gcc。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>tar zxvf redis-2.8.13.bin.tar.gz 
</span><span class='line'>cd redis-2.8.13
</span><span class='line'>cd deps/jemalloc/
</span><span class='line'># 用于产生h头文件
</span><span class='line'>./configure 
</span><span class='line'>
</span><span class='line'>cd redis-2.8.13
</span><span class='line'>make MALLOC=jemalloc
</span><span class='line'>src/redis-server </span></code></pre></td></tr></table></div></figure>


<p>查看jemalloc的include的内容如下：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[hadoop@localhost jemalloc]$ cd include/jemalloc/
</span><span class='line'>internal/              jemalloc_defs.h.in     jemalloc_macros.h      jemalloc_mangle.h      jemalloc_mangle.sh     jemalloc_protos.h.in   jemalloc_rename.h      jemalloc.sh
</span><span class='line'>jemalloc_defs.h        jemalloc.h             jemalloc_macros.h.in   jemalloc_mangle_jet.h  jemalloc_protos.h      jemalloc_protos_jet.h  jemalloc_rename.sh  </span></code></pre></td></tr></table></div></figure>


<p>查看内存使用：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[hadoop@localhost redis-2.8.13]$ src/redis-cli info
</span><span class='line'>...
</span><span class='line'># Memory
</span><span class='line'>used_memory:503576
</span><span class='line'>used_memory_human:491.77K
</span><span class='line'>used_memory_rss:2158592
</span><span class='line'>used_memory_peak:503576
</span><span class='line'>used_memory_peak_human:491.77K
</span><span class='line'>used_memory_lua:33792
</span><span class='line'>mem_fragmentation_ratio:4.29
</span><span class='line'>mem_allocator:jemalloc-3.6.0
</span><span class='line'>...</span></code></pre></td></tr></table></div></figure>


<p>redis在使用过程中，会产生碎片。重启以及libc和jemalloc的对比如下：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># 运行中实例
</span><span class='line'># Memory
</span><span class='line'>used_memory:4623527744
</span><span class='line'>used_memory_human:4.31G
</span><span class='line'>used_memory_rss:48304705536
</span><span class='line'>used_memory_peak:38217543280
</span><span class='line'>used_memory_peak_human:35.59G
</span><span class='line'>used_memory_lua:33792
</span><span class='line'>mem_fragmentation_ratio:10.45
</span><span class='line'>mem_allocator:libc
</span><span class='line'>
</span><span class='line'>51616 hadoop    20   0 45.1g  44g 1136 S  0.0 35.7   3410:42 /home/hadoop/redis-2.8.13/src/redis-server *:6371
</span><span class='line'>
</span><span class='line'># 序列化为rdb的文件大小
</span><span class='line'>[hadoop@hadoop-master1 18111]$ ll
</span><span class='line'>总用量 1183116
</span><span class='line'>-rw-rw-r--. 1 hadoop hadoop 1210319541 1月  14 11:28 dump.rdb
</span><span class='line'>
</span><span class='line'># 重启后的实例
</span><span class='line'>[hadoop@hadoop-master1 18111]$  ~/redis-2.8.13/src/redis-server --port 18111
</span><span class='line'>[77484] 14 Jan 14:33:17.910 * DB loaded from disk: 218.337 seconds
</span><span class='line'>
</span><span class='line'># Memory
</span><span class='line'>used_memory:4763158704
</span><span class='line'>used_memory_human:4.44G
</span><span class='line'>used_memory_rss:6217580544
</span><span class='line'>used_memory_peak:4763158704
</span><span class='line'>used_memory_peak_human:4.44G
</span><span class='line'>used_memory_lua:33792
</span><span class='line'>mem_fragmentation_ratio:1.31
</span><span class='line'>mem_allocator:libc
</span><span class='line'>
</span><span class='line'>77484 hadoop    20   0 6052m 5.8g 1200 S  0.0  4.6   3:38.39 /home/hadoop/redis-2.8.13/src/redis-server *:18111
</span><span class='line'>
</span><span class='line'># 使用jemalloc替换libc的实例
</span><span class='line'>[hadoop@hadoop-master1 18111]$ ~/redis-jemalloc/redis-2.8.13/src/redis-server --port 18888
</span><span class='line'>[14793] 14 Jan 14:50:11.250 * DB loaded from disk: 209.839 seconds
</span><span class='line'>
</span><span class='line'># Memory
</span><span class='line'>used_memory:4527760088
</span><span class='line'>used_memory_human:4.22G
</span><span class='line'>used_memory_rss:4625887232
</span><span class='line'>used_memory_peak:4527760088
</span><span class='line'>used_memory_peak_human:4.22G
</span><span class='line'>used_memory_lua:33792
</span><span class='line'>mem_fragmentation_ratio:1.02
</span><span class='line'>mem_allocator:jemalloc-3.6.0
</span><span class='line'>
</span><span class='line'>14793 hadoop    20   0 4538m 4.3g 1360 S  0.0  3.4   3:28.10 /home/hadoop/redis-jemalloc/redis-2.8.13/src/redis-server *:18888                                                                                                                       </span></code></pre></td></tr></table></div></figure>


<h2>tcmalloc</h2>

<ul>
<li>root安装</li>
</ul>


<p>如果有root用户的话操作比较简单。现在<a href="https://code.google.com/p/gperftools/">gperftools</a>和<a href="http://download.savannah.gnu.org/releases/libunwind/libunwind-0.99-beta.tar.gz">libunwind-0.99-beta</a></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>cd libunwind-0.99-beta
</span><span class='line'>./configure 
</span><span class='line'>make && make install
</span><span class='line'>cd /home/hadoop/gperftools-2.4
</span><span class='line'>./configure 
</span><span class='line'>make && make install
</span><span class='line'>
</span><span class='line'>cd redis-2.8.13
</span><span class='line'>make MALLOC=tcmalloc</span></code></pre></td></tr></table></div></figure>


<p>如果出现<strong>./libtool: line 1125: g++: command not found</strong>的错误，缺少编译环境；</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[root@localhost gperftools-2.4]# yum -y install gcc+ gcc-c++</span></code></pre></td></tr></table></div></figure>


<p>编译后，运行报错<strong>src/redis-server: error while loading shared libraries: libtcmalloc.so.4: cannot open shared object file: No such file or directory</strong>，需要配置环境变量：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[hadoop@localhost redis-2.8.13]$ export LD_LIBRARY_PATH=/usr/local/lib
</span><span class='line'>[hadoop@localhost redis-2.8.13]$ src/redis-server </span></code></pre></td></tr></table></div></figure>


<p>或者按照网上的做法：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>echo "/usr/local/lib" &gt; /etc/ld.so.conf.d/usr_local_lib.conf  
</span><span class='line'>/sbin/ldconfig  </span></code></pre></td></tr></table></div></figure>


<p>检查tcmalloc是否生效<code>lsof -n | grep tcmalloc</code>，出现以下信息说明生效</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>redis-ser 1716    hadoop  mem       REG  253,0  2201976  936349 /usr/local/lib/libtcmalloc.so.4.2.6</span></code></pre></td></tr></table></div></figure>


<p>修改配置文件找到daemonize，将后面的no改为yes，让其可以以服务方式运行。</p>

<ul>
<li>普通用户安装</li>
</ul>


<p>考虑到可以各台机器上面复制，指定编译目录这种方式会比较方便。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>cd libunwind-0.99-beta
</span><span class='line'>CFLAGS=-fPIC ./configure --prefix=/home/hadoop/redis
</span><span class='line'>make && make install
</span><span class='line'>
</span><span class='line'>cd gperftools-2.4
</span><span class='line'>./configure -h
</span><span class='line'>export LDFLAGS="-L/home/hadoop/redis/lib"
</span><span class='line'>export CPPFLAGS="-I/home/hadoop/redis/include"
</span><span class='line'>./configure --prefix=/home/hadoop/redis
</span><span class='line'>make && make install</span></code></pre></td></tr></table></div></figure>


<p>编译好后，把东西redis目录内容移到redis-2.8.13/src下。然后修改src/Makefile：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[hadoop@master1 redis-2.8.13]$ vi src/Makefile
</span><span class='line'># Include paths to dependencies
</span><span class='line'>FINAL_CFLAGS+= -I../deps/hiredis -I../deps/linenoise -I../deps/lua/src
</span><span class='line'>    
</span><span class='line'>ifeq ($(MALLOC),tcmalloc)
</span><span class='line'>        #FINAL_CFLAGS+= -DUSE_TCMALLOC
</span><span class='line'>        #FINAL_LIBS+= -ltcmalloc
</span><span class='line'>        FINAL_CFLAGS+= -DUSE_TCMALLOC -I./include
</span><span class='line'>        FINAL_LIBS+= -L./lib  -ltcmalloc -ldl
</span><span class='line'>
</span><span class='line'>endif
</span><span class='line'>
</span><span class='line'>ifeq ($(MALLOC),tcmalloc_minimal)
</span><span class='line'>        FINAL_CFLAGS+= -DUSE_TCMALLOC
</span><span class='line'>        FINAL_LIBS+= -ltcmalloc_minimal
</span><span class='line'>endif</span></code></pre></td></tr></table></div></figure>


<p>然后编译：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[hadoop@master1 redis-2.8.13]$ export LD_LIBRARY_PATH=/home/hadoop/redis-2.8.13/src/lib
</span><span class='line'>[hadoop@master1 redis-2.8.13]$ make MALLOC=tcmalloc
</span><span class='line'>cd src && make all
</span><span class='line'>make[1]: Entering directory `/home/hadoop/redis-2.8.13/src'
</span><span class='line'>    LINK redis-server
</span><span class='line'>    INSTALL redis-sentinel
</span><span class='line'>    CC redis-cli.o
</span><span class='line'>In file included from zmalloc.h:40,
</span><span class='line'>                 from redis-cli.c:50:
</span><span class='line'>./include/google/tcmalloc.h:35:2: warning: #warning is a GCC extension
</span><span class='line'>./include/google/tcmalloc.h:35:2: warning: #warning "google/tcmalloc.h is deprecated. Use gperftools/tcmalloc.h instead"
</span><span class='line'>    LINK redis-cli
</span><span class='line'>    CC redis-benchmark.o
</span><span class='line'>In file included from zmalloc.h:40,
</span><span class='line'>                 from redis-benchmark.c:47:
</span><span class='line'>./include/google/tcmalloc.h:35:2: warning: #warning is a GCC extension
</span><span class='line'>./include/google/tcmalloc.h:35:2: warning: #warning "google/tcmalloc.h is deprecated. Use gperftools/tcmalloc.h instead"
</span><span class='line'>    LINK redis-benchmark
</span><span class='line'>    CC redis-check-dump.o
</span><span class='line'>    LINK redis-check-dump
</span><span class='line'>    CC redis-check-aof.o
</span><span class='line'>    LINK redis-check-aof
</span><span class='line'>
</span><span class='line'>Hint: To run 'make test' is a good idea ;)
</span><span class='line'>
</span><span class='line'>make[1]: Leaving directory `/home/hadoop/redis-2.8.13/src'
</span><span class='line'>[hadoop@master1 redis-2.8.13]$ </span></code></pre></td></tr></table></div></figure>


<h2>redis3集群安装cluster</h2>

<p>编译安装和2.8一样，configuration/make/makeinstall即可。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[hadoop@umcc97-44 cluster-test]$ cat cluster.conf 
</span><span class='line'>port .
</span><span class='line'>cluster-enabled yes
</span><span class='line'>cluster-config-file nodes.conf
</span><span class='line'>cluster-node-timeout 5000
</span><span class='line'>appendonly yes</span></code></pre></td></tr></table></div></figure>


<p>比较苦逼的是需要安装ruby，服务器不能上网！其实ruby在能访问的机器上面安装就可以了！初始化集群的脚本其实就是客户端连接服务端，初始化集群而已。
还有就是在调用命令的时刻要加上<code>-c</code>，这样才是使用集群模式，不然仅仅连单机，读写其他集群服务会报错！</p>

<p><img src="http://file.bmob.cn/M00/04/DB/wKhkA1PVx5-Ab4jaAAA9_Lg7l-I862.png" alt="" /></p>

<p><img src="http://file.bmob.cn/M00/04/DB/wKhkA1PVyXSAC5iEAABfrrHCfuI114.png" alt="" /></p>

<p><img src="http://file.bmob.cn/M00/04/DB/wKhkA1PVzBSAc3KOAADvQfFIPrs908.png" alt="" /></p>

<p><img src="http://file.bmob.cn/M00/04/DF/wKhkA1PWCc-AXZ3EAAHoKZnb1nQ426.png" alt="" /></p>

<p><img src="http://file.bmob.cn/M00/04/DF/wKhkA1PWCkWAZYuLAAAWM5VoXJI861.png" alt="" /></p>

<p><img src="http://file.bmob.cn/M00/04/DF/wKhkA1PWCuSAAuXxAABB-LpH1nQ340.png" alt="" /></p>

<p><img src="http://file.bmob.cn/M00/05/5F/wKhkA1PZBrSAPaMTAAAcSnjmhXE093.png" alt="" /></p>

<h2>Cygwin</h2>

<p>开发环境系统都是在windows，想调试一步步的看源码就得编译下redis。由于cygwin环境，模拟的linux，有部分的变量没有定义，需要进行修改。修改如下:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ git log -1
</span><span class='line'>commit 0c211a1953afeda3d0d45126653e2d4c38bd88cb
</span><span class='line'>Author: antirez &lt;antirez@gmail.com&gt;
</span><span class='line'>Date:   Fri Dec 5 10:51:09 2014 +010
</span><span class='line'>
</span><span class='line'>$ git branch
</span><span class='line'>* 2.8
</span><span class='line'>
</span><span class='line'>$ git diff
</span><span class='line'>diff --git a/deps/hiredis/net.c b/deps/hiredis/net.c
</span><span class='line'>index bdb84ce..6e95f22 100644
</span><span class='line'>--- a/deps/hiredis/net.c
</span><span class='line'>+++ b/deps/hiredis/net.c
</span><span class='line'>@@ -51,6 +51,13 @@
</span><span class='line'> #include "net.h"
</span><span class='line'> #include "sds.h"
</span><span class='line'>
</span><span class='line'>+/* Cygwin Fix */
</span><span class='line'>+#ifdef __CYGWIN__
</span><span class='line'>+#define TCP_KEEPCNT 8
</span><span class='line'>+#define TCP_KEEPINTVL 150
</span><span class='line'>+#define TCP_KEEPIDLE 14400
</span><span class='line'>+#endif
</span><span class='line'>+
</span><span class='line'> /* Defined in hiredis.c */
</span><span class='line'> void __redisSetError(redisContext *c, int type, const char *str);
</span><span class='line'>
</span><span class='line'>diff --git a/src/Makefile b/src/Makefile
</span><span class='line'>index 8b3e959..a72b2f2 100644
</span><span class='line'>--- a/src/Makefile
</span><span class='line'>+++ b/src/Makefile
</span><span class='line'>@@ -63,6 +63,9 @@ else
</span><span class='line'> ifeq ($(uname_S),Darwin)
</span><span class='line'>        # Darwin (nothing to do)
</span><span class='line'> else
</span><span class='line'>+ifeq ($(uname_S),CYGWIN_NT-6.3-WOW64)
</span><span class='line'>+       # cygwin (nothing to do)
</span><span class='line'>+else
</span><span class='line'> ifeq ($(uname_S),AIX)
</span><span class='line'>         # AIX
</span><span class='line'>         FINAL_LDFLAGS+= -Wl,-bexpall
</span><span class='line'>@@ -75,6 +78,7 @@ else
</span><span class='line'> endif
</span><span class='line'> endif
</span><span class='line'> endif
</span><span class='line'>+endif
</span><span class='line'> # Include paths to dependencies
</span><span class='line'> FINAL_CFLAGS+= -I../deps/hiredis -I../deps/linenoise -I../deps/lua/src
</span></code></pre></td></tr></table></div></figure>


<p>然后编译：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>cd deps/
</span><span class='line'>make lua hiredis linenoise
</span><span class='line'>
</span><span class='line'>cd ..
</span><span class='line'>make</span></code></pre></td></tr></table></div></figure>


<p></p>

<p>编译成功后，把程序导入eclipse CDT环境进行运行调试。导入后需要重新构建一下，不然调试的时刻会按照/cygwin的路径来查找源码。</p>

<ul>
<li>Import，然后选择C/C++目录下的[Existing Code as Makefile project]</li>
<li>在[Existing Code Location]填入redis程序对应的目录，在[Toolchain for Indexer Settings]选择<strong>Cygwin GCC</strong></li>
<li>导入完成后，右键选择[Build Configuration]->[Build All]</li>
<li>Run然后选择执行redis-server即可。</li>
</ul>


<p>好像也可以远程调试</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[root@Frankzfz]$gdbserver 10.27.10.48:9000 ./test_seg_fault</span></code></pre></td></tr></table></div></figure>


<h2>参考</h2>

<ul>
<li><a href="http://blog.sina.com.cn/s/blog_71954d8a0100nixe.html">tcp Keepalive</a></li>
<li><a href="http://jiangzhixiang123.blog.163.com/blog/static/2780206220115643822896/">setsockopt之 TCP_KEEPIDLE/TCP_KEEPINTVL/TCP_KEEPCNT - [Linux]</a></li>
<li><a href="http://blog.csdn.net/ce123_zhouwei/article/details/6625486">GDB+GdbServer: ARM程序调试</a></li>
<li><a href="http://my.oschina.net/shelllife/blog/167914">使用gdbserver远程调试</a></li>
<li><p><a href="http://qingfengju.com/article.asp?id=303">用gdb,gdbserver,eclipse+cdt在windows上远程调试linux程序</a></p></li>
<li><p><a href="http://www.cnblogs.com/kernel_hcy/archive/2011/05/15/2046963.html">redis源码分析（1）内存管理</a></p></li>
<li><a href="http://blog.csdn.net/unix21/article/details/12119059">利用TCMalloc替换Nginx和Redis默认glibc库的malloc内存分配</a>)</li>
<li><a href="http://blog.nosqlfan.com/html/3490.html">Redis采用不同内存分配器碎片率对比</a></li>
</ul>


<p>&ndash;END</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/01/08/kafka-guide/">Kafka快速入门</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-01-08T22:02:21+08:00" pubdate data-updated="true">Thu 2015-01-08 22:02</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>年前的时刻就听过kafka的大名，但是一直没有机会亲手尝试。数据写入HDFS然后再MapReduce去处理数据，这样会多出很多中间过程，浪费系统资源。实践下kafka+spark分析是否会更高效。首先了解kafka的基本操作。</p>

<p><a href="http://kafka.apache.org/documentation.html">文档</a>先进行简单的介绍。kafka是一个分布式的、分区的、冗余的日志服务，提供消息系统类似的功能。主要的概念： Topic，Producers，Consumers，Partition，Distribution（replicated）；producers通过TCP发送消息给Kafka集群，然后consumer从Kafka集群获取信息。</p>

<p>Kafka遵循：</p>

<ul>
<li>对于同一个生产者产生的消息有序。</li>
<li>消费者看到的消息顺序和消息存储的顺序一致</li>
<li>一个主题冗余为N的，可以容忍N-1个服务器失败而不会丢失任何消息。</li>
</ul>


<p>下载<a href="http://kafka.apache.org/downloads.html">kafka</a>，当前稳定版本为<a href="https://archive.apache.org/dist/kafka/0.8.1.1/RELEASE_NOTES.html">kafka_2.10-0.8.1.1</a>。下载后解压就可以运行了。</p>

<h2>启动单实例</h2>

<p>由于windows运行的程序放在<code>bin\windows</code>下面。需要对kafka-run-class.bat批处理文件进行稍稍修改：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>rem set BASE_DIR=%CD%\..
</span><span class='line'>set BASE_DIR=%CD%\..\..
</span><span class='line'>
</span><span class='line'>rem for %%i in (%BASE_DIR%\core\lib\*.jar) do (
</span><span class='line'>for %%i in (%BASE_DIR%\libs\*.jar) do (</span></code></pre></td></tr></table></div></figure>


<p>运行程序：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>bin\windows&gt;zookeeper-server-start.bat ..\..\config\zookeeper.properties
</span><span class='line'>
</span><span class='line'>rem 再打开一个cmd窗口运行
</span><span class='line'>bin\windows&gt;kafka-server-start.bat ..\..\config\server.properties
</span></code></pre></td></tr></table></div></figure>


<p>整合成一个脚本<code>start-all.bat</code>，方便以后使用：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>start zookeeper-server-start.bat ..\..\config\zookeeper.properties
</span><span class='line'>timeout 5
</span><span class='line'>start kafka-server-start.bat ..\..\config\server.properties
</span><span class='line'>exit</span></code></pre></td></tr></table></div></figure>


<h2>Topic</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>bin\windows&gt;kafka-run-class.bat kafka.admin.TopicCommand --create --zookeeper localhost:2181 --replication 1 --partitions 1 --topic hello
</span><span class='line'>Created topic "hello".
</span><span class='line'>
</span><span class='line'>bin\windows&gt;kafka-run-class.bat kafka.admin.TopicCommand --list --zookeeper localhost:2181
</span><span class='line'>hello
</span><span class='line'>
</span><span class='line'>bin\windows&gt;kafka-run-class.bat kafka.admin.TopicCommand  --describe --zookeeper localhost:2181 --topic hello
</span><span class='line'>Topic:hello     PartitionCount:1        ReplicationFactor:1     Configs:
</span><span class='line'>        Topic: hello    Partition: 0    Leader: 0       Replicas: 0     Isr: 0</span></code></pre></td></tr></table></div></figure>


<p>如果是在linux下，可以运行kafka-topics.sh来创建和查询。如果觉得打印的日志很不爽，可以修改config目录下的log4j.properties（在脚本中通过环境变量log4j.configuration指定为该文件）。</p>

<h2>发送接受消息</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>rem 生产者
</span><span class='line'>bin\windows&gt;kafka-console-producer.bat --broker-list localhost:9092 --topic hello
</span><span class='line'>
</span><span class='line'>rem 消费者（新开一个窗口）
</span><span class='line'>bin\windows&gt;kafka-console-consumer.bat --zookeeper localhost:2181 --topic hello --from-beginning</span></code></pre></td></tr></table></div></figure>


<p>都启动后，在producer的窗口输入信息。同一时刻，consumer也会打印输入的内容。</p>

<p>这个两个命令都有很多参数，直接输入命令不加任何参数可以输出帮助，了解各个参数的含义及其用法。</p>

<h2>Kafka集群</h2>

<p>集群的配置和zookeeper的集群配置方式很类似。只要修改broker.id和数据存储目录即可。</p>

<p>拷贝server.properties，然后修改下面的三个属性：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>broker.id=1
</span><span class='line'>port=9192
</span><span class='line'>log.dir=/tmp/kafka-logs-1</span></code></pre></td></tr></table></div></figure>


<p>然后启动：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>set JMX_PORT=19999
</span><span class='line'>start kafka-server-start.bat ..\..\config\server-1.properties
</span><span class='line'>set JMX_PORT=29999
</span><span class='line'>start kafka-server-start.bat ..\..\config\server-2.properties
</span><span class='line'>set JMX_PORT=39999
</span><span class='line'>start kafka-server-start.bat ..\..\config\server-3.properties</span></code></pre></td></tr></table></div></figure>


<p>创建Topic</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>bin\windows&gt;kafka-run-class.bat kafka.admin.TopicCommand --create --zookeeper localhost:2181 --replication-factor 3 --partitions 1 --topic mhello
</span><span class='line'>Created topic "mhello".
</span><span class='line'>
</span><span class='line'>bin\windows&gt;kafka-run-class.bat kafka.admin.TopicCommand --describe --zookeeper localhost:2181 --topic mhello
</span><span class='line'>Topic:mhello    PartitionCount:1        ReplicationFactor:3     Configs:
</span><span class='line'>        Topic: mhello   Partition: 0    Leader: 0       Replicas: 0,3,1 Isr: 0,3,1
</span><span class='line'>
</span><span class='line'>bin\windows&gt;kafka-console-producer.bat --broker-list localhost:9092 --topic mhello
</span><span class='line'>bin\windows&gt;kafka-console-consumer.bat --zookeeper localhost:2181 --topic mhello --from-beginning
</span><span class='line'>      </span></code></pre></td></tr></table></div></figure>


<p>描述命令的第一行是所有分区的概要信息，接下来的每一行是每一个分区的信息。Leader后面的数字表示对应的broker-id的进程为当前分区的主节点，后面的Replicas是数据分布的情况（不管数据存在与否），Isr是当前存活的节点的数据分布情况。</p>

<p>把刚刚启动的1，2，3的节点都停掉，再查描述信息。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>bin\windows&gt;kafka-run-class.bat kafka.admin.TopicCommand --describe --zookeeper localhost:2181 --topic mhello
</span><span class='line'>Topic:mhello    PartitionCount:1        ReplicationFactor:3     Configs:
</span><span class='line'>        Topic: mhello   Partition: 0    Leader: 0       Replicas: 0,3,1 Isr: 0
</span><span class='line'>
</span><span class='line'>bin\windows&gt;kafka-console-consumer.bat --zookeeper localhost:2181 --topic mhello --from-beginning
</span><span class='line'>hello1
</span><span class='line'>hello2
</span><span class='line'>hello3        </span></code></pre></td></tr></table></div></figure>


<p>只要有一个节点存在，获取数据都没有问题。如果全部停了，就不能提供服务，但是查询describe命令，显示的还是0，囧！！</p>

<p>开启1，2，3节点后，mhello分区的状态：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Topic:mhello    PartitionCount:1        ReplicationFactor:3     Configs:
</span><span class='line'>        Topic: mhello   Partition: 0    Leader: 3       Replicas: 0,3,1 Isr: 3,1</span></code></pre></td></tr></table></div></figure>


<p>问题：当broker-id修改后，原来的数据，并不能透明的过渡。把broker-id为0的节点修改为1000，然后重启。mhello的数据仍然找不到。再次改回0，存活节点才都回来。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>    Topic: mhello   Partition: 0    Leader: 3       Replicas: 0,3,1 Isr: 3,1,0</span></code></pre></td></tr></table></div></figure>


<h2>小结</h2>

<p>把基本的功能操作了一遍，都是使用命令行操作，接下来学习下和<a href="https://github.com/linkedin/camus/">hadoop结合</a>，使用java-api来操作Kafka。</p>

<h2>参考</h2>

<ul>
<li><a href="http://kafka.apache.org/documentation.html#gettingStarted">kafka gettingStarted</a></li>
</ul>


<p>&ndash;END</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/12/31/redis-operations/">Redis维护</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-12-31T23:14:57+08:00" pubdate data-updated="true">Wed 2014-12-31 23:14</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>在使用过程中，接触最多的就是它的commands。除了string/hashmap/set/sortedlist的基本使用方式外，下面总结平时会经常使用的命令：</p>

<h2>启动，客户端连接</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[root@docker redis-2.8.13]# nohup src/redis-server --port 6370 &
</span><span class='line'>
</span><span class='line'>[root@docker redis-2.8.13]# src/redis-cli -p 6370
</span><span class='line'>127.0.0.1:6370&gt; </span></code></pre></td></tr></table></div></figure>


<h2>获取redis的整体状态</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>127.0.0.1:6370&gt; info
</span><span class='line'>...
</span><span class='line'># Memory
</span><span class='line'>used_memory:1415161160
</span><span class='line'>used_memory_human:1.32G
</span><span class='line'>used_memory_rss:0
</span><span class='line'>used_memory_peak:1415161160
</span><span class='line'>used_memory_peak_human:1.32G
</span><span class='line'>used_memory_lua:33792
</span><span class='line'>mem_fragmentation_ratio:0.00
</span><span class='line'>mem_allocator:jemalloc-3.6.0
</span><span class='line'>...
</span><span class='line'># CPU
</span><span class='line'>used_cpu_sys:52.47
</span><span class='line'>used_cpu_user:10.07
</span><span class='line'>used_cpu_sys_children:0.00
</span><span class='line'>used_cpu_user_children:0.00
</span><span class='line'>
</span><span class='line'># Keyspace
</span><span class='line'>db0:keys=4253125,expires=0,avg_ttl=0</span></code></pre></td></tr></table></div></figure>


<p>列出的信息，包括了版本、内存/CPU使用、请求数、键值对等信息。通过这些基本了解redis运行情况。</p>

<h2>清空数据库</h2>

<p>对于数据量少的情况下，可以使用flushall来清理记录。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>127.0.0.1:6370&gt; set abc 1234
</span><span class='line'>OK
</span><span class='line'>127.0.0.1:6370&gt; keys *
</span><span class='line'>1) "abc"
</span><span class='line'>127.0.0.1:6370&gt; flushall
</span><span class='line'>OK
</span><span class='line'>127.0.0.1:6370&gt; keys *
</span><span class='line'>(empty list or set)</span></code></pre></td></tr></table></div></figure>


<p>数据量大的情况不建议使用flushall，可以直接把rdb数据文件干掉，然后重启redis服务就可以了（找不到数据文件后，就是一个新的库）。</p>

<h2>随机获取一个键</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>127.0.0.1:6370&gt; mset a 1 b 2 c 3 d 4 e 5 f 6 
</span><span class='line'>OK
</span><span class='line'>127.0.0.1:6370&gt; RANDOMKEY
</span><span class='line'>"a"
</span><span class='line'>127.0.0.1:6370&gt; RANDOMKEY
</span><span class='line'>"f"
</span><span class='line'>127.0.0.1:6370&gt; RANDOMKEY
</span><span class='line'>"e"
</span><span class='line'>127.0.0.1:6370&gt; RANDOMKEY
</span><span class='line'>"a"</span></code></pre></td></tr></table></div></figure>


<h2>遍历获取键值</h2>

<p>一般情况下，我们会使用<code>keys PATTERN</code>来查找匹配的键值。但是，如果数据量很大，keys操作会很消耗系统资源，<code>stop the world</code>的事情不是我们想看到的！此时，可以通过scan/hscan/zscan/ssan命令依次获取。</p>

<ul>
<li>获取库中的键值</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>127.0.0.1:6370&gt; eval "for i=1,100000 do redis.call('set', 'a' .. i, i) end" 0
</span><span class='line'>(nil)
</span><span class='line'>(0.98s)</span></code></pre></td></tr></table></div></figure>


<p>正式环境我们无法预估匹配的键的数量，一根筋的使用keys命令可能并不明智。如果数据量很多，等不到结束应该就会ctrl+c了。这种情况下，可以使用scan命令：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>127.0.0.1:6370&gt; scan 0 match ismi:domain:*.upaiyun.com
</span><span class='line'>1) "6553600"
</span><span class='line'>2) 1) "ismi:domain:KunMing:1415646303170928524.test.b0.upaiyun.com"
</span><span class='line'>   2) "ismi:domain:KunMing:1415392926002699280.test.b0.upaiyun.com"
</span><span class='line'>   3) "ismi:domain:KunMing:141489373375899237.test.b0.upaiyun.com"
</span><span class='line'>127.0.0.1:6370&gt; scan 0 match ismi:domain:*.upaiyun.com count 10
</span><span class='line'>1) "6553600"
</span><span class='line'>2) 1) "ismi:domain:KunMing:1415646303170928524.test.b0.upaiyun.com"
</span><span class='line'>   2) "ismi:domain:KunMing:1415392926002699280.test.b0.upaiyun.com"
</span><span class='line'>   3) "ismi:domain:KunMing:141489373375899237.test.b0.upaiyun.com"
</span></code></pre></td></tr></table></div></figure>


<p>Basically with COUNT the user specified the amount of work that should be done at every call in order to retrieve elements from the collection. This is just an hint for the implementation, however generally speaking this is what you could expect most of the times from the implementation.</p>

<p>COUNT数值的意思应该是匹配操作的次数，而不是查询结果的个数。通过和<code>scan 0</code>对比可以得出来。</p>

<p>同理，对于set（smembers）可以使用sscan，sortedlist可以使用zcan等。</p>

<h2>lua脚本</h2>

<p>redis内置的脚本语言，直接使用脚本可以减少客户端和服务端连接（多次请求）的压力。例如要批量删除一些键值：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>src/redis-cli keys 'v2:*' | awk '{print $1}' | while read line; do src/redis-cli del $line ; done</span></code></pre></td></tr></table></div></figure>


<p>先获取匹配的key，然后使用shell再次调用redis的客户端进行删除。表面上看起来没啥问题，如果匹配的key很多，会产生很多的tcp连接，占用redis服务器的端口！最终端口不够用，请求报错。</p>

<p>此时，如果使用lua脚本的方式，就可以轻松处理。无需考虑端口等问题。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># 量少时可以使用
</span><span class='line'>eval "local aks=redis.call('keys', 'v2:*'); if #aks &gt;0 then redis.call('del', unpack(aks)) end" 0
</span><span class='line'>
</span><span class='line'># 优美
</span><span class='line'>eval "local aks=redis.call('keys', 'v2:*'); for _,r in ipairs(aks) do redis.call('del', r) end" 0</span></code></pre></td></tr></table></div></figure>


<p>当然，如果键不多，还可以使用一次性全部删除：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>src/redis-cli -p $PORT del `~/redis-2.8.13/src/redis-cli -p $PORT 'keys' 'v2:*' | grep -v 'v2:ci:' | grep -v 'v2:ff' | grep -v "$(date +%Y-%m-%d)" | grep -v "$(date +%Y-%m-%d -d '-1 day')"`</span></code></pre></td></tr></table></div></figure>


<p>计算打印 hash键 <strong>总共</strong> 的包括键值对数量</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>eval "local aks=redis.call('keys', '*'); local res=0; for i,r in ipairs(aks) do res=res+redis.call('hlen', r) end; return res" 0</span></code></pre></td></tr></table></div></figure>


<p>打印 <strong>每个</strong> hash包括的键值对个数</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>eval "local aks=redis.call('keys', '*'); local res={}; for i,r in ipairs(aks) do res[i]=redis.call('hlen', r) end; return res" 0</span></code></pre></td></tr></table></div></figure>


<p>&ndash;END</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/12/07/hadoop-mr-rest-api/">Hadoop查看作业状态Rest接口</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-12-07T10:09:49+08:00" pubdate data-updated="true">Sun 2014-12-07 10:09</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>hadoop yarn提供了web端查看任务状态，同时可以通过rest的方式获取任务的相关信息。rest接口和网页端的每个界面一一对应。</p>

<p><img src="http://file.bmob.cn/M00/D7/C0/oYYBAFSDxeaARA6AAAenwsLMShM027.png" alt="" /></p>

<p>上面的5个图的链接为：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>http://hadoop-master1:8088/cluster/apps/RUNNING
</span><span class='line'>http://hadoop-master1:8088/cluster/app/application_1417676507722_1846
</span><span class='line'>http://hadoop-master1:8088/proxy/application_1417676507722_1846/
</span><span class='line'>http://hadoop-master1:8088/proxy/application_1417676507722_1846/mapreduce/job/job_1417676507722_1846
</span><span class='line'>http://hadoop-master1:19888/jobhistory/job/job_1417676507722_1846/mapreduce/job/job_1417676507722_1846</span></code></pre></td></tr></table></div></figure>


<h2>查看正在运行的任务</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>curl http://hadoop-master1:8088/ws/v1/cluster/apps?states=RUNNING
</span><span class='line'>...
</span><span class='line'>
</span><span class='line'>curl http://hadoop-master1:8088/proxy/application_1417676507722_1867/ws/v1/mapreduce/info
</span><span class='line'>...
</span><span class='line'>curl http://hadoop-master1:8088/proxy/application_1417676507722_1867/ws/v1/mapreduce/jobs
</span><span class='line'>...
</span><span class='line'>
</span><span class='line'>curl http://hadoop-master1:8088/proxy/application_1417676507722_1867/ws/v1/mapreduce/jobs/job_1417676507722_1867
</span><span class='line'>...
</span><span class='line'>curl http://hadoop-master1:8088/proxy/application_1417676507722_1867/ws/v1/mapreduce/jobs/job_1417676507722_1867/counters
</span><span class='line'>...
</span><span class='line'>curl http://hadoop-master1:8088/proxy/application_1417676507722_1867/ws/v1/mapreduce/jobs/job_1417676507722_1867/conf
</span></code></pre></td></tr></table></div></figure>


<p>如果上面的任务是已经完成的，获取对应的信息时返回的值是空的。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>curl http://hadoop-master1:8088/proxy/application_1417676507722_1867/ws/v1/mapreduce/jobs/job_1417676507722_1867/counters</span></code></pre></td></tr></table></div></figure>


<h2>查看执行完成的任务</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>curl http://hadoop-master1:19888/ws/v1/history
</span><span class='line'>curl http://hadoop-master1:19888/ws/v1/history/info
</span><span class='line'>...
</span><span class='line'>curl http://hadoop-master1:19888/ws/v1/history/mapreduce/jobs?startedTimeBegin=$(date +%s -d '-1 hour')000
</span><span class='line'>...
</span><span class='line'>curl http://hadoop-master1:19888/ws/v1/history/mapreduce/jobs/job_1417676507722_1867
</span><span class='line'>curl http://hadoop-master1:19888/ws/v1/history/mapreduce/jobs/job_1417676507722_1867/counters
</span><span class='line'>curl http://hadoop-master1:19888/ws/v1/history/mapreduce/jobs/job_1417676507722_1867/conf
</span><span class='line'>
</span><span class='line'>curl -H "Accept: application/xml" "http://hadoop-master1:8088/ws/v1/cluster/apps?states=FINISHED&limit=1" | xmllint --format - </span></code></pre></td></tr></table></div></figure>


<p>后面的参数和运行任务一致，只是提供服务不同。</p>

<h2>xml转csv</h2>

<p><img src="http://file.bmob.cn/M00/D7/D5/oYYBAFSEHuKAaAgHAACb9_KkMEU331.png" alt="" /></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ curl -H "Accept: application/xml" "http://hadoop-master1:8088/ws/v1/cluster/apps?startedTimeBegin=$(date +%s -d '-1 hour')000" 2&gt;/dev/null | xsltproc yarn.xslt -  | sort -r
</span><span class='line'>
</span><span class='line'>application_1417676507722_1973,AccessLogOnlyHiveJob,RUNNING,UNDEFINED,1417942144941,0,19416
</span><span class='line'>application_1417676507722_1972,InfoSecurityLogJob,FINISHED,SUCCEEDED,1417942084278,1417942098184,13906
</span><span class='line'>application_1417676507722_1971,InfoSecurityLogJob,FINISHED,SUCCEEDED,1417941603456,1417941617773,14317
</span><span class='line'>application_1417676507722_1970,AccessLogOnlyHiveJob,FINISHED,SUCCEEDED,1417941581080,1417942142287,561207
</span><span class='line'>application_1417676507722_1969,InfoSecurityLogJob,FINISHED,SUCCEEDED,1417941422664,1417941436456,13792</span></code></pre></td></tr></table></div></figure>


<h2>参考</h2>

<ul>
<li><a href="http://hadoop.apache.org/docs/r2.2.0/hadoop-yarn/hadoop-yarn-site/WebServicesIntro.html">Hadoop YARN - Introduction to the web services REST API&rsquo;s.</a></li>
<li><a href="http://hadoop.apache.org/docs/r2.2.0/hadoop-yarn/hadoop-yarn-site/ResourceManagerRest.html">ResourceManager REST API&rsquo;s.</a></li>
<li><a href="http://hadoop.apache.org/docs/r2.2.0/hadoop-yarn/hadoop-yarn-site/MapredAppMasterRest.html">MapReduce Application Master REST API&rsquo;s.</a></li>
<li><a href="http://hadoop.apache.org/docs/r2.2.0/hadoop-yarn/hadoop-yarn-site/HistoryServerRest.html">History Server REST API&rsquo;s.</a></li>
<li><a href="http://blog.csdn.net/wypblog/article/details/21159795">Hadoop YARN中web服务的REST API介绍</a></li>
</ul>


<p>&ndash;END</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/posts/17">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/posts/15">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>佛爷</h1>
  <p>来之不易, 且等且珍惜. <br>得之我幸; 不得<span style="display:none">-争-复争-且不得</span>, 命也, 乐享天命, 福也. </p>
  <p><a href="https://github.com/winse"><i class="fa fa-github-alt">winse</i></a>&nbsp;&nbsp;<a href="http://weibo.com/winseliu"><i class="fa fa-weibo">winseliu</i></a></p>
</section>
<section>
  <h1><a class='category' href='/blog/categories/recommend/'>Recommend</a></h1>
	<ul role="list">
		
			<li class="post">
				<a href="/blog/2016/04/23/hadoop-guide-catalog/">[整理] Hadoop入门</a>
			</li>
		
			<li class="post">
				<a href="/blog/2016/03/28/hive-on-spark/">Hive on Spark</a>
			</li>
		
			<li class="post">
				<a href="/blog/2016/01/23/install-and-config-ganglia-on-redhat-2/">安装配置Ganglia(2)</a>
			</li>
		
			<li class="post">
				<a href="/blog/2015/08/24/manual-install-supervisor/">Supervisor安装配置</a>
			</li>
		
			<li class="post">
				<a href="/blog/2014/10/16/spark-build-and-configuration/">编译/搭建Spark环境</a>
			</li>
		
			<li class="post">
				<a href="/blog/2014/08/25/step-by-step-found-java-oom-error/">查找逐步定位Java程序OOM的异常实践</a>
			</li>
		
			<li class="post">
				<a href="/blog/2014/07/30/hadoop2-snappy-compress/">Hadoop2 Snappy Compress</a>
			</li>
		
			<li class="post">
				<a href="/blog/2014/07/27/start-redis/">[读读书]Redis入门指南</a>
			</li>
		
			<li class="post">
				<a href="/blog/2014/04/21/hadoop2-windows-startguide/">Windows下部署/配置/调试hadoop2</a>
			</li>
		
			<li class="post">
				<a href="/blog/2014/03/30/git-cheatsheet/">GIT操作记录手册</a>
			</li>
		
			<li class="post">
				<a href="/blog/2014/03/18/jekyll-edit-link-in-web-page/">Jekyll页面添加编辑按钮</a>
			</li>
		
			<li class="post">
				<a href="/blog/2013/09/19/let-shell-command-efficient/">让敲Shell命令高效起来</a>
			</li>
		
	</ul>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2016/10/20/ssh-upgrade-on-centos6/">红帽6升级SSH</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/10/12/sparksql-view-and-debug-generatecode/">SparkSQL查看调试生成代码</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/10/12/maven-create-ourself-archetype/">Maven创建自己的Archetype</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/09/19/163-open-movies-download/">批量下载163-open的视频</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/09/12/zookeeper-switch-node/">Zookeeper节点切换</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/09/06/puppet-modify-password/">Puppet批量修改用户密码</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/08/19/j2ee-maven-resources-compress/">Maven压缩js/css功能实践</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/08/17/redis-batch-operate/">Redis批量操作</a>
      </li>
    
  </ul>
</section>
<section>
  <h1>Categories</h1>

	 
	<ul role="list">
		
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/alluxio/'>alluxio</a> (1) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/android/'>android</a> (1) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/bigdata/'>bigdata</a> (1) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/blabla/'>blabla</a> (4) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/books/'>books</a> (6) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/debug/'>debug</a> (1) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/docker/'>docker</a> (4) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/elasticsearch/'>elasticsearch</a> (2) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/flume/'>flume</a> (1) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/ganglia/'>ganglia</a> (5) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/git/'>git</a> (3) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/hadoop/'>hadoop</a> (42) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/hbase/'>hbase</a> (1) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/hive/'>hive</a> (7) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/hole/'>hole</a> (1) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/java/'>java</a> (9) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/jekyll/'>jekyll</a> (7) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/kafka/'>kafka</a> (2) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/nginx/'>nginx</a> (1) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/puppet/'>puppet</a> (10) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/recommend/'>recommend</a> (12) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/redis/'>redis</a> (6) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/scala/'>scala</a> (4) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/shell/'>shell</a> (4) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/spark/'>spark</a> (10) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/tachyon/'>tachyon</a> (3) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/tez/'>tez</a> (2) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/tools/'>tools</a> (38) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/topics/'>topics</a> (2) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/zookeeper/'>zookeeper</a> (1) 
		</li>
		
		
		<li style="clear:both; width: 1px; margin: 0; padding: 0;"></li>
		<li class="category"><a href="/blog/archives">All categories</a> (150)</li>
	</ul>
	
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/winse">@winse</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'winse',
            count: 4,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>

<section>
  <h1>Softs, I&#8217;m using</h1>
  <ul>
    <li class="post">
		<a href="http://hadoop.apache.org/releases.html">hadoop-2.6.3</a>
	</li>
	<li class="post">
		<a href="https://issues.apache.org/jira/browse/HBASE/?selectedTab=com.atlassian.jira.jira-projects-plugin:changelog-panel">hbase-0.96.0</a>
	</li>
	<li class="post">
		<a href="https://hive.apache.org/downloads.html">hive-1.2.1</a>
	</li>
	<li class="post">
		<a href="https://issues.apache.org/jira/browse/TEZ/?selectedTab=com.atlassian.jira.jira-projects-plugin:summary-panel">tez-0.7.0</a>
    </li>
  </ul>
</section>

  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2016 - Winse Liu -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
  <script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1253461959'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "v1.cnzz.com/z_stat.php%3Fid%3D1253461959%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'winseliu';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>











</body>
</html>
