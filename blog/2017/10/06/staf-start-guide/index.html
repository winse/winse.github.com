
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>STAF Start Guide - Winse Blog</title>
  <meta name="author" content="Winse Liu">

  
  <meta name="description" content="STAF(Software Testing Automation Framework) 是用来构建自动化测试的框架，用来部署测试环境。包括跨平台自动化部署的各种组件：config、process、handle、fs、log、monitor、queue、var、security等各种服务， &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://winseliu.com/blog/2017/10/06/staf-start-guide">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
  <link href="/atom.xml" rel="alternate" title="Winse Blog" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//cdn.bootcss.com/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<!--
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
-->


  
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-43198550-1', 'auto');
  ga('send', 'pageview');

</script>



</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Winse Blog</a></h1>
  
    <h2>走走停停, 熙熙攘攘, 忙忙碌碌, 不知何畏.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:winseliu.com" />
    <input class="search" type="text" name="q" results="0" placeholder="站内搜索"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/blog/archives/updated.html">Updated</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">STAF Start Guide</h1>
    
    
      <p class="meta">
        








  


<time datetime="2017-10-06T08:07:49+08:00" pubdate data-updated="true">Fri 2017-10-06 08:07</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>STAF(Software Testing Automation Framework) 是用来构建自动化测试的框架，用来部署测试环境。包括跨平台自动化部署的各种组件：config、process、handle、fs、log、monitor、queue、var、security等各种服务，还可以轻松的扩展。机器通过STAFProc启动的端口来进行通讯（set、query等）。</p>

<blockquote><p>STAF的作用实际上就是提供了机器之间的通信通道并提供基于这个通道的基础服务。</p></blockquote>

<h2>安装</h2>

<ul>
<li><a href="http://staf.sourceforge.net/current/STAFInstall.pdf">http://staf.sourceforge.net/current/STAFInstall.pdf</a></li>
<li><a href="http://blog.csdn.net/lsj6730960/article/details/6186861">STAF的原理及使用</a></li>
<li><a href="https://www.ibm.com/developerworks/cn/opensource/os-test-stafstax/index.html">使用 STAF/STAX 实现测试自动化和持续集成</a></li>
</ul>


<p>直接用 <a href="http://staf.sourceforge.net/getcurrent.php">InstallAnywhere（IA）</a> 的方式安装。文档介绍了整个安装过程中做的所有事情，非常非常的详细。下面针对Linux的安装配置步骤：</p>

<ul>
<li>安装配置项（选项），三种方式选一种：
  交互方式
  文件方式
  默认值</li>
<li>环境变量：使用InstallAnywhere的方式会把环境变量配置好，文档中介绍了使用的环境变量。</li>
<li>启动：shell脚本、开机启动（centos7的服务配置可以参考文档的[Fedora 15 and later]部分）</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>#安装（默认值）
</span><span class='line'>./STAF3426-setup-linux-amd64-NoJVM.bin -i silent -DACCEPT_LICENSE=1
</span><span class='line'>
</span><span class='line'>#启动
</span><span class='line'>su -
</span><span class='line'>/usr/local/staf/bin/STAFProc
</span><span class='line'>或者
</span><span class='line'>./startSTAFProc.sh 
</span><span class='line'>
</span><span class='line'>#测试
</span><span class='line'>[root@cdb1 staf]# staf local ping ping
</span><span class='line'>Response
</span><span class='line'>--------
</span><span class='line'>PONG
</span><span class='line'>[root@cdb1 staf]# staf local process start command ifconfig
</span><span class='line'>Response
</span><span class='line'>--------
</span><span class='line'>5
</span><span class='line'>#staf远程控制 产生的输出是在运行的机器上的！
</span><span class='line'>[root@cdb1 staf]# less nohup.out 
</span><span class='line'>
</span><span class='line'>Machine          : cdb1
</span><span class='line'>Machine nickname : cdb1
</span><span class='line'>Startup time     : 20171006-08:50:55
</span><span class='line'>
</span><span class='line'>STAFProc version 3.4.26 initialized
</span><span class='line'>ens192: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500
</span><span class='line'>        inet 192.168.193.101  netmask 255.255.192.0  broadcast 192.168.255.255
</span><span class='line'>        inet6 fe80::932a:7b98:cc20:f791  prefixlen 64  scopeid 0x20&lt;link&gt;
</span><span class='line'>        inet6 fe80::9ba3:ce9e:cc9c:477d  prefixlen 64  scopeid 0x20&lt;link&gt;
</span><span class='line'>        inet6 fe80::7d8c:b318:d441:70b2  prefixlen 64  scopeid 0x20&lt;link&gt;
</span><span class='line'>        ether 00:50:56:92:26:93  txqueuelen 1000  (Ethernet)
</span><span class='line'>        RX packets 11020400  bytes 3439058707 (3.2 GiB)
</span><span class='line'>        RX errors 0  dropped 717  overruns 0  frame 0
</span><span class='line'>        TX packets 9067587  bytes 3110097659 (2.8 GiB)
</span><span class='line'>        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
</span><span class='line'>
</span><span class='line'>lo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536
</span><span class='line'>        inet 127.0.0.1  netmask 255.0.0.0
</span><span class='line'>        inet6 ::1  prefixlen 128  scopeid 0x10&lt;host&gt;
</span><span class='line'>        loop  txqueuelen 1  (Local Loopback)
</span><span class='line'>        RX packets 70483  bytes 10164575 (9.6 MiB)
</span><span class='line'>        RX errors 0  dropped 0  overruns 0  frame 0
</span><span class='line'>        TX packets 70483  bytes 10164575 (9.6 MiB)
</span><span class='line'>        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>#多机测试
</span><span class='line'>[root@cdb2 staf]# vi bin/STAF.cfg
</span><span class='line'>trust machine 192.168.193.101 level 5
</span><span class='line'>
</span><span class='line'>[root@cdb1 staf]# staf cdb2 ping ping 
</span><span class='line'>[root@cdb1 staf]# staf cdb2 process start command ifconfig 
</span><span class='line'>[root@cdb2 staf]# less nohup.out 
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>#安全退出
</span><span class='line'>STAF local SHUTDOWN SHUTDOWN
</span><span class='line'>C:\STAF\bin\STAF.exe local SHUTDOWN SHUTDOWN
</span></code></pre></td></tr></table></div></figure>


<h2>Getting Started</h2>

<p><a href="http://staf.sourceforge.net/current/STAFGS.pdf">http://staf.sourceforge.net/current/STAFGS.pdf</a></p>

<p>STAFGS 对所有的知识点都做了简单的介绍和归纳。更详细的需要看 User Guide 文档。</p>

<p>STAF is an Open Source automation framework designed around the idea of reusable components. It is intended to make it
easier to create automated testcases and workloads. STAF can help you increase the efficiency, productivity, and quality of
your testing by improving your level of automation and reuse in your individual testcases as well as your overall test
environment.</p>

<p>STAF operates in a peer-to-peer environment; in other words, there is no client-server hierarchy among machines
running STAF.</p>

<h4>Basic STAF Concepts</h4>

<p>STAF Instances
Since multiple instances of STAF can be run at the same time on the same system, a STAF Instance name is used to
specify a name for each STAF instance. You specify the instance name to be used by setting the environment variable
STAF_INSTANCE_NAME. The default instance name is &ldquo;STAF&rdquo;.</p>

<p>A basic description of each level follows</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Level 0 - No access
</span><span class='line'>Level 1 - Restricted access. Only PING and helps available.
</span><span class='line'>Level 2 - Limited access. Only query/view facilities available.
</span><span class='line'>Level 3 - Standard access. Non-destructive updates allowed, e.g., logging.
</span><span class='line'>Level 4 - Advanced access. Update abilities, e.g., copying files, deleting log files.
</span><span class='line'>Level 5 - All access, e.g., SHUTDOWN, Process invocation, Trust definition manipulation</span></code></pre></td></tr></table></div></figure>


<p>STAF requests submitted from the command line are generally used to query information from STAF services.</p>

<h4>STAF Commands</h4>

<p>You can also start STAFProc by simply typing STAFProc at a command prompt
window. ( /usr/local/staf/bin is in your PATH )</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
<span class='line-number'>114</span>
<span class='line-number'>115</span>
<span class='line-number'>116</span>
<span class='line-number'>117</span>
<span class='line-number'>118</span>
<span class='line-number'>119</span>
<span class='line-number'>120</span>
<span class='line-number'>121</span>
<span class='line-number'>122</span>
<span class='line-number'>123</span>
<span class='line-number'>124</span>
<span class='line-number'>125</span>
<span class='line-number'>126</span>
<span class='line-number'>127</span>
<span class='line-number'>128</span>
<span class='line-number'>129</span>
<span class='line-number'>130</span>
<span class='line-number'>131</span>
<span class='line-number'>132</span>
<span class='line-number'>133</span>
<span class='line-number'>134</span>
<span class='line-number'>135</span>
<span class='line-number'>136</span>
<span class='line-number'>137</span>
<span class='line-number'>138</span>
<span class='line-number'>139</span>
<span class='line-number'>140</span>
<span class='line-number'>141</span>
<span class='line-number'>142</span>
<span class='line-number'>143</span>
<span class='line-number'>144</span>
<span class='line-number'>145</span>
<span class='line-number'>146</span>
<span class='line-number'>147</span>
<span class='line-number'>148</span>
<span class='line-number'>149</span>
<span class='line-number'>150</span>
<span class='line-number'>151</span>
<span class='line-number'>152</span>
<span class='line-number'>153</span>
<span class='line-number'>154</span>
<span class='line-number'>155</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>STAF  &lt;Endpoint&gt;/[&lt;Interface&gt;://]&lt;System Identifier&gt;[@&lt;Port&gt;]  &lt;Service&gt; &lt;Request&gt;
</span><span class='line'>
</span><span class='line'>[root@cdb1 staf]# staf local ping ping 
</span><span class='line'>Response
</span><span class='line'>--------
</span><span class='line'>PONG
</span><span class='line'>#没运行
</span><span class='line'>[root@cdb1 staf]# staf cdb2 ping ping 
</span><span class='line'>Error submitting request, RC: 16
</span><span class='line'>Additional info
</span><span class='line'>---------------
</span><span class='line'>STAFConnectionProviderConnect: Error performing test read on connected endpoint: recv() RC=111: 22, Endpoint: ssl://cdb2
</span><span class='line'>[root@cdb1 staf]# staf cdb2 ping ping 
</span><span class='line'>Response
</span><span class='line'>--------
</span><span class='line'>PONG
</span><span class='line'>
</span><span class='line'>[root@cdb1 staf]# staf local service help 
</span><span class='line'>Response
</span><span class='line'>--------
</span><span class='line'>*** SERVICE Service Help ***
</span><span class='line'>
</span><span class='line'>LIST    [ SERVICES | SERVICELOADERS | AUTHENTICATORS |
</span><span class='line'>          REQUESTS &lt;[PENDING] [COMPLETE] [LONG]&gt; | [SUMMARY] ]
</span><span class='line'>QUERY   SERVICE &lt;Service Name&gt; | SERVICELOADER &lt;ServiceLoader Name&gt; |
</span><span class='line'>        AUTHENTICATOR &lt;Authenticator Name&gt; | REQUEST &lt;Request Number&gt;
</span><span class='line'>ADD     SERVICE &lt;Service Name&gt; LIBRARY &lt;Library Name&gt;
</span><span class='line'>        [EXECUTE &lt;Executable&gt;] [OPTION &lt;Name[=Value]&gt;]...
</span><span class='line'>        [PARMS &lt;Parameters&gt;]
</span><span class='line'>REMOVE  SERVICE &lt;Service Name&gt;
</span><span class='line'>FREE    REQUEST &lt;Request Number&gt; [FORCE]
</span><span class='line'>HELP
</span><span class='line'>
</span><span class='line'>[root@cdb1 staf]# staf local shutdown help 
</span><span class='line'>Response
</span><span class='line'>--------
</span><span class='line'>*** SHUTDOWN Service Help ***
</span><span class='line'>
</span><span class='line'>SHUTDOWN
</span><span class='line'>
</span><span class='line'>NOTIFY REGISTER   [MACHINE &lt;Machine&gt;] [HANDLE &lt;Handle&gt; | NAME &lt;Name&gt;]
</span><span class='line'>                  [PRIORITY &lt;Priority&gt;]
</span><span class='line'>NOTIFY UNREGISTER [MACHINE &lt;Machine&gt;] [HANDLE &lt;Handle&gt; | NAME &lt;Name&gt;]
</span><span class='line'>                  [PRIORITY &lt;Priority&gt;]
</span><span class='line'>NOTIFY LIST
</span><span class='line'>
</span><span class='line'>HELP
</span><span class='line'>
</span><span class='line'>&gt;&gt;&gt;&gt; The information returned by Help show us the options we can place after "STAF local shutdown ....." 
</span><span class='line'>in command requests
</span><span class='line'>
</span><span class='line'>[root@cdb1 staf]# staf local service list 
</span><span class='line'>Response
</span><span class='line'>--------
</span><span class='line'>Name      Library    Executable
</span><span class='line'>--------- ---------- ----------
</span><span class='line'>CONFIG    &lt;Internal&gt; &lt;None&gt;    
</span><span class='line'>DELAY     &lt;Internal&gt; &lt;None&gt;    
</span><span class='line'>DIAG      &lt;Internal&gt; &lt;None&gt;    
</span><span class='line'>ECHO      &lt;Internal&gt; &lt;None&gt;    
</span><span class='line'>FS        &lt;Internal&gt; &lt;None&gt;    
</span><span class='line'>HANDLE    &lt;Internal&gt; &lt;None&gt;    
</span><span class='line'>HELP      &lt;Internal&gt; &lt;None&gt;    
</span><span class='line'>LIFECYCLE &lt;Internal&gt; &lt;None&gt;    
</span><span class='line'>MISC      &lt;Internal&gt; &lt;None&gt;    
</span><span class='line'>PING      &lt;Internal&gt; &lt;None&gt;    
</span><span class='line'>PROCESS   &lt;Internal&gt; &lt;None&gt;    
</span><span class='line'>QUEUE     &lt;Internal&gt; &lt;None&gt;    
</span><span class='line'>SEM       &lt;Internal&gt; &lt;None&gt;    
</span><span class='line'>SERVICE   &lt;Internal&gt; &lt;None&gt;    
</span><span class='line'>SHUTDOWN  &lt;Internal&gt; &lt;None&gt;    
</span><span class='line'>TRACE     &lt;Internal&gt; &lt;None&gt;    
</span><span class='line'>TRUST     &lt;Internal&gt; &lt;None&gt;    
</span><span class='line'>VAR       &lt;Internal&gt; &lt;None&gt;    
</span><span class='line'>
</span><span class='line'>[root@cdb1 staf]# staf local var list 
</span><span class='line'>Response
</span><span class='line'>--------
</span><span class='line'>STAF/Config/BootDrive             : /
</span><span class='line'>STAF/Config/CodePage              : UTF-8
</span><span class='line'>STAF/Config/ConfigFile            : /usr/local/staf/bin/STAF.cfg
</span><span class='line'>STAF/Config/DefaultAuthenticator  : none
</span><span class='line'>STAF/Config/DefaultInterface      : ssl
</span><span class='line'>STAF/Config/InstanceName          : STAF
</span><span class='line'>STAF/Config/Machine               : cdb1
</span><span class='line'>STAF/Config/MachineNickname       : cdb1
</span><span class='line'>STAF/Config/Mem/Physical/Bytes    : 3974971392
</span><span class='line'>STAF/Config/Mem/Physical/KB       : 3881808
</span><span class='line'>STAF/Config/Mem/Physical/MB       : 3790
</span><span class='line'>STAF/Config/OS/MajorVersion       : 3.10.0-693.el7.x86_64
</span><span class='line'>STAF/Config/OS/MinorVersion       : #1 SMP Tue Aug 22 21:09:27 UTC 2017
</span><span class='line'>STAF/Config/OS/Name               : Linux
</span><span class='line'>STAF/Config/OS/Revision           : x86_64
</span><span class='line'>STAF/Config/Processor/NumAvail    : 4
</span><span class='line'>STAF/Config/Sep/Command           : ;
</span><span class='line'>STAF/Config/Sep/File              : /
</span><span class='line'>STAF/Config/Sep/Line              : 
</span><span class='line'>
</span><span class='line'>STAF/Config/Sep/Path              : :
</span><span class='line'>STAF/Config/STAFRoot              : /usr/local/staf
</span><span class='line'>STAF/Config/StartupTime           : 20171006-10:33:42
</span><span class='line'>STAF/DataDir                      : /usr/local/staf/data/STAF
</span><span class='line'>STAF/Env/_                        : /usr/bin/nohup
</span><span class='line'>STAF/Env/CLASSPATH                : /usr/local/staf/lib/JSTAF.jar:/usr/local/staf/samples/demo/STAFDemo.jar:/usr/local/staf/samples/demo/STAFDemo.jar:/usr/local/staf/lib/JSTAF.jar:
</span><span class='line'>STAF/Env/HISTCONTROL              : ignoredups
</span><span class='line'>STAF/Env/HISTSIZE                 : 1000
</span><span class='line'>STAF/Env/HOME                     : /root
</span><span class='line'>STAF/Env/HOSTNAME                 : cdb1
</span><span class='line'>STAF/Env/JAVA_HOME                : /usr/local/jdk
</span><span class='line'>STAF/Env/LANG                     : en_US.UTF-8
</span><span class='line'>STAF/Env/LD_LIBRARY_PATH          : /usr/local/staf/lib:/usr/local/staf/lib:
</span><span class='line'>STAF/Env/LESSOPEN                 : ||/usr/bin/lesspipe.sh %s
</span><span class='line'>STAF/Env/LOGNAME                  : root
</span><span class='line'>STAF/Env/LS_COLORS                : rs=0:di=01;34:ln=01;36:mh=00:pi=40;33:so=01;35:do=01;35:bd=40;33;01:cd=40;33;01:or=40;31;01:mi=01;05;37;41:su=37;41:sg=30;43:ca=30;41:tw=30;42:ow=34;42:st=37;44:ex=01;32:*.tar=01;31:*.tgz=01;31:*.arc=01;31:*.arj=01;31:*.taz=01;31:*.lha=01;31:*.lz4=01;31:*.lzh=01;31:*.lzma=01;31:*.tlz=01;31:*.txz=01;31:*.tzo=01;31:*.t7z=01;31:*.zip=01;31:*.z=01;31:*.Z=01;31:*.dz=01;31:*.gz=01;31:*.lrz=01;31:*.lz=01;31:*.lzo=01;31:*.xz=01;31:*.bz2=01;31:*.bz=01;31:*.tbz=01;31:*.tbz2=01;31:*.tz=01;31:*.deb=01;31:*.rpm=01;31:*.jar=01;31:*.war=01;31:*.ear=01;31:*.sar=01;31:*.rar=01;31:*.alz=01;31:*.ace=01;31:*.zoo=01;31:*.cpio=01;31:*.7z=01;31:*.rz=01;31:*.cab=01;31:*.jpg=01;35:*.jpeg=01;35:*.gif=01;35:*.bmp=01;35:*.pbm=01;35:*.pgm=01;35:*.ppm=01;35:*.tga=01;35:*.xbm=01;35:*.xpm=01;35:*.tif=01;35:*.tiff=01;35:*.png=01;35:*.svg=01;35:*.svgz=01;35:*.mng=01;35:*.pcx=01;35:*.mov=01;35:*.mpg=01;35:*.mpeg=01;35:*.m2v=01;35:*.mkv=01;35:*.webm=01;35:*.ogm=01;35:*.mp4=01;35:*.m4v=01;35:*.mp4v=01;35:*.vob=01;35:*.qt=01;35:*.nuv=01;35:*.wmv=01;35:*.asf=01;35:*.rm=01;35:*.rmvb=01;35:*.flc=01;35:*.avi=01;35:*.fli=01;35:*.flv=01;35:*.gl=01;35:*.dl=01;35:*.xcf=01;35:*.xwd=01;35:*.yuv=01;35:*.cgm=01;35:*.emf=01;35:*.axv=01;35:*.anx=01;35:*.ogv=01;35:*.ogx=01;35:*.aac=01;36:*.au=01;36:*.flac=01;36:*.mid=01;36:*.midi=01;36:*.mka=01;36:*.mp3=01;36:*.mpc=01;36:*.ogg=01;36:*.ra=01;36:*.wav=01;36:*.axa=01;36:*.oga=01;36:*.spx=01;36:*.xspf=01;36:
</span><span class='line'>STAF/Env/MAIL                     : /var/spool/mail/root
</span><span class='line'>STAF/Env/PATH                     : /usr/local/staf/bin:/usr/local/staf/bin:/usr/local/jdk/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin
</span><span class='line'>STAF/Env/PWD                      : /usr/local/staf
</span><span class='line'>STAF/Env/SELINUX_LEVEL_REQUESTED  : 
</span><span class='line'>STAF/Env/SELINUX_ROLE_REQUESTED   : 
</span><span class='line'>STAF/Env/SELINUX_USE_CURRENT_RANGE: 
</span><span class='line'>STAF/Env/SHELL                    : /bin/bash
</span><span class='line'>STAF/Env/SHLVL                    : 2
</span><span class='line'>STAF/Env/SSH_AUTH_SOCK            : /tmp/ssh-yEmD907zdB/agent.28259
</span><span class='line'>STAF/Env/SSH_CLIENT               : 192.168.193.10 34774 22
</span><span class='line'>STAF/Env/SSH_CONNECTION           : 192.168.193.10 34774 192.168.193.101 22
</span><span class='line'>STAF/Env/SSH_TTY                  : /dev/pts/2
</span><span class='line'>STAF/Env/STAF_INSTANCE_NAME       : STAF
</span><span class='line'>STAF/Env/STAFCONVDIR              : /usr/local/staf/codepage
</span><span class='line'>STAF/Env/TERM                     : vt100
</span><span class='line'>STAF/Env/USER                     : root
</span><span class='line'>STAF/Env/XDG_DATA_DIRS            : /root/.local/share/flatpak/exports/share/:/var/lib/flatpak/exports/share/:/usr/local/share/:/usr/share/
</span><span class='line'>STAF/Env/XDG_RUNTIME_DIR          : /run/user/0
</span><span class='line'>STAF/Env/XDG_SESSION_ID           : 2080
</span><span class='line'>STAF/Version                      : 3.4.26
</span><span class='line'>
</span><span class='line'>&gt;&gt;&gt;&gt; STAF predefines many useful variables, including information about the machine's Operating System 
</span><span class='line'>and File/Line/Path separators. 
</span><span class='line'>
</span><span class='line'>[root@cdb1 staf]# staf local var resolve system string {STAF/Config/Sep/File}
</span><span class='line'>Response
</span><span class='line'>--------
</span><span class='line'>/
</span><span class='line'>
</span><span class='line'>[root@cdb1 staf]# staf local handle list handles
</span><span class='line'>Response
</span><span class='line'>--------
</span><span class='line'>Handle Handle Name                     State      Last Used Date-Time
</span><span class='line'>------ ------------------------------- ---------- -------------------
</span><span class='line'>1      STAF_Process                    InProcess  20171006-10:33:42  
</span><span class='line'>2      STAF/Service/STAFServiceLoader1 InProcess  20171006-10:33:42  
</span><span class='line'>11     STAF/Client                     Registered 20171006-10:41:39  
</span><span class='line'>
</span><span class='line'>&gt;&gt;&gt;&gt; handle 1 is assigned to STAFProc. Each of the STAF/Client requests represent each 
</span><span class='line'>of the three "STAF local handle list handles" commands you submitted. Note that each request is assigned a new handle
</span><span class='line'>number, and that the previous handles have been deleted 
</span></code></pre></td></tr></table></div></figure>


<h4>Configuring STAF</h4>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[root@cdb1 staf]# staf local log log  machine logname log1 level info message test-message
</span><span class='line'>Response
</span><span class='line'>--------
</span><span class='line'>
</span><span class='line'>[root@cdb1 staf]# staf local log list machines
</span><span class='line'>Response
</span><span class='line'>--------
</span><span class='line'>cdb1
</span><span class='line'>
</span><span class='line'>[root@cdb1 staf]# staf local log query machine cdb1 logname log1 
</span><span class='line'>Response
</span><span class='line'>--------
</span><span class='line'>Date-Time         Level Message     
</span><span class='line'>----------------- ----- ------------
</span><span class='line'>20171006-10:54:33 Info  test-message
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>#配置
</span><span class='line'>[root@cdb1 staf]# echo "MACHINENICKNAME cdb1.dev" &gt;&gt;bin/STAF.cfg 
</span><span class='line'>[root@cdb1 staf]# staf local shutdown shutdown 
</span><span class='line'>[root@cdb1 staf]# ./startSTAFProc.sh 
</span><span class='line'>
</span><span class='line'>[root@cdb1 staf]# staf local log log  machine logname log3 level info message test-message
</span><span class='line'>Response
</span><span class='line'>--------
</span><span class='line'>
</span><span class='line'>[root@cdb1 staf]# staf local log list machines
</span><span class='line'>Response
</span><span class='line'>--------
</span><span class='line'>cdb1
</span><span class='line'>cdb1.dev
</span><span class='line'>[root@cdb1 staf]# staf local log query machine cdb1.dev logname log3
</span><span class='line'>Response
</span><span class='line'>--------
</span><span class='line'>Date-Time         Level Message     
</span><span class='line'>----------------- ----- ------------
</span><span class='line'>20171006-10:57:59 Info  test-message
</span><span class='line'>
</span><span class='line'>&gt;&gt;&gt;&gt; This primarily effects the data stored by
</span><span class='line'>services such as the Log and Monitor services, which store data based on the machine from which it came by using the
</span><span class='line'>STAF/Config/MachineNickname system variable as part of the directory path when creating logs and monitor data. By
</span><span class='line'>allowing the STAF/Config/MachineNickname system variable to be overridden, it allows you to better manage your
</span><span class='line'>data.
</span><span class='line'>Note that the machine nickname is not used to communicate with other systems and does not have any effect on trust. 
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>#配置
</span><span class='line'>echo "SET DATADIR /data" &gt;&gt;bin/STAF.cfg
</span><span class='line'>...
</span><span class='line'>SET SYSTEM VAR Test/TestABC=websphere
</span><span class='line'>SET SYSTEM VAR Test/TestXYZ=150
</span><span class='line'>
</span><span class='line'>restart STAFProc and from a command prompt, try the STAF local var list command
</span><span class='line'>
</span><span class='line'>TRUST LEVEL 2 DEFAULT
</span><span class='line'>TRUST LEVEL 5 MACHINE 192.168.193.*
</span><span class='line'>TRUST LEVEL 4 MACHINE tcp://9.3.41.*
</span><span class='line'>TRUST LEVEL 5 MACHINE tcP://9.41.53.147
</span><span class='line'>
</span><span class='line'>[root@cdb1 staf]# staf local trust list 
</span><span class='line'>Response
</span><span class='line'>--------
</span><span class='line'>Type    Entry             Trust Level
</span><span class='line'>------- ----------------- -----------
</span><span class='line'>Default &lt;None&gt;            2          
</span><span class='line'>Machine *://192.168.193.* 5          
</span><span class='line'>Machine local://local     5          
</span><span class='line'>Machine tcp://9.3.41.*    4          
</span><span class='line'>Machine tcP://9.41.53.147 5          
</span></code></pre></td></tr></table></div></figure>


<h4>Using the Help Service</h4>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[root@cdb1 staf]# staf local help help 
</span><span class='line'>Response
</span><span class='line'>--------
</span><span class='line'>*** HELP Service Help ***
</span><span class='line'>
</span><span class='line'>REGISTER   SERVICE &lt;Name&gt; ERROR &lt;Number&gt; INFO &lt;String&gt; DESCRIPTION &lt;String&gt;
</span><span class='line'>
</span><span class='line'>UNREGISTER SERVICE &lt;Name&gt; ERROR &lt;Number&gt;
</span><span class='line'>
</span><span class='line'>[SERVICE &lt;Name&gt;] ERROR &lt;Number&gt;
</span><span class='line'>
</span><span class='line'>LIST SERVICES | [SERVICE &lt;Name&gt;] ERRORS
</span><span class='line'>
</span><span class='line'>HELP
</span><span class='line'>
</span><span class='line'>#错误码详情
</span><span class='line'>[root@cdb1 staf]# staf local error list 
</span><span class='line'>Error submitting request, RC: 2
</span><span class='line'>Additional info
</span><span class='line'>---------------
</span><span class='line'>error
</span><span class='line'>[root@cdb1 staf]# staf local help error 2
</span><span class='line'>Response
</span><span class='line'>--------
</span><span class='line'>Description: Unknown service
</span><span class='line'>Details    : You have tried to submit a request to a service that is unknown to STAFProc.  Verify that you have correctly registered the service.
</span></code></pre></td></tr></table></div></figure>


<h4>Registering STAF Services</h4>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>http://staf.sourceforge.net/getservices.php 下载EventV315.tar
</span><span class='line'>[root@cdb1 staf]# tar xf EventV315.tar 
</span><span class='line'>
</span><span class='line'>[root@cdb1 staf]# vi bin/STAF.cfg 
</span><span class='line'>...
</span><span class='line'>service Event library JSTAF execute /usr/local/staf/event/STAFEvent.jar
</span><span class='line'>
</span><span class='line'>[root@cdb1 staf]# staf local shutdown shutdown 
</span><span class='line'>[root@cdb1 staf]# ./startSTAFProc.sh 
</span><span class='line'>[root@cdb1 staf]# staf local service list 
</span><span class='line'>Response
</span><span class='line'>--------
</span><span class='line'>Name      Library    Executable                         
</span><span class='line'>--------- ---------- -----------------------------------
</span><span class='line'>...
</span><span class='line'>EVENT     JSTAF      /usr/local/staf/event/STAFEvent.jar
</span><span class='line'>...
</span><span class='line'>
</span><span class='line'>#帮助文档： http://staf.sourceforge.net/current/event.htm
</span></code></pre></td></tr></table></div></figure>


<h4>STAF Demo（<strong> 前提得安装上面的EVENT，并且STAFProc也得在图形界面Terminal启动！！ </strong>）</h4>

<ol>
<li>each machine must give the other machine a TRUST level of 5</li>
<li>samples\demo\STAFDemo.jar在CLASSPATH里面.</li>
<li>java STAFDemoController是图形界面程序！！</li>
<li>弹出的窗口【An Arbitrary Process:Handle X】的标题（界面没看到的话，可能是被遮住了）。</li>
</ol>


<p><strong> However, the STAFProcess window should be displayed on your remote machine。</strong></p>

<p>具体的代码解析查阅【8.2. STAF Demo Code - Leveraging STAF】这个章节。</p>

<h2>User&rsquo;s Guide</h2>

<ul>
<li><a href="http://staf.sourceforge.net/current/STAFUG.htm">http://staf.sourceforge.net/current/STAFUG.htm</a></li>
<li><a href="http://staf.sourceforge.net/current/STAFUG.htm#HDRJVMCFG">4.4.2 JSTAF service proxy library</a></li>
</ul>


<h2>STAX Getting Started</h2>

<p><a href="http://staf.sourceforge.net/current/staxgs.pdf">http://staf.sourceforge.net/current/staxgs.pdf</a></p>

<p>Verify that the CLASSPATH environment variable contains the JSTAF.jar file. JSTAF.jar contains the STAF Java APIs
to communicate with STAF from Java programs and is required to register STAF services written in Java.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[root@cdb1 staf]# tar xf ~/STAXV3517.tar 
</span><span class='line'>[root@cdb1 staf]# vi bin/STAF.cfg 
</span><span class='line'>...
</span><span class='line'>SERVICE STAX LIBRARY JSTAF EXECUTE {STAF/Config/STAFRoot}/stax/STAX.jar OPTION J2=-Xmx2048m
</span><span class='line'>SERVICE EVENT LIBRARY JSTAF EXECUTE {STAF/Config/STAFRoot}/stax/STAFEvent.jar
</span><span class='line'>SET MAXQUEUESIZE 10000
</span></code></pre></td></tr></table></div></figure>


<p>If you do not want to include the JVM bin directory in your PATH, then you can use the
&ldquo;OPTION JVM=xxx&rdquo; to specify which Java executable to use for the services.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[root@cdb1 staf]# staf local stax version 
</span><span class='line'>Response
</span><span class='line'>--------
</span><span class='line'>3.5.17
</span><span class='line'>[root@cdb1 staf]# staf local stax version jython
</span><span class='line'>Response
</span><span class='line'>--------
</span><span class='line'>2.5.2-staf-v1
</span><span class='line'>[root@cdb1 staf]# 
</span></code></pre></td></tr></table></div></figure>


<p>Errors that occur when running the STAX service will be stored in its JVM log. This log is data/STAF/lang/java/jvm/STAFJVM1/JVMLog.1 in
your root STAF directory</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>source /etc/profile
</span><span class='line'>cd stax
</span><span class='line'>java -jar STAXMon.jar
</span><span class='line'>
</span><span class='line'>&gt;&gt;&gt;&gt; You use script elements within your STAX jobs to define Python variables and execute Python code. However, also note that in most cases, all of
</span><span class='line'>the element content and element attributes in your STAX jobs will also be evaluated as Python code. 
</span><span class='line'>
</span><span class='line'>&lt;script&gt;testName = 'CoolTest1'&lt;/script&gt;
</span><span class='line'>&lt;testcase name="testName"&gt;
</span><span class='line'>&lt;testcase name="'%s Part A' % testName"&gt;
</span><span class='line'>&lt;testcase name="'%s Part A on machine %s' % (testName, machineName)"&gt;
</span><span class='line'>
</span><span class='line'>#DoesNothing.xml 
</span><span class='line'>&lt;?xml version="1.0" encoding="UTF-8" standalone="no"?&gt;
</span><span class='line'>&lt;!DOCTYPE stax SYSTEM "stax.dtd"&gt;
</span><span class='line'>
</span><span class='line'>&lt;stax&gt;
</span><span class='line'>
</span><span class='line'>  &lt;defaultcall function="main"/&gt;
</span><span class='line'>
</span><span class='line'>  &lt;function name="main"&gt;
</span><span class='line'>    &lt;nop/&gt;
</span><span class='line'>  &lt;/function&gt;
</span><span class='line'>
</span><span class='line'>&lt;/stax&gt;
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>#generate dtd for xml editor
</span><span class='line'>set STAF_QUIET_MODE=1 (or if on Unix: export STAF_QUIET_MODE=1)
</span><span class='line'>STAF local STAX GET DTD &gt; stax.dtd
</span><span class='line'>set STAF_QUIET_MODE= (or if on Unix: unset STAF_QUIET_MODE)
</span><span class='line'>
</span><span class='line'>#RunNotepadProcess.xml
</span><span class='line'>&lt;?xml version="1.0" encoding="UTF-8" standalone="no"?&gt;
</span><span class='line'>&lt;!DOCTYPE stax SYSTEM "stax.dtd"&gt;
</span><span class='line'>
</span><span class='line'>&lt;stax&gt;
</span><span class='line'>
</span><span class='line'>  &lt;defaultcall function="main"/&gt;
</span><span class='line'>
</span><span class='line'>  &lt;function name="main"&gt;
</span><span class='line'>
</span><span class='line'>    &lt;process&gt;
</span><span class='line'>      &lt;location&gt;'local'&lt;/location&gt;
</span><span class='line'>      &lt;command&gt;'notepad'&lt;/command&gt;
</span><span class='line'>    &lt;/process&gt;
</span><span class='line'>
</span><span class='line'>  &lt;/function&gt;
</span><span class='line'>
</span><span class='line'>&lt;/stax&gt;</span></code></pre></td></tr></table></div></figure>


<p>结束任务，打开的程序也会被kill掉！！！</p>

<p>&ndash;END</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Winse Liu</span></span>

      








  


<time datetime="2017-10-06T08:07:49+08:00" pubdate data-updated="true">Fri 2017-10-06 08:07</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/staf/'>staf</a>
  
</span>


	  <span style="padding: 0 1em;">
<a class="shellExecuteLink" href="npp-windows://e/_posts/2017-10-06-staf-start-guide.markdown" title="本地编辑"><i class="icon-edit"> </i>编辑</a>
</span>	
    </p>
    
      <div class="sharing">
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2017/10/05/respberrypi-connected-via/" title="Previous Post: 连接树莓派">&laquo; 连接树莓派</a>
      
      
        <a class="basic-alignment right" href="/blog/2017/10/07/docker-network-via-pipework/" title="Next Post: docker多主机网络配置 - pipework">docker多主机网络配置 - pipework &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
	
  
<!-- gitalk评论 start -->
    <div id="gitalk-container"></div> 
<!-- gitalk评论 end -->
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>佛爷</h1>
  <p>来之不易, 且等且珍惜. <br>得之我幸; 不得<span style="display:none">-争-复争-且不得</span>, 命也, 乐享天命, 福也. </p>
  <p><a href="https://github.com/winse"><i class="fa fa-github-alt">winse</i></a>&nbsp;&nbsp;<a href="http://weibo.com/winseliu"><i class="fa fa-weibo">winseliu</i></a></p>
</section>
<section>
  <h1><a class='category' href='/blog/categories/recommend/'>Recommend</a></h1>
	<ul role="list">
		
			<li class="post">
				<a href="/blog/2019/04/10/try-k8s/">Try K8s</a>
			</li>
		
			<li class="post">
				<a href="/blog/2018/06/09/reasonable-way-to-access-the-internet/">科学上网（续）</a>
			</li>
		
			<li class="post">
				<a href="/blog/2018/01/20/gitalk-on-octopress/">Gitalk on Octopress</a>
			</li>
		
			<li class="post">
				<a href="/blog/2017/11/16/sphinx-generate-docs/">使用Sphinx生成/管理文档</a>
			</li>
		
			<li class="post">
				<a href="/blog/2017/08/10/java-bytecode-security/">保护/加密JAVA代码</a>
			</li>
		
			<li class="post">
				<a href="/blog/2017/07/30/kubeadm-install-kubenetes-on-centos7/">Kubeadm部署kubernetes</a>
			</li>
		
			<li class="post">
				<a href="/blog/2017/07/08/casperjs-crawler/">爬虫之CasperJS</a>
			</li>
		
			<li class="post">
				<a href="/blog/2017/05/23/spark-on-hive-speculation-shit-bug/">Hive on Spark预测性执行BUG一枚</a>
			</li>
		
			<li class="post">
				<a href="/blog/2016/04/23/hadoop-guide-catalog/">[整理] Hadoop入门</a>
			</li>
		
			<li class="post">
				<a href="/blog/2016/03/28/hive-on-spark/">Hive on Spark</a>
			</li>
		
			<li class="post">
				<a href="/blog/2016/01/23/install-and-config-ganglia-on-redhat-2/">安装配置Ganglia(2)</a>
			</li>
		
			<li class="post">
				<a href="/blog/2015/08/24/manual-install-supervisor/">Supervisor安装配置</a>
			</li>
		
			<li class="post">
				<a href="/blog/2014/10/16/spark-build-and-configuration/">编译/搭建Spark环境</a>
			</li>
		
			<li class="post">
				<a href="/blog/2014/08/25/step-by-step-found-java-oom-error/">查找逐步定位Java程序OOM的异常实践</a>
			</li>
		
			<li class="post">
				<a href="/blog/2014/07/30/hadoop2-snappy-compress/">Hadoop2 Snappy Compress</a>
			</li>
		
			<li class="post">
				<a href="/blog/2014/07/27/start-redis/">[读读书]Redis入门指南</a>
			</li>
		
			<li class="post">
				<a href="/blog/2014/04/21/hadoop2-windows-startguide/">Windows下部署/配置/调试hadoop2</a>
			</li>
		
			<li class="post">
				<a href="/blog/2014/03/30/git-cheatsheet/">GIT操作记录手册</a>
			</li>
		
			<li class="post">
				<a href="/blog/2014/03/18/jekyll-edit-link-in-web-page/">Jekyll页面添加编辑按钮</a>
			</li>
		
			<li class="post">
				<a href="/blog/2013/09/19/let-shell-command-efficient/">让敲Shell命令高效起来</a>
			</li>
		
	</ul>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2019/04/10/try-bk-dot-tencent-dot-com/">Try bk.tencent.com</a>
      </li>
    
      <li class="post">
        <a href="/blog/2019/04/10/try-k8s/">Try K8s</a>
      </li>
    
      <li class="post">
        <a href="/blog/2018/10/20/jcef-build-on-win64/">编译JCEF - Win64</a>
      </li>
    
      <li class="post">
        <a href="/blog/2018/08/25/video-auto-translate/">视频自动翻译</a>
      </li>
    
      <li class="post">
        <a href="/blog/2018/06/20/k2-reburn/">斐讯K2刷机记录</a>
      </li>
    
      <li class="post">
        <a href="/blog/2018/06/19/install-macosx-on-vmware/">使用VMWare安装Mac OS X</a>
      </li>
    
      <li class="post">
        <a href="/blog/2018/06/10/java-source-annotation-processor/">使用注解生成代码</a>
      </li>
    
      <li class="post">
        <a href="/blog/2018/06/09/reasonable-way-to-access-the-internet/">科学上网（续）</a>
      </li>
    
  </ul>
</section>
<section>
  <h1>Categories</h1>

	 
	<ul role="list">
		
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/alluxio/'>alluxio</a> (1) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/android/'>android</a> (1) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/bigdata/'>bigdata</a> (1) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/blabla/'>blabla</a> (7) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/books/'>books</a> (6) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/debug/'>debug</a> (1) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/deprecated/'>deprecated</a> (1) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/devops/'>devops</a> (1) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/docker/'>docker</a> (15) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/elasticsearch/'>elasticsearch</a> (3) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/es/'>es</a> (1) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/flume/'>flume</a> (1) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/ganglia/'>ganglia</a> (5) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/git/'>git</a> (3) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/hadoop/'>hadoop</a> (44) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/hbase/'>hbase</a> (1) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/hive/'>hive</a> (8) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/hole/'>hole</a> (1) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/java/'>java</a> (13) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/jekyll/'>jekyll</a> (8) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/jenkins/'>jenkins</a> (1) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/k8s/'>k8s</a> (9) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/kafka/'>kafka</a> (3) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/kubeadm/'>kubeadm</a> (2) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/logstash/'>logstash</a> (1) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/map/'>map</a> (2) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/nginx/'>nginx</a> (3) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/puppet/'>puppet</a> (11) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/recommend/'>recommend</a> (20) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/redis/'>redis</a> (7) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/scala/'>scala</a> (4) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/shell/'>shell</a> (4) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/spark/'>spark</a> (12) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/staf/'>staf</a> (1) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/tachyon/'>tachyon</a> (3) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/tez/'>tez</a> (2) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/tools/'>tools</a> (66) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/topics/'>topics</a> (2) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/vagrant/'>vagrant</a> (1) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/zookeeper/'>zookeeper</a> (1) 
		</li>
		
		
		<li style="clear:both; width: 1px; margin: 0; padding: 0;"></li>
		<li class="category"><a href="/blog/archives">All categories</a> (213)</li>
	</ul>
	
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/winse">@winse</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'winse',
            count: 4,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>

<section>
  <h1>Softs, I'm using</h1>
  <ul>
    <li class="post">
		<a href="http://hadoop.apache.org/releases.html">hadoop-2.6.3</a>
	</li>
	<li class="post">
		<a href="https://issues.apache.org/jira/browse/HBASE/?selectedTab=com.atlassian.jira.jira-projects-plugin:changelog-panel">hbase-0.96.0</a>
	</li>
	<li class="post">
		<a href="https://hive.apache.org/downloads.html">hive-1.2.1</a>
	</li>
	<li class="post">
		<a href="https://issues.apache.org/jira/browse/TEZ/?selectedTab=com.atlassian.jira.jira-projects-plugin:summary-panel">tez-0.7.0</a>
    </li>
  </ul>
</section>

  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2019 - Winse Liu -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
  <script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1253461959'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "v1.cnzz.com/z_stat.php%3Fid%3D1253461959%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script>
</p>

</footer>
  


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
<script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>

<script>

var time=location.pathname.substring(6).substring(0,11);
var eName=location.pathname.substring(17);
var gitalk = new Gitalk({
  clientID: 'c14f68eac6330d15d984',
  clientSecret: '73b7c1fffa98e299ff0cdd332821201933858e6e',
  repo: 'winse.github.com',
  owner: 'winse',
  admin: ['winse'],
  id: eName,
  labels: ['Gitalk', time],
  body: "http://winseliu.com" + location.pathname,
  createIssueManually: true,
  
  // facebook-like distraction free mode
  distractionFreeMode: false
})

gitalk.render('gitalk-container')

</script>



<script>
/*
$.ajax({
  type: "POST",
  url: "http://log.winseliu.com:20000",
  data: JSON.stringify({
    title: document.title,
    location: JSON.stringify(location),
    referrer: document.referrer,
    userAgent: navigator.userAgent
  }),
  contentType: "application/json; charset=utf-8",
  dataType: "json"
});
*/
</script>









</body>
</html>
