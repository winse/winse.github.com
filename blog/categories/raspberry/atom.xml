<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: #raspberry | Winse Blog]]></title>
  <link href="http://winse.github.io/blog/categories/raspberry/atom.xml" rel="self"/>
  <link href="http://winse.github.io/"/>
  <updated>2024-01-16T12:59:42+08:00</updated>
  <id>http://winse.github.io/</id>
  <author>
    <name><![CDATA[Winse Liu]]></name>
    <email><![CDATA[winseliu@foxmail.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Reinstall Redmine on Raspberry2]]></title>
    <link href="http://winse.github.io/blog/2023/11/18/reinstall-redmine-on-respberry2/"/>
    <updated>2023-11-18T09:55:24+08:00</updated>
    <id>http://winse.github.io/blog/2023/11/18/reinstall-redmine-on-respberry2</id>
    <content type="html"><![CDATA[<p>å¹´å‰æŠŠæ ‘è“æ´¾æ‹¯æ•‘äº†å›æ¥ <a href="https://winse.github.io/blog/2023/03/25/reinstall-raspberry2/">é‡æ–°æŠ˜è…¾raspberry2</a> ç”±äºå¹´åº•äº†æ–°å¹³å°æ…¢æ…¢æˆå‹ï¼Œå¯èƒ½ä¼šç”¨åˆ°BUGè·Ÿè¸ªï¼Œæƒ³ç€ä¸èƒ½æµªè´¹ï¼Œèƒ½ç”¨åˆ™ç”¨èƒ½çœè€…çœçš„åŸåˆ™ï¼ŒæŠŠè€å¤è‘£ç”¨èµ·æ¥ã€‚</p>

<p>åŸæ¥åœ¨æ ‘è“æ´¾2ä¸Šå®‰è£…è¿‡redmineçš„ <a href="https://winse.github.io/blog/2020/05/11/redmine-on-arm-pi/">åœ¨æ ‘è“æ´¾ä¸Šéƒ¨ç½²redmine</a> ä¸è¿‡æœ‰äº›å¹´å¤´äº†ï¼Œä¸€å¼€å§‹æƒ³ç€åˆ»èˆŸæ±‚å‰‘çš„æ–¹æ³•èƒ½å‚ç…§ç»ä¸æ­»è„‘ç»†èƒçš„åŸåˆ™ï¼Œç°å®åˆ™æ˜¯å››å¤„ç¢°å£ã€‚</p>

<p>è¿™ä¸ªé…ç½®ç¡®å®æœ‰ç‚¹æ‹¿ä¸å‡ºæ‰‹äº†ã€‚</p>

<pre><code>top - 14:01:28 up 1 min,  1 user,  load average: 1.87, 0.63, 0.22
Tasks: 130 total,   1 running, 129 sleeping,   0 stopped,   0 zombie
%Cpu0  :  0.0 us,  0.0 sy,  0.0 ni, 99.7 id,  0.0 wa,  0.0 hi,  0.3 si,  0.0 st
%Cpu1  :  0.0 us,  0.0 sy,  0.0 ni,100.0 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
%Cpu2  :  0.3 us,  0.3 sy,  0.0 ni, 99.3 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
%Cpu3  :  0.0 us,  0.0 sy,  0.0 ni,100.0 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
MiB Mem :    922.0 total,    643.8 free,     79.7 used,    198.5 buff/cache
MiB Swap:    100.0 total,    100.0 free,      0.0 used.    788.3 avail Mem 
</code></pre>

<h2>å‚ç…§å­¦ä¹ </h2>

<p>åŸæ¥è€ç‰ˆæœ¬å®‰è£…çš„æ˜¯ postgres9.6 + redmine3.4 çš„ç‰ˆæœ¬ï¼Œ2020å¹´çš„æ—¶åˆ»è¿™äº›ç‰ˆæœ¬éƒ½è¿˜å½“æ—¶çƒ­ä¹ç€çš„ï¼Œå½“æ—¶ä¹Ÿç”¨ä¸Šäº†åŸæ¥çš„æ•°æ®ä»¥åŠæ’ä»¶éƒ½è¿˜æƒ³å’ŒåŸæ¥ä¸€æ ·ä½¿ç”¨ã€‚ç°åœ¨å†æ¥å®‰è£…è¿™ä¸ªç‰ˆæœ¬å·²ç»æ—¶è¿‡å¢ƒè¿äº†ï¼Œå®˜æ–¹çš„postgres9.6å·²ç»å½’æ¡£äº†ã€‚</p>

<p>1ã€ubuntu-14å®˜æ–¹ä¸æ”¯æŒä»¥åï¼Œpostgresqlå®˜ç½‘å’Œå„ç§é•œåƒçš„ç½‘ç«™çš„éƒ½æ²¡æœ‰è¯¥ç‰ˆæœ¬çš„9.6çš„æºç ã€‚</p>

<p>2ã€æ‰¾ä¸€ä¸ªç›¸å¯¹æ—§ä¸€äº›çš„æ“ä½œç³»ç»Ÿubuntu-20(focal)æ”¯æŒpostgres9.6çš„ï¼Œç„¶åè¯•ç€æŒ‰åŸæ¥æºç ç¼–è¯‘çš„æ–¹å¼æ‰“åŒ…postgres-9.6 armv7çš„ç‰ˆæœ¬ã€‚</p>

<p>å®‰è£…ç¼–è¯‘çš„ä¾èµ–ï¼Œç¼–è¯‘æ‰“åŒ…é™¤äº†æ…¢ä¸€ç‚¹ï¼ˆä¸€ä¸ªé€šå®µï¼‰çœ‹èµ·æ¥éƒ½é€šè¿‡äº†ï¼ˆä¸­é—´è¿‡ç¨‹æ¼«é•¿æœ‰å†—é•¿æ²¡ç»†ç»†çš„çœ‹ï¼‰ã€‚</p>

<p>æ‰“åŒ…å¥½debï¼Œç­‰å®‰è£…çš„æ—¶åˆ»ï¼Œå°±å‡ºç°ä¾èµ–ä¸å¯¹æ‰¾ä¸åˆ°äº†ã€‚é½äº†æ€ªäº†ï¼Œç¼–è¯‘éƒ½â€œé€šè¿‡â€äº†ï¼Œå®‰è£…å°±ä¸è¡Œï¼Œperlç¼ºçš„ä¾èµ–åˆæ‰¾ä¸åˆ°å¯¹åº”çš„ç‰ˆæœ¬ã€‚åˆé‡æ–°å¼„äº†ä¸¤éï¼ï¼ï¼è¿™ä¸ªæ—¶é—´å’Œç²¾ç¥æ¶ˆè€—ï¼Œæˆ‘è¿™èº«å­éª¨å·²ç»è·Ÿå®ƒè€—ä¸èµ·äº†ã€‚æ”¹å˜æ–¹å¼ã€‚</p>

<p>3ã€docker postgresæœ‰é•œåƒä¹Ÿæ˜¯11ä¹‹åçš„ï¼Œæ›´åˆ«è¯´æ˜¯armv7çš„9.6äº†ã€‚</p>

<p>4ã€ç»è¿‡å‡ å¤©çš„æŠ˜è…¾ï¼Œç‹ ç‹ å¿ƒå’¬å’¬ç‰™ï¼Œæ¢æœ€æ–°ç‰ˆæœ¬ã€‚åªèƒ½æœ€åå†è¿ç§»æ•°æ®ï¼Œè¿™æ ·ä¼°è®¡å¿«ä¸€ç‚¹ã€‚</p>

<h2>å®è·µä¸æ”¹è¿›</h2>

<p>ç¡®å®šä½¿ç”¨æœ€æ–°çš„ç‰ˆæœ¬åï¼Œæ‰¾åˆ° <a href="https://github.com/sameersbn/docker-redmine/releases/tag/5.1.0">sameersbn/redmine:5.10</a> ç„¶åç”¨çš„æ˜¯postgres-15æ•°æ®åº“ã€‚åœ¨ä¸Šé¢æŠ˜è…¾çš„è¿‡ç¨‹ä¸­ï¼Œå·²ç»æ‰¾è¿‡armv7çš„postgresæ•°æ®åº“äº†ï¼Œè¿™æ¬¡ç›´æ¥åŸºäºå®˜æ–¹armv7-postgres-15ä½œä¸ºåŸºç¡€æ¥æ„å»ºæˆ‘è¿™ä¸ªåº”ç”¨æ•°æ®åº“çš„é•œåƒã€‚</p>

<h3>postgres</h3>

<p>ç¼–è¯‘ armv7-postgres15 é™¤äº†åœ¨LANGä¸Šæœ‰ä¸€äº›äº›é”™ä¹‹å¤–ï¼Œå…¶ä»–éƒ½æ˜¯æŒºé¡ºåˆ©çš„ã€‚ä¿®æ”¹çš„å†…å®¹ä»¥åŠDockerfileå†…å®¹å¦‚ä¸‹ï¼š</p>

<pre><code>root@raspberrypi:/opt/docker-postgresql-15-20230628# vim runtime/functions 

300         if [[ -z $(psql -U ${PG_USER} -Atc "SELECT 1 FROM pg_catalog.pg_user WHERE usename = '${DB_USER}'";) ]]; then
301           #psql -U ${PG_USER} -c "CREATE ROLE \"${DB_USER}\" with LOGIN CREATEDB PASSWORD '${DB_PASS}';" &gt;/dev/null
302           psql -U ${PG_USER} -c "CREATE ROLE \"${DB_USER}\" SUPERUSER CREATEDB CREATEROLE LOGIN PASSWORD '${DB_PASS}';" &gt;/dev/null
303         fi

root@raspberrypi:/opt/docker-postgresql-15-20230628# cat Dockerfile 
FROM arm32v7/postgres:15-bullseye

LABEL maintainer="sameer@damagehead.com"

ENV LC_ALL="en_US.UTF-8" \
    LC_CTYPE="en_US.UTF-8"

ENV PG_APP_HOME="/etc/docker-postgresql" \
    PG_VERSION=15 \
    PG_USER=postgres \
    PG_HOME=/var/lib/postgresql \
    PG_RUNDIR=/run/postgresql \
    PG_LOGDIR=/var/log/postgresql \
    PG_CERTDIR=/etc/postgresql/certs

ENV PG_BINDIR=/usr/lib/postgresql/${PG_VERSION}/bin \
    PG_DATADIR=${PG_HOME}/${PG_VERSION}/main

RUN echo "LC_ALL=en_US.UTF-8" &gt;&gt; /etc/environment
RUN echo "en_US.UTF-8 UTF-8" &gt;&gt; /etc/locale.gen
RUN echo "LANG=en_US.UTF-8" &gt; /etc/locale.conf

RUN sed -i 's@http://deb.debian.org@http://mirrors.aliyun.com@g' /etc/apt/sources.list \
 &amp;&amp; apt-get update \
 &amp;&amp; DEBIAN_FRONTEND=noninteractive apt-get install -y acl sudo locales \
 &amp;&amp; update-locale LANG=C.UTF-8 LC_MESSAGES=POSIX \
 &amp;&amp; locale-gen en_US.UTF-8 \
 &amp;&amp; DEBIAN_FRONTEND=noninteractive dpkg-reconfigure locales \
 &amp;&amp; mkdir -p /etc/postgresql/${PG_VERSION}/main \
 &amp;&amp; ln -sf ${PG_DATADIR}/postgresql.conf /etc/postgresql/${PG_VERSION}/main/postgresql.conf \
 &amp;&amp; ln -sf ${PG_DATADIR}/pg_hba.conf /etc/postgresql/${PG_VERSION}/main/pg_hba.conf \
 &amp;&amp; ln -sf ${PG_DATADIR}/pg_ident.conf /etc/postgresql/${PG_VERSION}/main/pg_ident.conf \
 &amp;&amp; rm -rf ${PG_HOME} \
 &amp;&amp; rm -rf /var/lib/apt/lists/*

COPY runtime/ ${PG_APP_HOME}/

COPY entrypoint.sh /sbin/entrypoint.sh

RUN chmod 755 /sbin/entrypoint.sh

EXPOSE 5432/tcp

WORKDIR ${PG_HOME}

ENTRYPOINT ["/sbin/entrypoint.sh"]
</code></pre>

<h3>redmine</h3>

<p>å†ç¼–è¯‘redmineï¼Œè¿™ä¸ªæ„å»ºé•œåƒçš„æ—¶åˆ»ä¸‹è½½ä¾èµ–å¤ªæ…¢äº†ï¼Œå¯èƒ½æ˜¯å®‰è£…çš„è¿™äº›è½¯ä»¶å¯¹æ ‘è“æ´¾2è¦æ±‚æœ‰ç‚¹è¿‡é«˜äº†ï¼Œå¤šæ¬¡æ²¡å“åº”è¿œç¨‹æ–­æ‰å¯¼è‡´è¦é‡æ–°å¼„ã€‚ç”¨äº†screenä¹Ÿæ²¡æœ‰æ•ˆæœã€‚</p>

<ol>
<li>å¼€ä¸€ä¸ªscreençš„çª—å£ï¼Œå†å¯åŠ¨ä¸€ä¸ªå®¹å™¨ã€‚</li>
<li>åœ¨å®¹å™¨é‡Œé¢æ‰‹åŠ¨å®‰è£…å…ˆæŠŠä¾èµ–æå®šåï¼Œæœ€åæŠŠå®¹å™¨æäº¤ä½œä¸ºä¸€ä¸ªé•œåƒã€‚</li>
<li>åœ¨è¿™ä¸ªé•œåƒçš„åŸºç¡€ä¸Šå†æ„å»ºredmineåº”ç”¨çš„é•œåƒã€‚</li>
</ol>


<pre><code>root@raspberrypi:~/docker-redmine-5.1.0# docker run -ti arm32v7/ruby:2.7.8-bullseye bash 

root@e76bef6f1a9c:/# 
wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | apt-key add - 
echo 'deb http://apt.postgresql.org/pub/repos/apt/ bullseye-pgdg main' &gt; /etc/apt/sources.list.d/pgdg.list 

sed -i 's@http://deb.debian.org@https://mirrors.aliyun.com@g' /etc/apt/sources.list &amp;&amp; apt-get update
#sed -i 's@http://deb.debian.org@https://mirrors.ustc.edu.cn@g' /etc/apt/sources.list &amp;&amp; apt-get update


# å»æ‰mysqlå’Œrubyä¾èµ–
apt-get install --no-install-recommends -y \
      supervisor logrotate nginx postgresql-client ca-certificates sudo tzdata \
      imagemagick subversion git cvs bzr mercurial darcs rsync locales openssh-client \
      gcc g++ make patch pkg-config gettext-base libc6-dev zlib1g-dev libxml2-dev \
      libpq5 libyaml-0-2 libcurl4 libssl1.1 uuid-dev xz-utils \
      libxslt1.1 libffi7 zlib1g gsfonts vim-tiny ghostscript sqlite3 libsqlite3-dev 

update-locale LANG=C.UTF-8 LC_MESSAGES=POSIX

gem install --no-document bundler


# ä¿®æ”¹redmineçš„å®‰è£…è„šæœ¬
# @see https://mirrors.tuna.tsinghua.edu.cn/help/rubygems/
root@raspberrypi:/opt/docker-redmine-5.1.0# vi assets/build/install.sh 
  7 BUILD_DEPENDENCIES="wget libcurl4-openssl-dev libssl-dev libmagickcore-dev libmagickwand-dev \
  8                     libpq-dev libxslt1-dev libffi-dev libyaml-dev \
  9                     libsqlite3-dev"

 41   exec_as_redmine wget --no-check-certificate "http://www.redmine.org/releases/redmine-${REDMINE_VERSION}.tar.gz" -O /tmp/redmine-${RE    DMINE_VERSION}.tar.gz

104 exec_as_redmine gem sources --add https://mirrors.tuna.tsinghua.edu.cn/rubygems/ --remove https://rubygems.org/
105 exec_as_redmine bundle config mirror.https://rubygems.org https://mirrors.tuna.tsinghua.edu.cn/rubygems
106 exec_as_redmine bundle install -j$(nproc)

# æ‹·è´åˆ°å®¹å™¨å®‰è£…redmine
root@raspberrypi:~/docker-redmine-5.1.0# docker cp assets/build/install.sh  e76bef6f1a9c:/opt/


root@e76bef6f1a9c:/# cd /opt/
export RUBY_VERSION=2.7 \
   REDMINE_VERSION=5.1.0 \
   REDMINE_USER="redmine" \
   REDMINE_HOME="/home/redmine" \
   REDMINE_LOG_DIR="/var/log/redmine" \
   REDMINE_ASSETS_DIR="/etc/docker-redmine" \
   RAILS_ENV=production

export REDMINE_INSTALL_DIR="${REDMINE_HOME}/redmine" \
   REDMINE_DATA_DIR="${REDMINE_HOME}/data" \
   REDMINE_BUILD_ASSETS_DIR="${REDMINE_ASSETS_DIR}/build" \
   REDMINE_RUNTIME_ASSETS_DIR="${REDMINE_ASSETS_DIR}/runtime"

root@e76bef6f1a9c:/# bash -x install.sh


# å®‰è£…å¥½åï¼Œåœæ‰å®¹å™¨æäº¤ä½œä¸ºé•œåƒ
root@raspberrypi:~/docker-redmine-5.1.0# docker stop e76bef6f1a9c
root@raspberrypi:~/docker-redmine-5.1.0# docker commit e76bef6f1a9c arm32v7/ruby:2.7.8-bullseye-redmine-base

root@raspberrypi:/opt/docker-redmine-5.1.0# cat Dockerfile 
#FROM arm32v7/ruby:2.7.8-bullseye AS add-apt-repositories
#
#RUN sed -i 's@http://deb.debian.org@https://mirrors.aliyun.com@g' /etc/apt/sources.list \
# &amp;&amp; apt-get update \
# &amp;&amp; DEBIAN_FRONTEND=noninteractive apt-get install -y wget gnupg2 \
# &amp;&amp; apt-key adv --keyserver keyserver.ubuntu.com --recv E1DD270288B4E6030699E45FA1715D88E1DF1F24 \
# &amp;&amp; apt-key adv --keyserver keyserver.ubuntu.com --recv 80F70E11F0F0D5F10CB20E62F5DA5F09C3173AA6 \
# &amp;&amp; apt-key adv --keyserver keyserver.ubuntu.com --recv 8B3981E7A6852F782CC4951600A6F0A3C300EE8C \
# &amp;&amp; wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | apt-key add - \
# &amp;&amp; echo 'deb http://apt.postgresql.org/pub/repos/apt/ bullseye-pgdg main' &gt; /etc/apt/sources.list.d/pgdg.list 

FROM arm32v7/ruby:2.7.8-bullseye-redmine-base

LABEL maintainer="sameer@damagehead.com"

ENV RUBY_VERSION=2.7 \
    REDMINE_VERSION=5.1.0 \
    REDMINE_USER="redmine" \
    REDMINE_HOME="/home/redmine" \
    REDMINE_LOG_DIR="/var/log/redmine" \
    REDMINE_ASSETS_DIR="/etc/docker-redmine" \
    RAILS_ENV=production

ENV REDMINE_INSTALL_DIR="${REDMINE_HOME}/redmine" \
    REDMINE_DATA_DIR="${REDMINE_HOME}/data" \
    REDMINE_BUILD_ASSETS_DIR="${REDMINE_ASSETS_DIR}/build" \
    REDMINE_RUNTIME_ASSETS_DIR="${REDMINE_ASSETS_DIR}/runtime"

#COPY --from=add-apt-repositories /etc/apt/trusted.gpg /etc/apt/trusted.gpg
#
#COPY --from=add-apt-repositories /etc/apt/sources.list /etc/apt/sources.list
#COPY --from=add-apt-repositories /etc/apt/sources.list.d/pgdg.list /etc/apt/sources.list.d/
#
#RUN sed -i 's@http://deb.debian.org@https://mirrors.aliyun.com@g' /etc/apt/sources.list \
# &amp;&amp; apt-get update \
# &amp;&amp; DEBIAN_FRONTEND=noninteractive apt-get install --no-install-recommends -y \
#      supervisor logrotate nginx postgresql-client ca-certificates sudo tzdata \
#      imagemagick subversion git cvs rsync locales openssh-client \
#      gcc g++ make patch pkg-config gettext-base libxml2-dev \
#      python3-pil python3-scour libimage-exiftool-perl ffmpegthumbnailer \
#      libpq5 libyaml-0-2 libcurl4 libssl1.1 uuid-dev xz-utils \
#      libxslt1.1 vim-tiny sqlite3 libsqlite3-dev \
# &amp;&amp; update-locale LANG=C.UTF-8 LC_MESSAGES=POSIX \
# &amp;&amp; gem install --no-document bundler \
# &amp;&amp; rm -rf /var/lib/apt/lists/*

#COPY assets/build/ ${REDMINE_BUILD_ASSETS_DIR}/
#
#RUN bash ${REDMINE_BUILD_ASSETS_DIR}/install.sh

COPY assets/runtime/ ${REDMINE_RUNTIME_ASSETS_DIR}/

COPY assets/tools/ /usr/bin/

COPY entrypoint.sh /sbin/entrypoint.sh

COPY VERSION /VERSION

RUN chmod 755 /sbin/entrypoint.sh \
 &amp;&amp; sed -i '/session    required     pam_loginuid.so/c\#session    required   pam_loginuid.so' /etc/pam.d/cron

EXPOSE 80/tcp 443/tcp

WORKDIR ${REDMINE_INSTALL_DIR}

ENTRYPOINT ["/sbin/entrypoint.sh"]

CMD ["app:start"]

root@raspberrypi:/opt/docker-redmine-5.1.0# make build

root@raspberrypi:/opt/docker-redmine-5.1.0# docker images 
REPOSITORY             TAG                           IMAGE ID       CREATED        SIZE
sameersbn/postgresql   15-20230628                   cedece0ace69   1 hours ago   324MB
sameersbn/redmine      latest                        f1ab03480a1e   1 hours ago   953MB
arm32v7/ruby           2.7.8-bullseye-redmine-base   3ee3b95c4c85   1 hours ago   953MB
arm32v7/postgres       15-bullseye                   c8e0db9da7af   8 days ago     314MB
arm32v7/ruby           2.7.8-bullseye                8100b7e215f8   6 months ago   667MB
</code></pre>

<h3>redmine-3.4çš„æ•°æ®è¿ç§»åˆ°redmine-5.1</h3>

<pre><code>root@1cd14c92899a:/var/lib/postgresql# docker ps 
CONTAINER ID   IMAGE                        COMMAND                  CREATED        STATUS      PORTS                                 NAMES
458df7209e1b   sameersbn/redmine:3.4.6      "/sbin/entrypoint.shâ€¦"   6 months ago   Up 2 days   443/tcp, 172.21.37.204:8081-&gt;80/tcp   redmine_redmine_1
884a04c9f985   sameersbn/postgresql:9.6-2   "/sbin/entrypoint.sh"    2 years ago    Up 2 days   5432/tcp                              redmine_postgresql_1

root@1cd14c92899a:/var/lib/postgresql# pg_dump -U postgres -Cc -d redmine_production &gt;redmine.dump 


# æŠŠredmine-5.1çš„ä¹Ÿå¯¼å‡ºæ¥ä¸€ä»½å¯¹ç…§ï¼ŒæŠŠåº“é‡Œå·²æœ‰çš„æ•°æ®ä¿ç•™ï¼Œåœ¨æ—§sqlé‡Œé¢å»æ‰5å­˜åœ¨çš„è®°å½•ï¼ˆä¸ç„¶å¯¼å…¥æŠ¥é€æ¸å†²çªå¯¼å…¥å¤±è´¥çš„ï¼‰ã€‚

# é…ç½®æ•°æ®å¯¼å…¥ï¼Œå¢åŠ æ—§ç‰ˆæœ¬éœ€è¦çš„å­—æ®µã€‚
ALTER TABLE projects
  ADD COLUMN customers_deploys_notifications_emails character varying,
  ADD COLUMN deploys_notifications_emails character varying,
  ADD COLUMN abbreviation character varying
  ;

ALTER TABLE trackers
  ADD COLUMN is_in_chlog boolean DEFAULT false NOT NULL
  ;

ALTER TABLE users
  ADD COLUMN identity_url character varying
  ;

åˆ æ‰ç©ºçš„è¡¨å’Œæ•°æ®è¿˜åŸéƒ¨åˆ†ã€‚æŠŠéœ€è¦çš„ï¼Œä¿ç•™æœ‰æ•°æ®çš„è¡¨ã€‚
</code></pre>

<p>æ•°æ®åº“å¤‡ä»½å¤„ç†ä¸å¥½è¦é‡æ–°åšçš„è¯ï¼Œè¦åˆ é™¤å¯¹åº”çš„æ–‡ä»¶å†…å®¹ï¼Œç„¶åé‡å¯å³å¯ã€‚</p>

<pre><code>root@raspberrypi:~/docker-redmine-5.1.0# docker-compose down 
root@raspberrypi:~/docker-redmine-5.1.0# rm -rf /srv/docker/redmine

root@raspberrypi:~/docker-redmine-5.1.0# docker-compose up 
</code></pre>

<h3>å›¾ç‰‡é™„ä»¶è§£å‹æ–‡ä»¶</h3>

<pre><code>root@raspberrypi:/# tar zxvf srv-docker-redmine.tar.gz /srv/docker/redmine/redmine/files 
</code></pre>

<h3>redmineæ’ä»¶</h3>

<pre><code>root@raspberrypi:/srv/docker/redmine/redmine/plugins# unzip clipboard_image_paste-1.13.zip 
root@raspberrypi:/srv/docker/redmine/redmine/plugins# mv clipboard_image_paste-1.13 clipboard_image_paste
root@raspberrypi:/srv/docker/redmine/redmine/plugins# rm clipboard_image_paste-1.13.zip 
root@raspberrypi:~/docker-redmine-5.1.0# docker-compose up -d 


root@raspberrypi:/srv/docker/redmine/redmine/plugins# less clipboard_image_paste/init.rb
 30 # @see https://github.com/paginagmbh/redmine_lightbox2/blob/master/init.rb
 31 if Rails::VERSION::MAJOR &gt;= 5
 32   ActiveSupport::Reloader.to_prepare do
 33     require_dependency 'clipboard_image_paste/hooks'
 34     require_dependency 'clipboard_image_paste/attachment_patch'
 35   end 
 36 elsif Rails::VERSION::MAJOR &gt;= 3

# @see https://github.com/peclik/clipboard_image_paste/pull/91/commits/570acebeb5dded80f24e7b01ffddbec09c9eccb6
root@raspberrypi:/srv/docker/redmine/redmine/plugins# less clipboard_image_paste/lib/clipboard_image_paste/attachment_patch.rb
 25       #alias_method_chain :save_attachments, :pasted_images
 26       alias_method :save_attachmenets_without_pasted_images, :save_attachments
 27       alias_method :save_attachments, :save_attachments_with_pasted_images

root@raspberrypi:~/docker-redmine-5.1.0# docker-compose restart redmine 


lightbox2
https://github.com/theforeman/redmine_lightbox2/commit/9c8b41f6893d4a92bb30923684bad7a1b40fdb62

apijs
https://www.luigifab.fr/en/redmine/apijs.php

pi@raspberrypi:/srv/docker/redmine/redmine-logs $ docker logs -n 50 1e966fec7f9b
</code></pre>

<h3>docker-compose</h3>

<pre><code># @see https://github.com/docker/compose/releases/

root@raspberrypi:/usr/local/bin# ln -s docker-compose-linux-armv7 docker-compose
</code></pre>

<h2>åæ€ä¸æ·±æ€</h2>

<p>ææç®€å•çš„æ–‡å­—è¿˜è¡Œï¼Œå›¾ç‰‡å¤§äº†è¦è®¡ç®—çš„è¯å°±å¡äº†ï¼ï¼ï¼è¿˜æ˜¯ç”¨4å§ï¼ï¼ï¼</p>

<p>pi4ä¸Šå®‰è£…ç®€å•å¤šäº†ï¼Œç›´æ¥åœ¨æœºå™¨ä¸Šç¼–è¯‘ä¸€ä¸‹é•œåƒå°±å¯ä»¥äº†ï¼š</p>

<ol>
<li>postgresçš„ç”¨æˆ·ä¿®æ”¹ä¸‹æƒé™;</li>
<li>redmineå»æ‰mysqlçš„ä¾èµ–ã€‚</li>
</ol>


<pre><code>
#@ pi2
root@1cd14c92899a:/var/lib/postgresql# pg_dump -U redmine -Cc -d redmine_production &gt;redmine.dump        

#@ pi4
root@d744a148ea59:/var/lib/postgresql# psql -U redmine -d postgres -f redmine.dump 

# srvçš„è¯ï¼Œåªéœ€è¦å¤åˆ¶redmineä¸‹çš„filesã€pluginsã€‚
</code></pre>

<p>&ndash;END</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[æ ‘è“æ´¾4å®‰è£…Clash]]></title>
    <link href="http://winse.github.io/blog/2023/03/26/clash-on-raspberry4/"/>
    <updated>2023-03-26T00:31:01+08:00</updated>
    <id>http://winse.github.io/blog/2023/03/26/clash-on-raspberry4</id>
    <content type="html"><![CDATA[<h2>å®‰è£…Clash</h2>

<p>å‚è€ƒï¼š<a href="https://mraddict.top/posts/clash-on-rpi/">https://mraddict.top/posts/clash-on-rpi/</a></p>

<pre><code>root@ubuntu:~# arch

# ä¸‹è½½ä¸Šä¼ clash
root@ubuntu:~# mv clash-linux-arm64 /usr/local/bin/

root@ubuntu:~# cd /usr/local/bin/
root@ubuntu:/usr/local/bin# chmod +x clash-linux-arm64 
root@ubuntu:/usr/local/bin# ln -s clash-linux-arm64 clash
root@ubuntu:/usr/local/bin# ls clash*
clash  clash-linux-arm64
root@ubuntu:/usr/local/bin# ls -l clash*
lrwxrwxrwx 1 root root      17 Mar 24 21:43 clash -&gt; clash-linux-arm64
-rwxr-xr-x 1 root root 8978432 Jan 29 18:59 clash-linux-arm64


# å¯åŠ¨ä¸€æ¬¡ï¼Œä¼šç”Ÿæˆé…ç½®å’Œä¸‹è½½Country.mmdbæ–‡ä»¶ï¼š
root@ubuntu:/usr/local/bin# clash
INFO[0000] Can't find config, create a initial config file 
INFO[0000] Can't find MMDB, start download              
INFO[0344] Mixed(http+socks) proxy listening at: 127.0.0.1:7890 

# clash-ui
root@ubuntu:/usr/local/bin# cd ~/.config/clash
root@ubuntu:~/.config/clash# git clone --branch gh-pages https://github.com/Dreamacro/clash-dashboard.git    
Cloning into 'clash-dashboard'...
remote: Enumerating objects: 3951, done.
remote: Counting objects: 100% (232/232), done.
remote: Compressing objects: 100% (172/172), done.
remote: Total 3951 (delta 79), reused 189 (delta 56), pack-reused 3719
Receiving objects: 100% (3951/3951), 4.87 MiB | 21.00 KiB/s, done.
Resolving deltas: 100% (2240/2240), done.
</code></pre>

<p>é…ç½®ï¼š</p>

<pre><code>## é…ç½®æ–‡ä»¶ï¼šhttps://github.com/Dreamacro/clash/wiki/Configuration#introduction
## ä¸‹è½½æœåŠ¡æä¾›çš„è®¢é˜…åœ°å€å†…å®¹ï¼Œä¿å­˜åˆ°æ–‡ä»¶ã€‚

root@ubuntu:~/.config/clash# ln -s Clash_1679667989.yaml config.yaml
root@ubuntu:~/.config/clash# vi config.yaml 
  11 mode: rule
  12 log-level: debug
  13 external-ui: clash-dashboard
  14 external-controller: '0.0.0.0:9090'


root@ubuntu:~/.config/clash# clash
INFO[0000] Start initial compatible provider ğŸ¬å“”å“©å“”å“©      
INFO[0000] Start initial compatible provider âš“ï¸å…¶ä»–æµé‡     
INFO[0000] Start initial compatible provider âœˆï¸Telegram 
INFO[0000] Start initial compatible provider ğŸ¬Netflix   
INFO[0000] Start initial compatible provider ğŸè‹¹æœæœåŠ¡      
INFO[0000] Start initial compatible provider ğŸ¬Youtube   
INFO[0000] Start initial compatible provider ğŸ¬å›½å¤–åª’ä½“      
INFO[0000] Start initial compatible provider ğŸš€ç›´æ¥è¿æ¥      
INFO[0000] Start initial compatible provider ğŸ”°å›½å¤–æµé‡      
INFO[0000] Start initial compatible provider â“‚ï¸ å¾®è½¯æœåŠ¡    
INFO[0000] HTTP proxy listening at: 127.0.0.1:7890      
INFO[0000] RESTful API listening at: [::]:9090          
INFO[0000] SOCKS proxy listening at: 127.0.0.1:7891     
INFO[0000] Redirect proxy listening at: 127.0.0.1:7892 


# æ‰“å¼€ http://192.168.123.41:9090/ui/#/settings é¡µé¢åï¼Œæ·»åŠ ä¸€ä¸‹æœåŠ¡å™¨çš„ipåœ°å€ï¼Œå°±å¯ä»¥è®¿é—®äº†ã€‚
</code></pre>

<h2>å®‰è£…conda</h2>

<pre><code># ç”¨ä»£ç†ä¸‹è½½åé¢çš„æ•°æ®
root@ubuntu:~# export http_proxy="http://127.0.0.1:7890"
root@ubuntu:~# export https_proxy="http://127.0.0.1:7890"

root@ubuntu:~# wget https://github.com/conda-forge/miniforge/releases/latest/download/Miniforge3-Linux-aarch64.sh     
--2023-03-24 23:16:35--  https://github.com/conda-forge/miniforge/releases/latest/download/Miniforge3-Linux-aarch64.sh
Connecting to 127.0.0.1:7890... connected.
Proxy request sent, awaiting response... 302 Found
Location: https://github.com/conda-forge/miniforge/releases/download/22.11.1-4/Miniforge3-Linux-aarch64.sh [following]
--2023-03-24 23:16:35--  https://github.com/conda-forge/miniforge/releases/download/22.11.1-4/Miniforge3-Linux-aarch64.sh
Reusing existing connection to github.com:443.
Proxy request sent, awaiting response... 302 Found
Location: https://objects.githubusercontent.com/github-production-release-asset-2e65be/221584272/97169057-ca90-4fce-873e-a7d6d2e1db90?X-Amz-Algorithm=AWS4-HMAC-SHA256&amp;X-Amz-Credential=AKIAIWNJYAX4CSVEH53A%2F20230324%2Fus-east-1%2Fs3%2Faws4_request&amp;X-Amz-Date=20230324T151635Z&amp;X-Amz-Expires=300&amp;X-Amz-Signature=c46561816462b1e2bcd82d8b99f8ce840f4ff9b6214fda083828079783d43f0f&amp;X-Amz-SignedHeaders=host&amp;actor_id=0&amp;key_id=0&amp;repo_id=221584272&amp;response-content-disposition=attachment%3B%20filename%3DMiniforge3-Linux-aarch64.sh&amp;response-content-type=application%2Foctet-stream [following]
--2023-03-24 23:16:36--  https://objects.githubusercontent.com/github-production-release-asset-2e65be/221584272/97169057-ca90-4fce-873e-a7d6d2e1db90?X-Amz-Algorithm=AWS4-HMAC-SHA256&amp;X-Amz-Credential=AKIAIWNJYAX4CSVEH53A%2F20230324%2Fus-east-1%2Fs3%2Faws4_request&amp;X-Amz-Date=20230324T151635Z&amp;X-Amz-Expires=300&amp;X-Amz-Signature=c46561816462b1e2bcd82d8b99f8ce840f4ff9b6214fda083828079783d43f0f&amp;X-Amz-SignedHeaders=host&amp;actor_id=0&amp;key_id=0&amp;repo_id=221584272&amp;response-content-disposition=attachment%3B%20filename%3DMiniforge3-Linux-aarch64.sh&amp;response-content-type=application%2Foctet-stream
Connecting to 127.0.0.1:7890... connected.
Proxy request sent, awaiting response... 200 OK
Length: 53550114 (51M) [application/octet-stream]
Saving to: â€˜Miniforge3-Linux-aarch64.sh.1â€™

Miniforge3-Linux-aarch64.sh.1                    1%[&gt;                                                                                                  ] 752.00K  9.01KB/s    in 74s     

2023-03-24 23:17:51 (10.2 KB/s) - Connection closed at byte 770048. Retrying.

## é»˜è®¤ç”¨çš„æ˜¯directï¼Œæ²¡æœ‰ç¿»å¢™ã€‚åœ¨9090/uié¡µé¢å…ˆæŠŠåŸæ¥çš„[è¿æ¥]åœæ‰ï¼Œç„¶åæŠŠ[ä»£ç†]åˆ‡æ¢åˆ°é¦™æ¸¯çš„èŠ‚ç‚¹

--2023-03-24 23:17:52--  (try: 2)  https://objects.githubusercontent.com/github-production-release-asset-2e65be/221584272/97169057-ca90-4fce-873e-a7d6d2e1db90?X-Amz-Algorithm=AWS4-HMAC-SHA256&amp;X-Amz-Credential=AKIAIWNJYAX4CSVEH53A%2F20230324%2Fus-east-1%2Fs3%2Faws4_request&amp;X-Amz-Date=20230324T151635Z&amp;X-Amz-Expires=300&amp;X-Amz-Signature=c46561816462b1e2bcd82d8b99f8ce840f4ff9b6214fda083828079783d43f0f&amp;X-Amz-SignedHeaders=host&amp;actor_id=0&amp;key_id=0&amp;repo_id=221584272&amp;response-content-disposition=attachment%3B%20filename%3DMiniforge3-Linux-aarch64.sh&amp;response-content-type=application%2Foctet-stream
Connecting to 127.0.0.1:7890... connected.
Proxy request sent, awaiting response... 206 Partial Content
Length: 53550114 (51M), 52780066 (50M) remaining [application/octet-stream]
Saving to: â€˜Miniforge3-Linux-aarch64.sh.1â€™

Miniforge3-Linux-aarch64.sh.1                  100%[+=================================================================================================&gt;]  51.07M  2.79MB/s    in 21s     

2023-03-24 23:18:14 (2.39 MB/s) - â€˜Miniforge3-Linux-aarch64.sh.1â€™ saved [53550114/53550114]

root@ubuntu:~# 

root@ubuntu:~# rm -rf Miniforge3-Linux-aarch64.sh
root@ubuntu:~# mv Miniforge3-Linux-aarch64.sh.1 Miniforge3-Linux-aarch64.sh
root@ubuntu:~# chmod +x Miniforge3-Linux-aarch64.sh

root@ubuntu:~# rm -rf /usr/local/miniforge3
root@ubuntu:~# ./Miniforge3-Linux-aarch64.sh 

Welcome to Miniforge3 22.11.1-4

In order to continue the installation process, please review the license
agreement.
Please, press ENTER to continue
&gt;&gt;&gt;  
Miniforge installer code uses BSD-3-Clause license as stated below.

Binary packages that come with it have their own licensing terms
and by installing miniforge you agree to the licensing terms of individual
packages as well. They include different OSI-approved licenses including
the GNU General Public License and can be found in pkgs/&lt;pkg-name&gt;/info/licenses
folders.

Miniforge installer comes with a boostrapping executable that is used
when installing miniforge and is deleted after miniforge is installed.
The bootstrapping executable uses micromamba, cli11, cpp-filesystem,
curl, c-ares, krb5, libarchive, libev, lz4, nghttp2, openssl, libsolv,
nlohmann-json, reproc and zstd which are licensed under BSD-3-Clause,
MIT and OpenSSL licenses. Licenses and copyright notices of these
projects can be found at the following URL.
https://github.com/conda-forge/micromamba-feedstock/tree/master/recipe.

=============================================================================

Copyright (c) 2019-2022, conda-forge
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

1. Redistributions of source code must retain the above copyright notice, this
list of conditions and the following disclaimer.

2. Redistributions in binary form must reproduce the above copyright notice,
this list of conditions and the following disclaimer in the documentation
and/or other materials provided with the distribution.

3. Neither the name of the copyright holder nor the names of its contributors
may be used to endorse or promote products derived from this software without
specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE
FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.


Do you accept the license terms? [yes|no]
[no] &gt;&gt;&gt; yes

Miniforge3 will now be installed into this location:
/root/miniforge3

  - Press ENTER to confirm the location
  - Press CTRL-C to abort the installation
  - Or specify a different location below

[/root/miniforge3] &gt;&gt;&gt; /usr/local/miniforge3   
PREFIX=/usr/local/miniforge3
Unpacking payload ...
Extracting ca-certificates-2022.12.7-h4fd8a4c_0.conda
Extracting ld_impl_linux-aarch64-2.40-h2d8c526_0.conda
Extracting libgomp-12.2.0-h607ecd0_19.tar.bz2
Extracting libstdcxx-ng-12.2.0-hc13a102_19.tar.bz2
Extracting python_abi-3.10-3_cp310.conda
Extracting tzdata-2022g-h191b570_0.conda
Extracting _openmp_mutex-4.5-2_gnu.tar.bz2
Extracting libgcc-ng-12.2.0-h607ecd0_19.tar.bz2
Extracting bzip2-1.0.8-hf897c2e_4.tar.bz2
Extracting libffi-3.4.2-h3557bc0_5.tar.bz2
Extracting libnsl-2.0.0-hf897c2e_0.tar.bz2
Extracting libuuid-2.32.1-hf897c2e_1000.tar.bz2
Extracting libzlib-1.2.13-h4e544f5_4.tar.bz2
Extracting ncurses-6.3-headf329_1.tar.bz2
Extracting openssl-3.0.8-hb4cce97_0.conda
Extracting xz-5.2.6-h9cdd2b7_0.tar.bz2
Extracting libsqlite-3.40.0-hf9034f9_0.tar.bz2
Extracting readline-8.1.2-h38e3740_0.tar.bz2
Extracting tk-8.6.12-hd8af866_0.tar.bz2
Extracting zstd-1.5.2-h44f6412_6.conda
Extracting python-3.10.9-ha43d526_0_cpython.conda
Extracting certifi-2022.12.7-pyhd8ed1ab_0.conda
Extracting charset-normalizer-2.1.1-pyhd8ed1ab_0.tar.bz2
Extracting colorama-0.4.6-pyhd8ed1ab_0.tar.bz2
Extracting idna-3.4-pyhd8ed1ab_0.tar.bz2
Extracting pluggy-1.0.0-pyhd8ed1ab_5.tar.bz2
Extracting pycosat-0.6.4-py310h761cc84_1.tar.bz2
Extracting pycparser-2.21-pyhd8ed1ab_0.tar.bz2
Extracting pysocks-1.7.1-pyha2e5f31_6.tar.bz2
Extracting ruamel.yaml.clib-0.2.7-py310hb89b984_1.conda
Extracting setuptools-65.6.3-pyhd8ed1ab_0.conda
Extracting toolz-0.12.0-pyhd8ed1ab_0.tar.bz2
Extracting wheel-0.38.4-pyhd8ed1ab_0.tar.bz2
Extracting cffi-1.15.1-py310hf0c4615_3.conda
Extracting pip-23.0-pyhd8ed1ab_0.conda
Extracting ruamel.yaml-0.17.21-py310h761cc84_2.tar.bz2
Extracting tqdm-4.64.1-pyhd8ed1ab_0.tar.bz2
Extracting brotlipy-0.7.0-py310h761cc84_1005.tar.bz2
Extracting cryptography-39.0.1-py310he4ba0b1_0.conda
Extracting zstandard-0.19.0-py310hde4b81c_1.conda
Extracting conda-package-streaming-0.7.0-pyhd8ed1ab_1.conda
Extracting pyopenssl-23.0.0-pyhd8ed1ab_0.conda
Extracting conda-package-handling-2.0.2-pyh38be061_0.conda
Extracting urllib3-1.26.14-pyhd8ed1ab_0.conda
Extracting requests-2.28.2-pyhd8ed1ab_0.conda
Extracting conda-22.11.1-py310h4c7bcd0_1.conda

Installing base environment...


                                           __
          __  ______ ___  ____ _____ ___  / /_  ____ _
         / / / / __ `__ \/ __ `/ __ `__ \/ __ \/ __ `/
        / /_/ / / / / / / /_/ / / / / / / /_/ / /_/ /
       / .___/_/ /_/ /_/\__,_/_/ /_/ /_/_.___/\__,_/
      /_/

Transaction

  Prefix: /usr/local/miniforge3

  Updating specs:

   - conda-forge/linux-aarch64::ca-certificates==2022.12.7=h4fd8a4c_0[md5=2450fbcaf65634e0d071e47e2b8487b4]
   - conda-forge/linux-aarch64::ld_impl_linux-aarch64==2.40=h2d8c526_0[md5=16246d69e945d0b1969a6099e7c5d457]
   - conda-forge/linux-aarch64::libgomp==12.2.0=h607ecd0_19[md5=65b9cb876525dcb2e74a90cf02c6762a]
   - conda-forge/linux-aarch64::libstdcxx-ng==12.2.0=hc13a102_19[md5=981741cd4321edd5c504b48f74fe91f2]
   - conda-forge/linux-aarch64::python_abi==3.10=3_cp310[md5=7f4f00b03d3a7c4d4b8b987e5da461a9]
   - conda-forge/noarch::tzdata==2022g=h191b570_0[md5=51fc4fcfb19f5d95ffc8c339db5068e8]
   - conda-forge/linux-aarch64::_openmp_mutex==4.5=2_gnu[md5=6168d71addc746e8f2b8d57dfd2edcea]
   - conda-forge/linux-aarch64::libgcc-ng==12.2.0=h607ecd0_19[md5=8456a29b6d9fc3123ccb9a966b6b2c49]
   - conda-forge/linux-aarch64::bzip2==1.0.8=hf897c2e_4[md5=2d787570a729e273a4e75775ddf3348a]
   - conda-forge/linux-aarch64::libffi==3.4.2=h3557bc0_5[md5=dddd85f4d52121fab0a8b099c5e06501]
   - conda-forge/linux-aarch64::libnsl==2.0.0=hf897c2e_0[md5=36fdbc05c9d9145ece86f5a63c3f352e]
   - conda-forge/linux-aarch64::libuuid==2.32.1=hf897c2e_1000[md5=e038da5ef9095b0d79aac14a311394e7]
   - conda-forge/linux-aarch64::libzlib==1.2.13=h4e544f5_4[md5=88596b6277fe6d39f046983aae6044db]
   - conda-forge/linux-aarch64::ncurses==6.3=headf329_1[md5=486b68148e121bc8bbadc3cefae4c04f]
   - conda-forge/linux-aarch64::openssl==3.0.8=hb4cce97_0[md5=268fe30a14a3f40fe54da04fc053fd2d]
   - conda-forge/linux-aarch64::xz==5.2.6=h9cdd2b7_0[md5=83baad393a31d59c20b63ba4da6592df]
   - conda-forge/linux-aarch64::libsqlite==3.40.0=hf9034f9_0[md5=9afb0d5dbaa403858a660cd0b4a31d29]
   - conda-forge/linux-aarch64::readline==8.1.2=h38e3740_0[md5=3cdbfb7d7b63ae2c2d35bb167d257ecd]
   - conda-forge/linux-aarch64::tk==8.6.12=hd8af866_0[md5=7894e82ff743bd96c76585ddebe28e2a]
   - conda-forge/linux-aarch64::zstd==1.5.2=h44f6412_6[md5=6d0d1cd6d184129eabb96bb220afb5b2]
   - conda-forge/linux-aarch64::python==3.10.9=ha43d526_0_cpython[md5=24478dd738f2d557efe2a4fc6a248eb3]
   - conda-forge/noarch::certifi==2022.12.7=pyhd8ed1ab_0[md5=fb9addc3db06e56abe03e0e9f21a63e6]
   - conda-forge/noarch::charset-normalizer==2.1.1=pyhd8ed1ab_0[md5=c1d5b294fbf9a795dec349a6f4d8be8e]
   - conda-forge/noarch::colorama==0.4.6=pyhd8ed1ab_0[md5=3faab06a954c2a04039983f2c4a50d99]
   - conda-forge/noarch::idna==3.4=pyhd8ed1ab_0[md5=34272b248891bddccc64479f9a7fffed]
   - conda-forge/noarch::pluggy==1.0.0=pyhd8ed1ab_5[md5=7d301a0d25f424d96175f810935f0da9]
   - conda-forge/linux-aarch64::pycosat==0.6.4=py310h761cc84_1[md5=c701cff6d6e7907c93ab603e58082a7c]
   - conda-forge/noarch::pycparser==2.21=pyhd8ed1ab_0[md5=076becd9e05608f8dc72757d5f3a91ff]
   - conda-forge/noarch::pysocks==1.7.1=pyha2e5f31_6[md5=2a7de29fb590ca14b5243c4c812c8025]
   - conda-forge/linux-aarch64::ruamel.yaml.clib==0.2.7=py310hb89b984_1[md5=89972c78c36ed3261c22bde7c012be03]
   - conda-forge/noarch::setuptools==65.6.3=pyhd8ed1ab_0[md5=9600fc9524d3f821e6a6d58c52f5bf5a]
   - conda-forge/noarch::toolz==0.12.0=pyhd8ed1ab_0[md5=92facfec94bc02d6ccf42e7173831a36]
   - conda-forge/noarch::wheel==0.38.4=pyhd8ed1ab_0[md5=c829cfb8cb826acb9de0ac1a2df0a940]
   - conda-forge/linux-aarch64::cffi==1.15.1=py310hf0c4615_3[md5=a2bedcb1d205485ea32fe5d2bd6fd970]
   - conda-forge/noarch::pip==23.0=pyhd8ed1ab_0[md5=85b35999162ec95f9f999bac15279c02]
   - conda-forge/linux-aarch64::ruamel.yaml==0.17.21=py310h761cc84_2[md5=98c0b13f20fcb4f5080554d137e39b37]
   - conda-forge/noarch::tqdm==4.64.1=pyhd8ed1ab_0[md5=5526ff3f88f9db87bb0924b9ce575345]
   - conda-forge/linux-aarch64::brotlipy==0.7.0=py310h761cc84_1005[md5=66934993368d01f896652925d3ac7e66]
   - conda-forge/linux-aarch64::cryptography==39.0.1=py310he4ba0b1_0[md5=3129345d217e5fd6488df794e49e327b]
   - conda-forge/linux-aarch64::zstandard==0.19.0=py310hde4b81c_1[md5=d4b3cc980179c38949c83fe23057d97c]
   - conda-forge/noarch::conda-package-streaming==0.7.0=pyhd8ed1ab_1[md5=1a2fa9e53cfbc2e4d9ab21990805a436]
   - conda-forge/noarch::pyopenssl==23.0.0=pyhd8ed1ab_0[md5=d41957700e83bbb925928764cb7f8878]
   - conda-forge/noarch::conda-package-handling==2.0.2=pyh38be061_0[md5=44800e9bd13143292097c65e57323038]
   - conda-forge/noarch::urllib3==1.26.14=pyhd8ed1ab_0[md5=01f33ad2e0aaf6b5ba4add50dad5ad29]
   - conda-forge/noarch::requests==2.28.2=pyhd8ed1ab_0[md5=11d178fc55199482ee48d6812ea83983]
   - conda-forge/linux-aarch64::conda==22.11.1=py310h4c7bcd0_1[md5=a71c4cc6bd77f61c0c1601b28291c460]


  Package                      Version  Build               Channel           Size
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  Install:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  + _openmp_mutex                  4.5  2_gnu               conda-forge     Cached
  + brotlipy                     0.7.0  py310h761cc84_1005  conda-forge     Cached
  + bzip2                        1.0.8  hf897c2e_4          conda-forge     Cached
  + ca-certificates          2022.12.7  h4fd8a4c_0          conda-forge     Cached
  + certifi                  2022.12.7  pyhd8ed1ab_0        conda-forge     Cached
  + cffi                        1.15.1  py310hf0c4615_3     conda-forge     Cached
  + charset-normalizer           2.1.1  pyhd8ed1ab_0        conda-forge     Cached
  + colorama                     0.4.6  pyhd8ed1ab_0        conda-forge     Cached
  + conda                      22.11.1  py310h4c7bcd0_1     conda-forge     Cached
  + conda-package-handling       2.0.2  pyh38be061_0        conda-forge     Cached
  + conda-package-streaming      0.7.0  pyhd8ed1ab_1        conda-forge     Cached
  + cryptography                39.0.1  py310he4ba0b1_0     conda-forge     Cached
  + idna                           3.4  pyhd8ed1ab_0        conda-forge     Cached
  + ld_impl_linux-aarch64         2.40  h2d8c526_0          conda-forge     Cached
  + libffi                       3.4.2  h3557bc0_5          conda-forge     Cached
  + libgcc-ng                   12.2.0  h607ecd0_19         conda-forge     Cached
  + libgomp                     12.2.0  h607ecd0_19         conda-forge     Cached
  + libnsl                       2.0.0  hf897c2e_0          conda-forge     Cached
  + libsqlite                   3.40.0  hf9034f9_0          conda-forge     Cached
  + libstdcxx-ng                12.2.0  hc13a102_19         conda-forge     Cached
  + libuuid                     2.32.1  hf897c2e_1000       conda-forge     Cached
  + libzlib                     1.2.13  h4e544f5_4          conda-forge     Cached
  + ncurses                        6.3  headf329_1          conda-forge     Cached
  + openssl                      3.0.8  hb4cce97_0          conda-forge     Cached
  + pip                           23.0  pyhd8ed1ab_0        conda-forge     Cached
  + pluggy                       1.0.0  pyhd8ed1ab_5        conda-forge     Cached
  + pycosat                      0.6.4  py310h761cc84_1     conda-forge     Cached
  + pycparser                     2.21  pyhd8ed1ab_0        conda-forge     Cached
  + pyopenssl                   23.0.0  pyhd8ed1ab_0        conda-forge     Cached
  + pysocks                      1.7.1  pyha2e5f31_6        conda-forge     Cached
  + python                      3.10.9  ha43d526_0_cpython  conda-forge     Cached
  + python_abi                    3.10  3_cp310             conda-forge     Cached
  + readline                     8.1.2  h38e3740_0          conda-forge     Cached
  + requests                    2.28.2  pyhd8ed1ab_0        conda-forge     Cached
  + ruamel.yaml                0.17.21  py310h761cc84_2     conda-forge     Cached
  + ruamel.yaml.clib             0.2.7  py310hb89b984_1     conda-forge     Cached
  + setuptools                  65.6.3  pyhd8ed1ab_0        conda-forge     Cached
  + tk                          8.6.12  hd8af866_0          conda-forge     Cached
  + toolz                       0.12.0  pyhd8ed1ab_0        conda-forge     Cached
  + tqdm                        4.64.1  pyhd8ed1ab_0        conda-forge     Cached
  + tzdata                       2022g  h191b570_0          conda-forge     Cached
  + urllib3                    1.26.14  pyhd8ed1ab_0        conda-forge     Cached
  + wheel                       0.38.4  pyhd8ed1ab_0        conda-forge     Cached
  + xz                           5.2.6  h9cdd2b7_0          conda-forge     Cached
  + zstandard                   0.19.0  py310hde4b81c_1     conda-forge     Cached
  + zstd                         1.5.2  h44f6412_6          conda-forge     Cached

  Summary:

  Install: 46 packages

  Total download: 0 B

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€



Transaction starting
Linking ca-certificates-2022.12.7-h4fd8a4c_0
Linking ld_impl_linux-aarch64-2.40-h2d8c526_0
Linking libgomp-12.2.0-h607ecd0_19
Linking libstdcxx-ng-12.2.0-hc13a102_19
Linking python_abi-3.10-3_cp310
Linking tzdata-2022g-h191b570_0
Linking _openmp_mutex-4.5-2_gnu
Linking libgcc-ng-12.2.0-h607ecd0_19
Linking bzip2-1.0.8-hf897c2e_4
Linking libffi-3.4.2-h3557bc0_5
Linking libnsl-2.0.0-hf897c2e_0
Linking libuuid-2.32.1-hf897c2e_1000
Linking libzlib-1.2.13-h4e544f5_4
Linking ncurses-6.3-headf329_1
Linking openssl-3.0.8-hb4cce97_0
Linking xz-5.2.6-h9cdd2b7_0
Linking libsqlite-3.40.0-hf9034f9_0
Linking readline-8.1.2-h38e3740_0
Linking tk-8.6.12-hd8af866_0
Linking zstd-1.5.2-h44f6412_6
Linking python-3.10.9-ha43d526_0_cpython
Linking certifi-2022.12.7-pyhd8ed1ab_0
Linking charset-normalizer-2.1.1-pyhd8ed1ab_0
Linking colorama-0.4.6-pyhd8ed1ab_0
Linking idna-3.4-pyhd8ed1ab_0
Linking pluggy-1.0.0-pyhd8ed1ab_5
Linking pycosat-0.6.4-py310h761cc84_1
Linking pycparser-2.21-pyhd8ed1ab_0
Linking pysocks-1.7.1-pyha2e5f31_6
Linking ruamel.yaml.clib-0.2.7-py310hb89b984_1
Linking setuptools-65.6.3-pyhd8ed1ab_0
Linking toolz-0.12.0-pyhd8ed1ab_0
Linking wheel-0.38.4-pyhd8ed1ab_0
Linking cffi-1.15.1-py310hf0c4615_3
Linking pip-23.0-pyhd8ed1ab_0
Linking ruamel.yaml-0.17.21-py310h761cc84_2
Linking tqdm-4.64.1-pyhd8ed1ab_0
Linking brotlipy-0.7.0-py310h761cc84_1005
Linking cryptography-39.0.1-py310he4ba0b1_0
Linking zstandard-0.19.0-py310hde4b81c_1
Linking conda-package-streaming-0.7.0-pyhd8ed1ab_1
Linking pyopenssl-23.0.0-pyhd8ed1ab_0
Linking conda-package-handling-2.0.2-pyh38be061_0
Linking urllib3-1.26.14-pyhd8ed1ab_0
Linking requests-2.28.2-pyhd8ed1ab_0
Linking conda-22.11.1-py310h4c7bcd0_1
Transaction finished
installation finished.
Do you wish the installer to initialize Miniforge3
by running conda init? [yes|no]
[no] &gt;&gt;&gt; yes
no change     /usr/local/miniforge3/condabin/conda
no change     /usr/local/miniforge3/bin/conda
no change     /usr/local/miniforge3/bin/conda-env
no change     /usr/local/miniforge3/bin/activate
no change     /usr/local/miniforge3/bin/deactivate
no change     /usr/local/miniforge3/etc/profile.d/conda.sh
no change     /usr/local/miniforge3/etc/fish/conf.d/conda.fish
no change     /usr/local/miniforge3/shell/condabin/Conda.psm1
no change     /usr/local/miniforge3/shell/condabin/conda-hook.ps1
no change     /usr/local/miniforge3/lib/python3.10/site-packages/xontrib/conda.xsh
no change     /usr/local/miniforge3/etc/profile.d/conda.csh
modified      /root/.bashrc

==&gt; For changes to take effect, close and re-open your current shell. &lt;==

If you'd prefer that conda's base environment not be activated on startup, 
   set the auto_activate_base parameter to false: 

conda config --set auto_activate_base false

Thank you for installing Miniforge3!
root@ubuntu:~# 
</code></pre>

<p>è¿™é‡Œä¿®æ”¹äº† /root/.bashrc æ·»åŠ äº†ï¼š</p>

<pre><code># &gt;&gt;&gt; conda initialize &gt;&gt;&gt;
# !! Contents within this block are managed by 'conda init' !!
__conda_setup="$('/usr/local/miniforge3/bin/conda' 'shell.bash' 'hook' 2&gt; /dev/null)"
if [ $? -eq 0 ]; then
    eval "$__conda_setup"
else
    if [ -f "/usr/local/miniforge3/etc/profile.d/conda.sh" ]; then
        . "/usr/local/miniforge3/etc/profile.d/conda.sh"
    else
        export PATH="/usr/local/miniforge3/bin:$PATH"
    fi
fi
unset __conda_setup
# &lt;&lt;&lt; conda initialize &lt;&lt;&lt;
</code></pre>

<p>ä¸ºäº†é‡æ–°åŠ è½½ç¯å¢ƒå˜é‡ï¼Œæ–°å¼€ä¸€ä¸ªçª—å£ï¼ŒæŸ¥çœ‹ç‰ˆæœ¬ï¼š</p>

<pre><code>(base) root@ubuntu:~# python -V
Python 3.10.9
(base) root@ubuntu:~# 
(base) root@ubuntu:~# conda -V
conda 22.11.1

(base) root@ubuntu:~# python3
Python 3.10.9 | packaged by conda-forge | (main, Feb  2 2023, 20:11:30) [GCC 11.3.0] on linux
Type "help", "copyright", "credits" or "license" for more information.
&gt;&gt;&gt; import platform
&gt;&gt;&gt; platform.architecture()
('64bit', 'ELF')
&gt;&gt;&gt; 
</code></pre>

<p>ä½¿ç”¨condaæ–°å»ºä¸€ä¸ªpython3.8çš„é…ç½® <a href="https://conda.io/projects/conda/en/latest/user-guide/tasks/manage-environments.html">https://conda.io/projects/conda/en/latest/user-guide/tasks/manage-environments.html</a> ï¼š</p>

<pre><code>(base) root@ubuntu:~# conda info --envs
# conda environments:
#
base                  *  /usr/local/miniforge3

(base) root@ubuntu:~# export http_proxy="http://127.0.0.1:7890"
(base) root@ubuntu:~# export https_proxy="http://127.0.0.1:7890" 

(base) root@ubuntu:~# conda create -n openai python=3.8 
Collecting package metadata (current_repodata.json): done
Solving environment: done


==&gt; WARNING: A newer version of conda exists. &lt;==
  current version: 22.11.1
  latest version: 23.1.0

Please update conda by running

    $ conda update -n base -c conda-forge conda

Or to minimize the number of packages updated during conda update use

     conda install conda=23.1.0



## Package Plan ##

  environment location: /usr/local/miniforge3/envs/openai

  added / updated specs:
    - python=3.8


The following packages will be downloaded:

    package                    |            build
    ---------------------------|-----------------
    pypy3.8-7.3.11             |       hf9a8208_0        31.6 MB  conda-forge
    ------------------------------------------------------------
                                           Total:        31.6 MB

The following NEW packages will be INSTALLED:

  _openmp_mutex      conda-forge/linux-aarch64::_openmp_mutex-4.5-2_gnu 
  bzip2              conda-forge/linux-aarch64::bzip2-1.0.8-hf897c2e_4 
  ca-certificates    conda-forge/linux-aarch64::ca-certificates-2022.12.7-h4fd8a4c_0 
  expat              conda-forge/linux-aarch64::expat-2.5.0-ha18d298_0 
  gdbm               conda-forge/linux-aarch64::gdbm-1.18-h0a1914f_2 
  libffi             conda-forge/linux-aarch64::libffi-3.4.2-h3557bc0_5 
  libgcc-ng          conda-forge/linux-aarch64::libgcc-ng-12.2.0-h607ecd0_19 
  libgomp            conda-forge/linux-aarch64::libgomp-12.2.0-h607ecd0_19 
  libsqlite          conda-forge/linux-aarch64::libsqlite-3.40.0-hf9034f9_0 
  libstdcxx-ng       conda-forge/linux-aarch64::libstdcxx-ng-12.2.0-hc13a102_19 
  libzlib            conda-forge/linux-aarch64::libzlib-1.2.13-h4e544f5_4 
  ncurses            conda-forge/linux-aarch64::ncurses-6.3-headf329_1 
  openssl            conda-forge/linux-aarch64::openssl-3.1.0-hb4cce97_0 
  pip                conda-forge/noarch::pip-23.0.1-pyhd8ed1ab_0 
  pypy3.8            conda-forge/linux-aarch64::pypy3.8-7.3.11-hf9a8208_0 
  python             conda-forge/linux-aarch64::python-3.8.16-0_73_pypy 
  python_abi         conda-forge/linux-aarch64::python_abi-3.8-3_pypy38_pp73 
  readline           conda-forge/linux-aarch64::readline-8.2-h8fc344f_1 
  setuptools         conda-forge/noarch::setuptools-67.6.0-pyhd8ed1ab_0 
  sqlite             conda-forge/linux-aarch64::sqlite-3.40.0-h69ca7e5_0 
  tk                 conda-forge/linux-aarch64::tk-8.6.12-hd8af866_0 
  wheel              conda-forge/noarch::wheel-0.40.0-pyhd8ed1ab_0 
  xz                 conda-forge/linux-aarch64::xz-5.2.6-h9cdd2b7_0 
  zlib               conda-forge/linux-aarch64::zlib-1.2.13-h4e544f5_4 


Proceed ([y]/n)? y


Downloading and Extracting Packages

Preparing transaction: done
Verifying transaction: done
Executing transaction: done
#
# To activate this environment, use
#
#     $ conda activate openai
#
# To deactivate an active environment, use
#
#     $ conda deactivate

(base) root@ubuntu:~# 
</code></pre>

<p>æ¿€æ´»é…ç½®ï¼š</p>

<pre><code>(base) root@ubuntu:~# conda activate openai
(openai) root@ubuntu:~# 
(openai) root@ubuntu:~# python --version
Python 3.8.16 | packaged by conda-forge | (a9dbdca6, Jan 29 2023, 10:19:50)
[PyPy 7.3.11 with GCC 11.3.0]
(openai) root@ubuntu:~# pip --version 
pip 23.0.1 from /usr/local/miniforge3/envs/openai/lib/pypy3.8/site-packages/pip (python 3.8)
(openai) root@ubuntu:~# git clone https://github.com/zhayujie/bot-on-anything
Cloning into 'bot-on-anything'...
remote: Enumerating objects: 644, done.
remote: Counting objects: 100% (271/271), done.
remote: Compressing objects: 100% (116/116), done.
remote: Total 644 (delta 190), reused 194 (delta 154), pack-reused 373
Receiving objects: 100% (644/644), 588.10 KiB | 448.00 KiB/s, done.
Resolving deltas: 100% (373/373), done.
(openai) root@ubuntu:~# 
(openai) root@ubuntu:~# pip3 install itchat-uos==1.5.0.dev0
Collecting itchat-uos==1.5.0.dev0
  Downloading itchat_uos-1.5.0.dev0-py3-none-any.whl (52 kB)
     â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 52.5/52.5 kB 244.0 kB/s eta 0:00:00
Collecting requests
  Downloading requests-2.28.2-py3-none-any.whl (62 kB)
     â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 62.8/62.8 kB 409.1 kB/s eta 0:00:00
Collecting pyqrcode
  Downloading PyQRCode-1.2.1.zip (41 kB)
     â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 41.9/41.9 kB 961.5 kB/s eta 0:00:00
  Preparing metadata (setup.py) ... done
Collecting pypng
  Downloading pypng-0.20220715.0-py3-none-any.whl (58 kB)
     â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 58.1/58.1 kB 540.0 kB/s eta 0:00:00
Collecting charset-normalizer&lt;4,&gt;=2
  Downloading charset_normalizer-3.1.0-py3-none-any.whl (46 kB)
     â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 46.2/46.2 kB 642.4 kB/s eta 0:00:00
Collecting idna&lt;4,&gt;=2.5
  Downloading idna-3.4-py3-none-any.whl (61 kB)
     â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 61.5/61.5 kB 567.0 kB/s eta 0:00:00
Collecting urllib3&lt;1.27,&gt;=1.21.1
  Downloading urllib3-1.26.15-py2.py3-none-any.whl (140 kB)
     â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 140.9/140.9 kB 1.0 MB/s eta 0:00:00
Collecting certifi&gt;=2017.4.17
  Downloading certifi-2022.12.7-py3-none-any.whl (155 kB)
     â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 155.3/155.3 kB 1.2 MB/s eta 0:00:00
Building wheels for collected packages: pyqrcode
  Building wheel for pyqrcode (setup.py) ... done
  Created wheel for pyqrcode: filename=PyQRCode-1.2.1-py3-none-any.whl size=36228 sha256=ba8cd080e7793f5e55c14fa704e57c1459ae29aa6481c719833bf9e148de5ad0
  Stored in directory: /root/.cache/pip/wheels/5f/46/eb/231c89e0ae989c528db1a30d3aae90c4fee29f14d4e0369312
Successfully built pyqrcode
Installing collected packages: pyqrcode, pypng, urllib3, idna, charset-normalizer, certifi, requests, itchat-uos
Successfully installed certifi-2022.12.7 charset-normalizer-3.1.0 idna-3.4 itchat-uos-1.5.0.dev0 pypng-0.20220715.0 pyqrcode-1.2.1 requests-2.28.2 urllib3-1.26.15
WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv
(openai) root@ubuntu:~# 
(openai) root@ubuntu:~# pip3 install --upgrade openai
Collecting openai
  Downloading openai-0.27.2-py3-none-any.whl (70 kB)
     â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 70.1/70.1 kB 277.1 kB/s eta 0:00:00
Requirement already satisfied: requests&gt;=2.20 in /usr/local/miniforge3/envs/openai/lib/python3.8/site-packages (from openai) (2.28.2)
Collecting tqdm
  Downloading tqdm-4.65.0-py3-none-any.whl (77 kB)
     â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 77.1/77.1 kB 394.8 kB/s eta 0:00:00
Collecting aiohttp
  Downloading aiohttp-3.8.4.tar.gz (7.3 MB)
     â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 7.3/7.3 MB 2.1 MB/s eta 0:00:00
  Installing build dependencies ... done
  Getting requirements to build wheel ... done
  Installing backend dependencies ... done
  Preparing metadata (pyproject.toml) ... done
Requirement already satisfied: charset-normalizer&lt;4,&gt;=2 in /usr/local/miniforge3/envs/openai/lib/python3.8/site-packages (from requests&gt;=2.20-&gt;openai) (3.1.0)
Requirement already satisfied: idna&lt;4,&gt;=2.5 in /usr/local/miniforge3/envs/openai/lib/python3.8/site-packages (from requests&gt;=2.20-&gt;openai) (3.4)
Requirement already satisfied: urllib3&lt;1.27,&gt;=1.21.1 in /usr/local/miniforge3/envs/openai/lib/python3.8/site-packages (from requests&gt;=2.20-&gt;openai) (1.26.15)
Requirement already satisfied: certifi&gt;=2017.4.17 in /usr/local/miniforge3/envs/openai/lib/python3.8/site-packages (from requests&gt;=2.20-&gt;openai) (2022.12.7)
Collecting attrs&gt;=17.3.0
  Downloading attrs-22.2.0-py3-none-any.whl (60 kB)
     â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 60.0/60.0 kB 834.6 kB/s eta 0:00:00
Collecting multidict&lt;7.0,&gt;=4.5
  Downloading multidict-6.0.4.tar.gz (51 kB)
     â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 51.3/51.3 kB 1.4 MB/s eta 0:00:00
  Installing build dependencies ... done
  Getting requirements to build wheel ... done
  Installing backend dependencies ... done
  Preparing metadata (pyproject.toml) ... done
Collecting async-timeout&lt;5.0,&gt;=4.0.0a3
  Downloading async_timeout-4.0.2-py3-none-any.whl (5.8 kB)
Collecting yarl&lt;2.0,&gt;=1.0
  Downloading yarl-1.8.2.tar.gz (172 kB)
     â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 172.3/172.3 kB 1.8 MB/s eta 0:00:00
  Installing build dependencies ... done
  Getting requirements to build wheel ... done
  Preparing metadata (pyproject.toml) ... done
Collecting frozenlist&gt;=1.1.1
  Downloading frozenlist-1.3.3.tar.gz (66 kB)
     â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 66.6/66.6 kB 392.4 kB/s eta 0:00:00
  Installing build dependencies ... done
  Getting requirements to build wheel ... done
  Preparing metadata (pyproject.toml) ... done
Collecting aiosignal&gt;=1.1.2
  Downloading aiosignal-1.3.1-py3-none-any.whl (7.6 kB)
Building wheels for collected packages: aiohttp, frozenlist, multidict, yarl
  Building wheel for aiohttp (pyproject.toml) ... done
  Created wheel for aiohttp: filename=aiohttp-3.8.4-py3-none-any.whl size=183495 sha256=6bdf6b07bb86d5e5e452691da3570b0465c4177bec6fbe8ab668aef8d27ce39c
  Stored in directory: /root/.cache/pip/wheels/46/48/fb/1fceb5376aa4eb481cec5ca10d6aece4455cf6a95030009502
  Building wheel for frozenlist (pyproject.toml) ... done
  Created wheel for frozenlist: filename=frozenlist-1.3.3-py3-none-any.whl size=9271 sha256=83ae70b8a9145f1fb94dffca4105ef207500e63dd3d8c056dc63a3f6ba664927
  Stored in directory: /root/.cache/pip/wheels/0e/e7/55/8036a4cd9267238ba8aa2d714837827b8fd836324632469067
  Building wheel for multidict (pyproject.toml) ... done
  Created wheel for multidict: filename=multidict-6.0.4-py3-none-any.whl size=9710 sha256=0a72821685197753e4e43473bbfe1232bb33cd79fa4ad9c97daae3a7e4afd097
  Stored in directory: /root/.cache/pip/wheels/23/65/1f/b5b0672ad49d2ff7b2c6ad75f24f45c407aab185c37803ae76
  Building wheel for yarl (pyproject.toml) ... done
  Created wheel for yarl: filename=yarl-1.8.2-py3-none-any.whl size=24118 sha256=4ed71ce5647e860cac0a0b5496e72e837878a33d62177d3bdded7d20d068b299
  Stored in directory: /root/.cache/pip/wheels/4e/40/2e/3261e7db3f6b66ca3d8a1ec694f2d5d87f89110e2204675597
Successfully built aiohttp frozenlist multidict yarl
Installing collected packages: tqdm, multidict, frozenlist, attrs, async-timeout, yarl, aiosignal, aiohttp, openai
Successfully installed aiohttp-3.8.4 aiosignal-1.3.1 async-timeout-4.0.2 attrs-22.2.0 frozenlist-1.3.3 multidict-6.0.4 openai-0.27.2 tqdm-4.65.0 yarl-1.8.2
WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv
(openai) root@ubuntu:~# 
</code></pre>

<h3>å­¦ä¹ conda</h3>

<ul>
<li><a href="https://stackoverflow.com/questions/34534513/calling-conda-source-activate-from-bash-script">https://stackoverflow.com/questions/34534513/calling-conda-source-activate-from-bash-script</a></li>
<li><a href="https://docs.conda.io/projects/conda/en/latest/dev-guide/deep-dives/activation.html">https://docs.conda.io/projects/conda/en/latest/dev-guide/deep-dives/activation.html</a></li>
<li><a href="https://conda.io/projects/conda/en/latest/user-guide/tasks/manage-environments.html">https://conda.io/projects/conda/en/latest/user-guide/tasks/manage-environments.html</a></li>
</ul>


<pre><code>1
$ eval "$(conda shell.bash activate)"
$ conda shell.bash activate mamba-poc

2
eval "$(conda shell.bash hook)"
conda activate &lt;env-name&gt;

3
#!/bin/bash
source /Users/yourname/anaconda/bin/activate your_env
python --version # example way to see that your virtual env loaded as expected

4
try using

source ~/anaconda3/etc/profile.d/conda.sh

and then do

conda activate pult

5
https://unix.stackexchange.com/questions/689163/launch-terminal-and-conda-activate-env-from-bash-script
# Just activate my conda
alias my_conda='source /home/$USER/anaconda3/bin/activate &amp;&amp; conda activate MyPy38'

# Open Jupyter Notebook in my Env
alias my_jupn='source /home/$USER/anaconda3/bin/activate &amp;&amp; conda activate MyPy38 &amp;&amp; jupyter-notebook'

# Open Jupyter Lab in my Env
alias my_jupl='source /home/$USER/anaconda3/bin/activate &amp;&amp; conda activate MyPy38 &amp;&amp; jupyter-lab'

# Open Spyder in my Env
alias my_spyder='source /home/$USER/anaconda3/bin/activate &amp;&amp; conda activate MyPy38 &amp;&amp; spyder'
</code></pre>

<h2>èŠ±ç”Ÿå£³</h2>

<ul>
<li><a href="https://hsk.oray.com/download">https://hsk.oray.com/download</a></li>
<li><a href="https://service.oray.com/question/11639.html">https://service.oray.com/question/11639.html</a></li>
</ul>


<p>&ndash;END</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[é‡æ–°æŠ˜è…¾raspberry2]]></title>
    <link href="http://winse.github.io/blog/2023/03/25/reinstall-raspberry2/"/>
    <updated>2023-03-25T21:24:35+08:00</updated>
    <id>http://winse.github.io/blog/2023/03/25/reinstall-raspberry2</id>
    <content type="html"><![CDATA[<p>ä¹°äº†æ–°çš„raspberry4åï¼Œå°±æ²¡æ€ä¹ˆå»å¼„æ—§çš„æ ‘è“æ´¾2äº†ï¼Œä»Šå¤©å†æ¬¡çœ‹åˆ°æƒ³ç€è¿è¡Œèµ·æ¥çœ‹çœ‹ï¼Œæ’ä¸Šç”µæºåï¼Œä¸€ç›´äº®ç€ç»¿ç¯ï¼Œç„¶åå°±æ²¡å…¶ä»–ååº”äº†ã€‚</p>

<p>æ ‘è“æ´¾2æœ‰ç‚¹æ—§ï¼Œç°åœ¨ç›´æ¥æ‹¿ç€æ–°çš„æ‰‹æœºå……ç”µå™¨å»æ¥çš„æ—¶åˆ»ï¼Œä¸€ç›´èµ·ä¸æ¥ï¼Œåˆšå¼€å§‹æ˜¯æ€€ç–‘æ˜¯ç”¨TTLæ¥é”™çº¿å¯¼è‡´æ¿å­çƒ§äº†ï¼Œä¹Ÿæ²¡æœ‰æ˜¾ç¤ºå™¨æŸ¥çœ‹ç•Œé¢ã€‚</p>

<p>åé¢æƒ³ç€é‡æ–°å®‰è£…ä¸€ä¸‹è¯•è¯•ï¼Œç„¶åæ‹¿ç€å»æ¥ç½‘çº¿æœ‰çº¿ç½‘ç»œï¼Œè¿™æ ·å°±æ‹¿äº†ä¸€ä¸ªæ—§çš„å……ç”µå™¨çš„å¤´ã€‚æ²¡æƒ³åˆ°è¿™ä¸ªæ—¶åˆ»ç”µæºæŒ‡ç¤ºç¯å°½ç„¶é—ªèµ·æ¥äº†ã€‚æƒ³æ¥è¿™å¯èƒ½æ˜¯ç”µæµè¿‡è½½ä¿æŠ¤äº†ã€‚</p>

<p>é—®é¢˜è§£å†³äº†ï¼Œä¹ŸæŠŠæœ€æ–°çš„é‡æ–°å®‰è£…çš„è®°å½•ä¸€ä¸‹ã€‚</p>

<h2>å®‰è£…</h2>

<p>å‚è€ƒï¼š
* <a href="https://www.raspberrypi.com/documentation/computers/getting-started.html#installing-the-operating-system">Setting up your Raspberry Pi</a></p>

<h3>å®‰è£…ç³»ç»Ÿ</h3>

<p>1 æ‰“å¼€ <a href="https://www.raspberrypi.com/software/">Raspberry Pi Imager</a> ä¸‹è½½å¹¶å®‰è£…ï¼Œç„¶åæŠŠSD cardæ’å…¥ç”µè„‘ã€‚</p>

<p><img src="/images/blogs/rasp2/rasp2-1.png" alt="" /></p>

<p>2 è®¾ç½®åˆå§‹åŒ– ç”¨æˆ·å’Œå¯†ç ï¼Œå¹¶é»˜è®¤æ‰“å¼€sshæœåŠ¡ï¼ˆæ–°ç‰ˆæœ¬å·²ç»å»æ‰é»˜è®¤ç”¨æˆ·äº†ï¼Œæ‰€ä»¥è¦è®¾ç½®ä¸€ä¸‹ <a href="https://www.raspberrypi.com/news/raspberry-pi-bullseye-update-april-2022/">An update to Raspberry Pi OS Bullseye</a> ï¼‰</p>

<p><img src="/images/blogs/rasp2/rasp2-2.png" alt="" /></p>

<p>3 é€‰æ‹©æ“ä½œç³»ç»Ÿ</p>

<p><img src="/images/blogs/rasp2/rasp2-3-1.png" alt="" /></p>

<p><img src="/images/blogs/rasp2/rasp2-3-2.png" alt="" /></p>

<p>4 è¿ä¸Šæœ‰çº¿ç½‘ç»œï¼Œæ¥é€šç”µæºã€‚ç„¶åæ‰“å¼€è·¯ç”±ç®¡ç†ç•Œé¢ï¼ŒæŸ¥çœ‹raspberryçš„ipåœ°å€</p>

<p><img src="/images/blogs/rasp2/rasp2-4-0.png" alt="" /></p>

<p>5 ç”¨sshè¿æ¥æœåŠ¡å™¨</p>

<p><img src="/images/blogs/rasp2/rasp2-4-1.png" alt="" /></p>

<h3>é…ç½®Wifiç½‘ç»œ</h3>

<p>åŸæ¥å·²ç»ä¹°äº†usbçš„æ— çº¿ç½‘å¡ï¼Œç”¨ <code>ifconfig</code> ä¹Ÿèƒ½æŸ¥çœ‹åˆ° <code>wlan0</code> çš„æ¥å£ã€‚</p>

<pre><code>root@raspberrypi:~# apt install vim 
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
  libgpm2 vim-runtime
Suggested packages:
  gpm ctags vim-doc vim-scripts
The following NEW packages will be installed:
  libgpm2 vim vim-runtime
0 upgraded, 3 newly installed, 0 to remove and 0 not upgraded.
...
update-alternatives: using /usr/bin/vim.basic to provide /usr/bin/vim (vim) in auto mode
update-alternatives: using /usr/bin/vim.basic to provide /usr/bin/vimdiff (vimdiff) in auto mode
update-alternatives: using /usr/bin/vim.basic to provide /usr/bin/rvim (rvim) in auto mode
update-alternatives: using /usr/bin/vim.basic to provide /usr/bin/rview (rview) in auto mode
update-alternatives: using /usr/bin/vim.basic to provide /usr/bin/vi (vi) in auto mode
update-alternatives: using /usr/bin/vim.basic to provide /usr/bin/view (view) in auto mode
update-alternatives: using /usr/bin/vim.basic to provide /usr/bin/ex (ex) in auto mode
Processing triggers for man-db (2.9.4-2) ...
Processing triggers for libc-bin (2.31-13+rpt2+rpi1+deb11u5) ...

root@raspberrypi:~# echo "set mouse-=a" &gt;&gt;~/.vimrc
root@raspberrypi:~# vim /etc/wpa_supplicant/wpa_supplicant.conf    
root@raspberrypi:~# 


root@raspberrypi:~# iwlist wlan0 scan

# ç®—ä¸€ä¸ªåŠ å¯†çš„é…ç½®
root@raspberrypi:~# wpa_passphrase winse
# reading passphrase from stdin
xxx
network={
        ssid="winse"
        #psk="xxx"
        psk=xxx
}

root@raspberrypi:~# cat /etc/wpa_supplicant/wpa_supplicant.conf   
country=CN
ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev
update_config=1

network={
        ssid="winse"
        #psk="xxx"
        psk=xxx
}


# é…ç½®æœåŠ¡
pi@raspberrypi:~ $ cat /lib/systemd/system/wpa_supplicant.service 
[Unit]
Description=WPA supplicant
Before=network.target
After=dbus.service
Wants=network.target
IgnoreOnIsolate=true

[Service]
#Type=dbus
#BusName=fi.w1.wpa_supplicant1
Type=forking
ExecStart=/sbin/wpa_supplicant -u -s -O /run/wpa_supplicant -c /etc/wpa_supplicant/wpa_supplicant.conf -i wlan0 -B -D wext
Restart=always

[Install]
WantedBy=multi-user.target
#Alias=dbus-fi.w1.wpa_supplicant1.service
pi@raspberrypi:~ $ cat /etc/systemd/system/dhclient.service 
[Unit]
Description= DHCP Client
Before=network.target

[Service]
Type=forking
ExecStart=/sbin/dhclient wlan0 -v
ExecStop=/sbin/dhclient wlan0 -r
Restart=always

[Install] 
WantedBy=multi-user.target
pi@raspberrypi:~ $ 

root@raspberrypi:~# systemctl daemon-reload 

root@raspberrypi:~# systemctl stop NetworkManager
root@raspberrypi:~# systemctl enable wpa_supplicant.service 
root@raspberrypi:~# systemctl enable dhclient.service
Created symlink /etc/systemd/system/multi-user.target.wants/dhclient.service â†’ /etc/systemd/system/dhclient.service.
</code></pre>

<p>é…ç½®å¥½åï¼Œé‡å¯æœåŠ¡å™¨ï¼Œå†æ¬¡æŸ¥çœ‹è·¯ç”±å™¨ç®¡ç†webç•Œé¢ï¼š</p>

<p><img src="/images/blogs/rasp2/rasp2-5.png" alt="" /></p>

<p>ç„¶åå†æŠŠç½‘çº¿æ‹”æ‰ï¼Œå†é‡å¯ä¸€æ¬¡ç¡®è®¤ä¸€ä¸‹ã€‚</p>

<h3>é‡åˆ°çš„é—®é¢˜ï¼š</h3>

<p>1 <a href="https://zhuanlan.zhihu.com/p/136463580">https://zhuanlan.zhihu.com/p/136463580</a></p>

<pre><code>å¦‚æœæ ‘è“æ´¾ç³»ç»Ÿä½¿ç”¨çš„æ˜¯Raspbian Stretchï¼Œåˆ™ifupå‘½ä»¤å¯èƒ½ä¸èµ·ä½œç”¨ï¼Œå¯èƒ½ä¼šæ”¶åˆ°ä¸€æ¡é”™è¯¯æ¶ˆæ¯ï¼Œ
å†…å®¹å¦‚ä¸‹ï¼šâ€œ ifdownï¼šunknown interface wlan0 â€ã€‚å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä»»ä½•å‘½ä»¤æ¥è§£å†³ï¼š
sudo ifconfig wlan0 up
</code></pre>

<p>2 <a href="https://shumeipai.nxez.com/2017/09/13/raspberry-pi-network-configuration-before-boot.html">https://shumeipai.nxez.com/2017/09/13/raspberry-pi-network-configuration-before-boot.html</a></p>

<pre><code>è¯´æ˜ä»¥åŠä¸åŒå®‰å…¨æ€§çš„ WiFi é…ç½®ç¤ºä¾‹ï¼š
#ssid:ç½‘ç»œçš„ssid
#psk:å¯†ç 
#priority:è¿æ¥ä¼˜å…ˆçº§ï¼Œæ•°å­—è¶Šå¤§ä¼˜å…ˆçº§è¶Šé«˜ï¼ˆä¸å¯ä»¥æ˜¯è´Ÿæ•°ï¼‰
#scan_ssid:è¿æ¥éšè—WiFiæ—¶éœ€è¦æŒ‡å®šè¯¥å€¼ä¸º1

å¦‚æœä½ çš„ WiFi æ²¡æœ‰å¯†ç 

network={
  ssid="ä½ çš„æ— çº¿ç½‘ç»œåç§°ï¼ˆssidï¼‰"
  key_mgmt=NONE
}
å¦‚æœä½ çš„ WiFi ä½¿ç”¨WEPåŠ å¯†


network={
  ssid="ä½ çš„æ— çº¿ç½‘ç»œåç§°ï¼ˆssidï¼‰"
  key_mgmt=NONE
  wep_key0="ä½ çš„wifiå¯†ç "
}
å¦‚æœä½ çš„ WiFi ä½¿ç”¨WPA/WPA2åŠ å¯†


network={
  ssid="ä½ çš„æ— çº¿ç½‘ç»œåç§°ï¼ˆssidï¼‰"
  key_mgmt=WPA-PSK
  psk="ä½ çš„wifiå¯†ç "
}

å¦‚æœä½ ä¸æ¸…æ¥š WiFi çš„åŠ å¯†æ¨¡å¼ï¼Œå¯ä»¥åœ¨å®‰å“æ‰‹æœºä¸Šç”¨ root explorer æ‰“å¼€ /data/misc/wifi/wpa/wpa_supplicant.confï¼ŒæŸ¥çœ‹ WiFi çš„ä¿¡æ¯ã€‚
</code></pre>

<p>3 <a href="https://www.labno3.com/2021/03/22/setting-up-raspberry-pi-wifi/">https://www.labno3.com/2021/03/22/setting-up-raspberry-pi-wifi/</a></p>

<pre><code>å¦‚æœè¿æ¥æœ‰é—®é¢˜ï¼Œä¸€å®šè¦ç¡®è®¤Piæ˜¯å¦æ”¯æŒWiFiã€‚ä¹Ÿæœ‰å¯èƒ½ä½ çš„SSIDæ˜¯é”™è¯¯çš„ï¼Œè¦æ‰«æå’Œæ£€æŸ¥ï¼Œ
ä½¿ç”¨sudo iwlist wlan0 scanå¹¶æ£€æŸ¥essidå­—æ®µã€‚
è¿™ä¸ªå­—æ®µåº”è¯¥å’Œä½ åœ¨ssidå­—æ®µè¾“å…¥çš„ä¸€æ ·ã€‚
</code></pre>

<p>4 æŸ¥çœ‹ä¿¡æ¯ <a href="https://www.baeldung.com/linux/connect-network-cli">https://www.baeldung.com/linux/connect-network-cli</a></p>

<pre><code>root@raspberrypi:~# ip link show wlan0
3: wlan0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc mq state DOWN mode DEFAULT group default qlen 1000
    link/ether 00:5a:39:e1:4d:bb brd ff:ff:ff:ff:ff:ff
root@raspberrypi:~# ip link set wlan0 up  
root@raspberrypi:~# ip link show wlan0
3: wlan0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc mq state DOWN mode DEFAULT group default qlen 1000
    link/ether 00:5a:39:e1:4d:bb brd ff:ff:ff:ff:ff:ff
root@raspberrypi:~# 
root@raspberrypi:~# iw wlan0 link
Not connected.

root@raspberrypi:~# ifconfig wlan0 down
root@raspberrypi:~# ifconfig wlan0 up 
root@raspberrypi:~# ifconfig wlan0
wlan0: flags=4099&lt;UP,BROADCAST,MULTICAST&gt;  mtu 1500
        ether 00:5a:39:e1:4d:bb  txqueuelen 1000  (Ethernet)
        RX packets 0  bytes 0 (0.0 B)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 0  bytes 0 (0.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
</code></pre>

<p>5 <a href="https://shapeshed.com/linux-wifi/">https://shapeshed.com/linux-wifi/</a></p>

<pre><code>wpa_cli
</code></pre>

<p>6 <a href="https://www.bilibili.com/read/cv8895717">https://www.bilibili.com/read/cv8895717</a></p>

<pre><code>vim /etc/wpa_supplicant/wpa_supplicant.conf ç¼–è¾‘è¯¥æ–‡ä»¶ï¼Œåœ¨æ–‡ä»¶é¡¶éƒ¨å¢åŠ ä»¥ä¸‹å†…å®¹
country=CN
ctrl_interface=/run/wpa_supplicant
update_config=1

ç‰¹åˆ«è¯´æ˜ï¼šcountry=CN ç”±äºå„ä¸ªå›½å®¶wifiä½¿ç”¨é¢‘æ®µä¸åŒï¼Œå°¤å…¶5Gé¢‘æ®µ

vim /etc/rc.local æ·»åŠ ä»¥ä¸‹å†…å®¹

#!/bin/bash

ip link set wlan0 up &amp;
wpa_supplicant -B -i wlan0 -D nl80211 -c /etc/wpa_supplicant/wpa_supplicant.conf &amp;
dhclient wlan0

exit 0
</code></pre>

<p>7 <a href="https://blog.csdn.net/u010049696/article/details/48765999">https://blog.csdn.net/u010049696/article/details/48765999</a></p>

<pre><code>é…ç½®serviceã€‚è¿›å…¥åˆ°/usr/lib/systemd/systemç›®å½•ï¼Œå¯ä»¥çœ‹åˆ°ä¸‹é¢å››ä¸ªæ–‡ä»¶ï¼š

wpa_supplicant-nl80211@.service
wpa_supplicant.service
wpa_supplicant@.service
wpa_supplicant-wired@.service

ç¼–è¾‘wpa_supplicant.serviceæ–‡ä»¶ï¼Œå¦‚ä¸‹ï¼š

[Unit]
Description=WPA supplicant


[Service]
Type=dbus
BusName=fi.epitest.hostap.WPASupplicant
ExecStart=/usr/bin/wpa_supplicant -c/etc/wpa_supplicant/test.conf -i wlp3s0


[Install]
WantedBy=multi-user.target
Alias=dbus-fi.epitest.hostap.WPASupplicant.service

å…¶ä¸­ï¼Œåªéœ€ä¿®æ”¹ExecStart=/usr/bin/wpa_supplicant -c/etc/wpa_supplicant/test.conf -i wlp3s0å³å¯ã€‚
</code></pre>

<p>8 <a href="https://www.linuxbabe.com/command-line/ubuntu-server-16-04-wifi-wpa-supplicant">https://www.linuxbabe.com/command-line/ubuntu-server-16-04-wifi-wpa-supplicant</a></p>

<pre><code>Auto Connect on Startup
To automatically connect to wireless network at boot time, we need to edit the wpa_supplicant.service file. Itâ€™s a good idea to copy the file from /lib/systemd/system/ directory to /etc/systemd/system/ directory, then edit it because we donâ€™t want newer version of wpasupplicant to override our modifications.

sudo cp /lib/systemd/system/wpa_supplicant.service /etc/systemd/system/wpa_supplicant.service

sudo nano /etc/systemd/system/wpa_supplicant.service
Find the following line.

ExecStart=/sbin/wpa_supplicant -u -s -O /run/wpa_supplicant
Change it to the following. Obviously you need to change wlp3s0 if that isnâ€™t your interface name.

ExecStart=/sbin/wpa_supplicant -u -s -c /etc/wpa_supplicant.conf -i wlp3s0
Itâ€™s recommended to always try to restart wpa_supplicant when failure is detected. Add the following right below the ExecStart line.

Restart=always
If you can find the following line in this file, comment it out (Add the # character at the beginning of the line).

Alias=dbus-fi.w1.wpa_supplicant1.service
Save and close the file. Then enable wpa_supplicant service to start at boot time.

sudo systemctl enable wpa_supplicant.service

~~~

sudo nano /etc/systemd/system/dhclient.service
Put the following text into the file.

[Unit]
Description= DHCP Client
Before=network.target

[Service]
Type=forking
ExecStart=/sbin/dhclient wlp3s0 -v
ExecStop=/sbin/dhclient wlp3s0 -r
Restart=always

[Install] 
WantedBy=multi-user.target
Save and close the file. Then enable this service.

sudo systemctl enable dhclient.service
</code></pre>

<p>&ndash;END</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[åœ¨æ ‘è“æ´¾ä¸Šéƒ¨ç½²redmine - Respberrypi]]></title>
    <link href="http://winse.github.io/blog/2020/05/11/redmine-on-arm-pi/"/>
    <updated>2020-05-11T10:33:44+08:00</updated>
    <id>http://winse.github.io/blog/2020/05/11/redmine-on-arm-pi</id>
    <content type="html"><![CDATA[<p>å˜åºŸä¸ºå®ã€‚</p>

<p>æœåŠ¡å™¨æ²¡æ€ä¹ˆç”¨ï¼Œä½†æ˜¯å¶å°”åˆæƒ³è®¿é—®ä¸‹æ–‡æ¡£æˆ–è€…redmineï¼Œç‹ ç‹ å¿ƒå’¬å’¬ç‰™æœ€åæŠŠx64ä¸Šçš„è¿ç§»åˆ°äº†æ ‘è“æ´¾2ï¼š Raspbian GNU/Linux 9 (stretch) ã€‚</p>

<p>æ¸©æ•…ä¸‹åŸæ¥redmineçš„å®‰è£…è¿‡ç¨‹ï¼š <a href="http://www.winseliu.com/blog/2017/09/18/redmine-deploy-and-install-plugins/">Redmineéƒ¨ç½²ä»¥åŠæ’ä»¶å®‰è£…</a></p>

<p>è¿‡ç¨‹ä¸­æ¶‰åŠåˆ°äº†dockerçš„é‡æ–°ç¼–è¯‘ï¼Œè¿™å…¶ä¸­ä¸»è¦ä½¿ç”¨ubuntu aptæºç åœ¨æœ¬åœ°armä¸Šè¿›è¡Œå†ç¼–è¯‘ã€‚å…¶ä¸­æ¶‰åŠçš„é•œåƒæœ‰ï¼š</p>

<ul>
<li><a href="https://github.com/sameersbn/docker-ubuntu/tree/14.04">https://github.com/sameersbn/docker-ubuntu/tree/14.04</a></li>
<li><a href="https://github.com/sameersbn/docker-postgresql/tree/9.6-2">https://github.com/sameersbn/docker-postgresql/tree/9.6-2</a></li>
<li><a href="https://github.com/sameersbn/docker-redmine/tree/3.4.6">https://github.com/sameersbn/docker-redmine/tree/3.4.6</a></li>
</ul>


<h2>å¤‡ä»½</h2>

<p>redmineç›´æ¥æ•´ä¸ªç›®å½•æ‰“åŒ… /srv/docker/redmine/redmine ã€‚æ•°æ®åº“çš„è¦å¤‡ä»½å‡ºæ¥ï¼Œæ¶æ„ä¸åŒä¸å…¼å®¹ã€‚</p>

<p>è¿™æ˜¯ç¼–è¯‘åarm postgresç›´æ¥ç”¨x64çš„/srv/docker/redmine/postgresqlçš„æŠ¥é”™ä¿¡æ¯ï¼š
```
root@raspberrypi:~# docker run &ndash;rm -ti &ndash;entrypoint=&ldquo;bash&rdquo; -v /srv/docker/redmine/postgresql:/var/lib/postgresql sameersbn/postgresql:9.6-2</p>

<p>root@8f39c2904607:/var/lib/postgresql# sudo -HEu postgres /usr/lib/postgresql/9.6/bin/pg_ctl -D /var/lib/postgresql/9.6/main -w start
waiting for server to start&hellip;.FATAL:  database files are incompatible with server
DETAIL:  The database cluster was initialized with USE_FLOAT8_BYVAL but the server was compiled without USE_FLOAT8_BYVAL.
HINT:  It looks like you need to recompile or initdb.
LOG:  database system is shut down
stopped waiting
pg_ctl: could not start server
Examine the log output.
```</p>

<h2>ç¼–è¯‘ubuntué•œåƒ</h2>

<p>ç›´æ¥ä½¿ç”¨æœ€æ–°çš„trustyå‘å¸ƒç‰ˆé•œåƒã€‚ç”±äºä½ç‰ˆæœ¬çš„å¯èƒ½ä¼šæ²¡æœ‰ linux/arm/v7 : <a href="https://hub.docker.com/_/ubuntu/?tab=tags&amp;page=1&amp;name=trusty">https://hub.docker.com/_/ubuntu/?tab=tags&amp;page=1&amp;name=trusty</a></p>

<pre><code>root@raspberrypi:~/docker-ubuntu# vi Dockerfile
FROM ubuntu:trusty

docker build -t sameersbn/ubuntu:14.04.20170123 . 
docker tag sameersbn/ubuntu:14.04.20170123 sameersbn/ubuntu:14.04.20170711 
</code></pre>

<h2>ç¼–è¯‘postgresé•œåƒ</h2>

<p>ç”±äºpostgresql aptçš„åº“ä¸­æ²¡æœ‰armhfçš„debï¼Œéœ€è¦å…ˆæ‰‹åŠ¨ç¼–è¯‘å¥½å¯¹åº”çš„debã€‚å…ˆè¿è¡Œä¸€ä¸ªå®¹å™¨ï¼Œå†é‡Œé¢ç¼–è¯‘å¥½postgresã€‚</p>

<pre><code>wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | apt-key add - \
 &amp;&amp; echo 'deb-src http://mirrors.zju.edu.cn/postgresql/repos/apt/ trusty-pgdg main' &gt; /etc/apt/sources.list.d/pgdg.list \
 &amp;&amp; sed -i 's/ports.ubuntu.com/mirrors.aliyun.com/' /etc/apt/sources.list \
 &amp;&amp; sed -Ei 's/^# deb-src /deb-src /' /etc/apt/sources.list \
 &amp;&amp; apt-get update

root@7d55994af11e:/# apt-get build-dep dh-exec postgresql-common  pgdg-keyring     
root@7d55994af11e:/# apt-get source --compile dh-exec postgresql-common  pgdg-keyring   

root@7d55994af11e:/# apt-get build-dep postgresql-${PG_VERSION} postgresql-client-${PG_VERSION} postgresql-contrib-${PG_VERSION} dh-exec
root@7d55994af11e:/# apt-get source --compile postgresql-${PG_VERSION} postgresql-client-${PG_VERSION} postgresql-contrib-${PG_VERSION} 
</code></pre>

<p>å†æµ‹è¯•å®‰è£…ä¸€ä¸‹è¿™äº›debï¼š</p>

<pre><code>wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | apt-key add - \
 &amp;&amp; echo 'deb-src http://mirrors.zju.edu.cn/postgresql/repos/apt/ trusty-pgdg main' &gt; /etc/apt/sources.list.d/pgdg.list \
 &amp;&amp; sed -i 's/ports.ubuntu.com/mirrors.aliyun.com/' /etc/apt/sources.list \
 &amp;&amp; sed -Ei 's/^# deb-src /deb-src /' /etc/apt/sources.list \
 &amp;&amp; apt-get update

apt-get install -y acl \
    libpipeline1 debhelper ssl-cert libxml2 libedit2 libxslt1.1 libperl5.18 libpython2.7 libpython3.4 libtcl8.6

dpkg -i pgdg-keyring_2018.2_all.deb postgresql-common_201.pgdg14.04+1_all.deb  postgresql-client-common_201.pgdg14.04+1_all.deb

dpkg -i libpq5_9.6.13-1.pgdg14.04+1_armhf.deb  postgresql-9.6_9.6.13-1.pgdg14.04+1_armhf.deb postgresql-client-9.6_9.6.13-1.pgdg14.04+1_armhf.deb postgresql-contrib-9.6_9.6.13-1.pgdg14.04+1_armhf.deb
</code></pre>

<p>ä¿®æ”¹Dockerfileï¼Œç›´æ¥é€šè¿‡dpkgå®‰è£…postgresqlçš„debï¼š</p>

<pre><code>root@raspberrypi:~/docker-postgresql# less Dockerfile 
...
COPY deb/ /tmp/psql/

RUN wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | apt-key add - \
 &amp;&amp; echo 'deb-src http://mirrors.zju.edu.cn/postgresql/repos/apt/ trusty-pgdg main' &gt; /etc/apt/sources.list.d/pgdg.list \
 &amp;&amp; sed -i 's/ports.ubuntu.com/mirrors.aliyun.com/' /etc/apt/sources.list \
 &amp;&amp; sed -Ei 's/^# deb-src /deb-src /' /etc/apt/sources.list \
 &amp;&amp; apt-get update \
 &amp;&amp; DEBIAN_FRONTEND=noninteractive apt-get install -y acl \
    libpipeline1 debhelper ssl-cert libxml2 libedit2 libxslt1.1 libperl5.18 libpython2.7 libpython3.4 libtcl8.6 \
 &amp;&amp; cd /tmp/psql \
 &amp;&amp; dpkg -i pgdg-keyring_2018.2_all.deb postgresql-common_201.pgdg14.04+1_all.deb  postgresql-client-common_201.pgdg14.04+1_all.deb \
 &amp;&amp; dpkg -i libpq5_9.6.13-1.pgdg14.04+1_armhf.deb  postgresql-9.6_9.6.13-1.pgdg14.04+1_armhf.deb postgresql-client-9.6_9.6.13-1.pgdg14.04+1_armhf.deb postgresql-contrib-9.6_9.6.13-1.pgdg14.04+1_armhf.deb \
 &amp;&amp; rm -rf /tmp/psql \
...

root@raspberrypi:~/docker-postgresql# docker build -t sameersbn/postgresql:9.6-2 .
</code></pre>

<h2>ç¼–è¯‘redmineé•œåƒ</h2>

<p>redmineä¸»è¦æ˜¯ç¼ºå°‘ruby2.3çš„åŒ…ï¼Œè·Ÿä¸Šé¢çš„æ­¥éª¤ç±»ä¼¼ã€‚å…ˆç¼–è¯‘å‡ºarmçš„ruby2.3ï¼Œå†ç¼–è¯‘é•œåƒã€‚</p>

<pre><code>sed -i 's/ports.ubuntu.com/mirrors.aliyun.com/' /etc/apt/sources.list \
&amp;&amp; sed -Ei 's/^# deb-src /deb-src /' /etc/apt/sources.list

apt-get build-dep ruby${RUBY_VERSION} ruby${RUBY_VERSION}-dev
apt-get source --compile ruby${RUBY_VERSION} ruby${RUBY_VERSION}-dev


root@raspberrypi:~/docker-redmine# vi Dockerfile 
...
COPY deb/ /tmp/ruby/

RUN apt-key adv --keyserver keyserver.ubuntu.com --recv E1DD270288B4E6030699E45FA1715D88E1DF1F24 \
 &amp;&amp; echo "deb http://ppa.launchpad.net/git-core/ppa/ubuntu trusty main" &gt;&gt; /etc/apt/sources.list \
 &amp;&amp; apt-key adv --keyserver keyserver.ubuntu.com --recv 80F70E11F0F0D5F10CB20E62F5DA5F09C3173AA6 \
 &amp;&amp; echo "deb http://ppa.launchpad.net/brightbox/ruby-ng/ubuntu trusty main" &gt;&gt; /etc/apt/sources.list \
 &amp;&amp; apt-key adv --keyserver keyserver.ubuntu.com --recv 8B3981E7A6852F782CC4951600A6F0A3C300EE8C \
 &amp;&amp; echo "deb http://ppa.launchpad.net/nginx/stable/ubuntu trusty main" &gt;&gt; /etc/apt/sources.list \
 &amp;&amp; wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | apt-key add - \
 &amp;&amp; echo 'deb-src http://apt.postgresql.org/pub/repos/apt/ trusty-pgdg main' &gt; /etc/apt/sources.list.d/pgdg.list \
 &amp;&amp; sed -i 's/ports.ubuntu.com/mirrors.aliyun.com/' /etc/apt/sources.list \
 &amp;&amp; sed -Ei 's/^# deb-src /deb-src /' /etc/apt/sources.list \
 &amp;&amp; apt-get update \
 &amp;&amp; DEBIAN_FRONTEND=noninteractive apt-get install -y supervisor logrotate nginx mysql-client postgresql-client \
      imagemagick subversion git cvs bzr mercurial darcs rsync   locales openssh-client \
      gcc g++ make patch pkg-config gettext-base   libc6-dev zlib1g-dev libxml2-dev \
      libmysqlclient18 libpq5 libyaml-0-2 libcurl3 libssl1.0.0 uuid-dev xz-utils \
      libxslt1.1 libffi6 zlib1g gsfonts \
      libgmpxx4ldbl libgmp-dev libtk8.5 libxft2 libxrender1 libxss1 x11-common libtcl8.5 rubygems-integration \
 &amp;&amp; dpkg -i /tmp/ruby/*.deb \
 &amp;&amp; rm -rf /tmp/ruby \
 &amp;&amp; update-locale LANG=C.UTF-8 LC_MESSAGES=POSIX \
 &amp;&amp; gem install --no-document --version '&lt; 2.0' bundler \
 &amp;&amp; rm -rf /var/lib/apt/lists/*
...

root@raspberrypi:~/docker-redmine# docker build -t sameersbn/redmine:3.4.6 .
</code></pre>

<p>å¦‚æœdockeræ„å»ºå¤±è´¥ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹ä¸¤ç§æ–¹å¼æ¥è¿›è¡Œè°ƒè¯•ï¼š</p>

<pre><code># 1
docker commit $container-id image-id
docker run -ti $image-id bash

# 2 
å¤±è´¥ä¹Ÿä¼šæœ‰å‰ä¸€æ­¥éª¤çš„é•œåƒå·²ç»æäº¤ï¼Œå†æ¬¡åŸºç¡€ä¸Šæ£€æŸ¥åé¢çš„æ­¥éª¤
The last successful step is 2. It produced an image a3acfa4ab179. Now you start a container
docker run -it a3acfa4ab179 bash
</code></pre>

<h2>ç»“åˆåŸæœ‰æ•°æ®è¿›è¡Œè¿ç§»</h2>

<pre><code># å¤‡ä»½
psql -U postgres -cC --if-exists -d redmine_production &gt;redmine.dump 

# å®‰è£…compose
root@raspberrypi:~/redmine/bin# python -m pip install --upgrade pip
root@raspberrypi:~/redmine/bin# pip install docker-compose

# å¯åŠ¨
root@raspberrypi:~/redmine/bin# docker-compose up -d 

# æ•°æ®åº“è¿˜åŸ
docker cp redmine.dump e472d9ec3124:/var/lib/postgresql/
psql -U postgres &lt;redmine.dump

# redmineä¿®å¤
root@3f0774db222d:/home/redmine/redmine# apt-get install libmysqlclient-dev                                    

https://stackoverflow.com/questions/13086073/rails-install-pg-cant-find-the-libpq-fe-h-header
root@3f0774db222d:/home/redmine/redmine# apt-get install libpq-dev
https://stackoverflow.com/questions/38200015/package-magickcore-was-not-found-in-the-pkg-config-search-path
root@3f0774db222d:/home/redmine/redmine# apt-get install libmagickwand-dev

root@3f0774db222d:/home/redmine/redmine# bundle install                    
</code></pre>

<p>åé¢å°±ç›´æ¥å®‰è£…docker-compose.ymlä¸­çš„ç«¯å£æ˜ å°„é…ç½®è®¿é—®å³å¯ã€‚</p>

<p>&ndash;END</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[è¿æ¥æ ‘è“æ´¾ - Respberrypi]]></title>
    <link href="http://winse.github.io/blog/2017/10/05/respberrypi-connected-via/"/>
    <updated>2017-10-05T17:04:24+08:00</updated>
    <id>http://winse.github.io/blog/2017/10/05/respberrypi-connected-via</id>
    <content type="html"><![CDATA[<p>å¯åŠ¨æ ‘è“æ´¾åï¼Œæ€»å¾—è¿ä¸Šå»æ“ä½œæ‰èƒ½å‘Šè¯‰å®ƒåšäº‹æƒ…ã€‚æœ€å¸¸ç”¨çš„å°±æ˜¯é€šè¿‡SSHè¿œç¨‹æ§åˆ¶ï¼Œå‰ææ˜¯èƒ½è¿ä¸Šç½‘ç»œã€çŸ¥é“æ ‘è“æ´¾è·å–åˆ°çš„åœ°å€ã€‚ä¸‹æ¥æŠŠäº†è§£åˆ°çš„ï¼Œä»¥åŠè‡ªå®è·µçš„è¿æ¥æ–¹å¼åšä¸‹å°ç»“ã€‚</p>

<h4>é€šè¿‡è·¯ç”±å™¨</h4>

<p>ç½‘çº¿ã€æ— çº¿è¿æ¥åï¼Œé€šè¿‡ <strong> æ˜¾ç¤ºå™¨ </strong> ã€<strong> è·¯ç”±ç®¡ç†ç•Œé¢ </strong> è·å–æ ‘è“æ´¾çš„åœ°å€ï¼ˆåœ¨ç®¡ç†webç•Œé¢æœ‰æ˜ç¡®çš„respberrypiçš„å­—æ ·ï¼‰ã€‚</p>

<h4>é€šè¿‡USB</h4>

<ol>
<li>USBè½¬COM</li>
</ol>


<p>USBè¿æ¥ç”µè„‘ï¼Œè¿æ ‘è“æ´¾çš„GPIOå¯¹åº”çš„é’ˆã€‚ç„¶åé€šè¿‡COMå£åè®®ä¸æ ‘è“æ´¾é€šä¿¡</p>

<ol>
<li>USBå…±äº«ç½‘ç»œ</li>
</ol>


<p>ä½¿ç”¨æ‰‹æœºçš„USBå…±äº«ç½‘ç»œã€‚</p>

<p>USBè¿æ ‘è“æ´¾ï¼ŒMicroå£è¿æ‰‹æœºã€‚æ‰‹æœºä¸Šæ‰“å¼€USBç½‘ç»œå…±äº«ï¼Œæ ‘è“æ´¾ä¸­ä¼šå»ºç«‹ä¸€ä¸ªusb0çš„ç½‘å¡ã€‚è¿™æ ·å°±èƒ½é€šè¿‡è¿™ä¸ªç½‘å¡è¿›è¡Œä¸Šç½‘äº†ï¼ˆç½‘ä¸Šä¹Ÿæœ‰è¯´åŒæ—¶æ‰“å¼€wifiçƒ­ç‚¹ï¼Œæ²¡å•¥ç”¨å•Šï¼Œusbå’Œwlanæ˜¯ä¸¤ä¸ªä¸åŒçš„ç½‘æ®µï¼‰ã€‚</p>

<p>æ‰‹æœºä¸Šå®‰è£…ä¸€ä¸ªsshçš„å·¥å…·ï¼ˆjuicesshç­‰ï¼‰ï¼Œå…ˆè¿ä¸Šæœ¬åœ°çš„shellï¼Œç„¶åæ‰§è¡Œ <code>cat /proc/net/arp</code> æˆ–è€… <code>busybox arp -a</code> æŸ¥çœ‹ä¸ rndis0 åŒä¸€ä¸ªç½‘æ®µçš„ipï¼ˆä¸€èˆ¬å°±æ˜¯è¿æ¥åˆ°æ ‘è“æ´¾çš„åœ°å€äº†ï¼‰ã€‚</p>

<p>åœ¨æ‰‹æœºä¸Šå®‰è£…ä¸€ä¸ªIPæ‰«æè½¯ä»¶åº”è¯¥ä¹Ÿè¡Œï¼Œä½† <strong> é€šè¿‡ARPæ˜¯æœ€ç®€å•æœ€é«˜æ•ˆçš„æ–¹å¼äº†ã€‚</strong></p>

<p><img src="/images/blogs/raspberrypi-phone-usb-network.png" alt="" /></p>

<p>æ³¨æ„ï¼šbusyboxæ„Ÿè§‰åƒä¸€ä¸ªå·¥å…·é›†ï¼ŒåŒ…å«äº†å¾ˆå¤šlinuxçš„å‘½ä»¤ï¼Œå¹¶ä¸”æœ‰äº›å‘½ä»¤å‚æ•°æ¯”ç³»ç»Ÿæä¾›çš„æ›´å…¨ï¼Œå¦‚ <code>tar -j</code> ã€‚å¯ä»¥ç”¨ <code>busybox --help</code> æŸ¥çœ‹å¸®åŠ©ã€‚</p>

<p></p>

<h4>ç½‘çº¿äº’è”</h4>

<p>ä¸€è·Ÿç½‘çº¿ç›´æ¥è¿ç”µè„‘å’Œæ ‘è“æ´¾ã€‚</p>

<p>äº’ä¼ æ•°æ®åº”è¯¥æœ‰ç”¨ã€‚å½“å‰æ„Ÿè§‰ï¼Œè¿™ç§æ–¹å¼æ²¡å•¥ä¼˜åŠ¿ï¼Œæœ‰ç‚¹é¸¡è‚‹ã€‚ä¸Šç½‘æ¯”è¾ƒéº»çƒ¦ï¼šæ‰‹åŠ¨è®¾ç½®IPã€åŸŸåè§£æã€è¿˜è¦åœ¨ç”µè„‘ä¸Šé¢æç½‘å¡ç»‘å®šã€‚</p>

<p>ä¸‹é¢è‡ªåŠ¨è·å–çš„æ–¹æ³•ï¼ˆæ²¡è¯•ï¼Œåº”è¯¥æ˜¯å¯ä»¥çš„å§ï¼‰ï¼š</p>

<blockquote><p>ç½‘çº¿ç›´æ¥æŠŠæ ‘è“æ´¾ä¸ç”µè„‘è¿æ¥èµ·æ¥ï¼Œç”µè„‘éœ€è¦è¿wifiï¼ˆå¦‚æœä¸è¿æ¥æ— æ³•ä½¿ç”¨ç½‘ç»œå…±äº«è®©æ ‘è“æ´¾è·å–åˆ°ipåœ°å€ï¼‰ï¼Œåœ¨ è®¾ç½®->ç½‘ç»œ->wlan->ç½‘ç»œä¸å…±äº«ä¸­å¿ƒ->wlan->å±æ€§->å…±äº«->å…è®¸â€‹å…¶å®ƒç”¨æˆ·é€šè¿‡å®ƒæ¥è¿æ¥->ç¡®å®šã€‚</p>

<p>ç¨ç­‰ç‰‡åˆ»æ ‘è“æ´¾åº”è¯¥å°±è·å–åˆ°ä¸€ä¸ªipåœ°å€äº†ï¼Œæ­¤æ—¶æ‰“å¼€å‘½ä»¤æç¤ºç¬¦ï¼ˆæˆ‘ç”¨çš„Xshellï¼‰ï¼Œè¿è¡Œarp -aå‘½ä»¤ï¼Œåº”è¯¥å°±å¯ä»¥çœ‹åˆ°â€‹ä¸€ä¸ªå±€åŸŸç½‘æ®µï¼Œå¦‚192.168.xx.1ï¼Œé€šå¸¸ä»¥192.168å¼€å¤´ï¼Œæœ€åä¸€ä½æ˜¯1çš„é‚£ä¸ªæ¥å£ï¼Œä¸‹é¢å¤šå‡ºæ¥çš„ä¸€æ¡åŠ¨æ€è®°å½•å°±æ˜¯æ ‘è“æ´¾çš„ã€‚</p></blockquote>

<h2>å‚è€ƒï¼š</h2>

<ul>
<li><a href="https://jingyan.baidu.com/article/676629977483b154d51b848e.html">ä½¿ç”¨Androidæ‰‹æœºä½œä¸ºæ ‘è“æ´¾çš„å±å¹•</a></li>
<li><a href="http://www.jianshu.com/p/f2e0a02c01d9">http://www.jianshu.com/p/f2e0a02c01d9</a></li>
<li><a href="http://blog.163.com/elliot_alderson/blog/static/26832905920161122104246919/">http://blog.163.com/elliot_alderson/blog/static/26832905920161122104246919/</a> æ·»åŠ è¿‡ifcfg-usb0ï¼Œä½†éœ€è¦é‡å¯ç½‘å¡æ‰æ˜¯è®¾ç½®IPåœ°å€ï¼Œéº»çƒ¦ã€‚</li>
<li><a href="http://blog.163.com/elliot_alderson/blog/static/268329059201611925543687/">æ ‘è“æ´¾å®‰è£…kali linux ï¼ˆç³»ç»Ÿå®‰è£…å’Œåˆæ­¥é…ç½®ï¼‰</a> å®‰è£…ã€gpartedæ‰©å®¹</li>
</ul>


<h2>é”®ç›˜è¾“å…¥ã€æ‰‹æœºæ˜¾ç¤º</h2>

<p>å‰æï¼šå®‰è£…screenã€‚</p>

<ul>
<li>è¿æ¥USBé”®ç›˜ï¼Œå¯åŠ¨æ ‘è“æ´¾ã€‚</li>
<li>é”®ç›˜ç›²æ‰“ç™»å½•ï¼ˆè¾“å…¥ï¼šrootå›è½¦centoså›è½¦screen -S piï¼‰ã€‚</li>
<li>ç„¶åæ‰‹æœºä¸Šsshè¿æ¥ï¼Œè¿›å…¥piçš„ä¼šè¯ï¼ˆscreen -x piï¼‰</li>
</ul>


<p>è¿™æ ·å°±èƒ½ç”¨é”®ç›˜æ•²ã€æ‰‹æœºçœ‹äº†ï¼è§‰å¾—æŒºå¥½ç©çš„ã€‚</p>

<h2>é‡æ–°æŠ˜è…¾æ ‘è“æ´¾</h2>

<ul>
<li>å®‰è£…centos7: å¯†ç root/centos</li>
</ul>


<p><a href="http://www.21ic.com/evm/trick/201605/675705.htm">http://www.21ic.com/evm/trick/201605/675705.htm</a></p>

<ul>
<li>æ‰©å¤§å®¹é‡ï¼š</li>
</ul>


<p><a href="http://blog.csdn.net/qq_20480611/article/details/48657827">http://blog.csdn.net/qq_20480611/article/details/48657827</a></p>

<p>fdiskåˆ æ‰åˆ†åŒºç„¶åé‡æ–°åŠ ï¼Œé‡å¯åæ‰§è¡Œresize2fs</p>

<ul>
<li>å®‰è£…wiringpi</li>
</ul>


<pre><code>git clone git://git.drogon.net/wiringPi
cd wiringPi
./build
</code></pre>

<ul>
<li>epel</li>
</ul>


<p><a href="https://hobo.house/2016/03/03/installing-centos-on-the-raspberry-pi-2/">https://hobo.house/2016/03/03/installing-centos-on-the-raspberry-pi-2/</a></p>

<pre><code>cat &gt; /etc/yum.repos.d/epel-unsigned.repo &lt;&lt; EOF
[epel]
name=Epel rebuild for armhfp
baseurl=https://armv7.dev.centos.org/repodir/epel-pass-1/
enabled=1
gpgcheck=0

EOF
</code></pre>

<p>&ndash;END</p>
]]></content>
  </entry>
  
</feed>
