
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Map入门指南 - Winse Blog</title>
  <meta name="author" content="Winse Liu">

  
  <meta name="description" content="最近了解了一些Map地图相关的知识点，把学习的资料罗列一下： 坐标体系 坐标系
http://outdoor.farig.net/help/livemapset.php 说明： WGS84：为一种大地坐标系，也是目前广泛使用的GPS全球卫星定位系统使用的坐标系。标准的Web墨卡托投影坐标系。 &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://winseliu.com/blog/2018/01/30/map-started-guide">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
  <link href="/atom.xml" rel="alternate" title="Winse Blog" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//cdn.bootcss.com/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<!--
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
-->


  
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-43198550-1', 'auto');
  ga('send', 'pageview');

</script>



</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Winse Blog</a></h1>
  
    <h2>走走停停, 熙熙攘攘, 忙忙碌碌, 不知何畏.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:winseliu.com" />
    <input class="search" type="text" name="q" results="0" placeholder="站内搜索"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/blog/archives/updated.html">Updated</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Map入门指南</h1>
    
    
      <p class="meta">
        








  


<time datetime="2018-01-30T13:37:51+08:00" pubdate data-updated="true">Tue 2018-01-30 13:37</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>最近了解了一些Map地图相关的知识点，把学习的资料罗列一下：</p>

<h2>坐标体系</h2>

<ul>
<li><a href="http://lbsyun.baidu.com/index.php?title=coordinate">坐标系</a></li>
<li><a href="http://outdoor.farig.net/help/livemapset.php">http://outdoor.farig.net/help/livemapset.php</a></li>
</ul>


<p>说明：</p>

<ul>
<li>WGS84：为一种大地坐标系，也是目前广泛使用的GPS全球卫星定位系统使用的坐标系。标准的Web墨卡托投影坐标系。</li>
<li>GCJ02：又称火星坐标系，是由中国国家测绘局制定的地理坐标系统，是由WGS84加密后得到的坐标系。指中国国家测绘局制订的加偏Web墨卡托投影，正式名称为GCJ-02，国内可用的地图多数属于这种坐标系。</li>
<li>BD09：为百度坐标系，在GCJ02坐标系基础上再次加密。其中bd09ll表示百度经纬度坐标，bd09mc表示百度墨卡托米制坐标。</li>
</ul>


<h4>地图API</h4>

<p>百度</p>

<ul>
<li><a href="http://api.map.baidu.com/lbsapi/getpoint/index.html">拾取坐标系统</a></li>
<li><a href="http://developer.51cto.com/art/201110/298662.htm">百度地图API开发指南</a></li>
<li><a href="http://developer.baidu.com/map/jsdemo.htm#i8_1">浏览器定位</a></li>
<li><a href="http://lbsyun.baidu.com/cms/jsapi/reference/jsapi_reference.html#a6b0">API v2.0 TileLayer</a></li>
<li><a href="http://lbsyun.baidu.com/cms/jsapi/reference/jsapi_reference.html#a0b0">API v2.0 Map</a></li>
</ul>


<p>腾讯</p>

<ul>
<li><a href="http://lbs.qq.com/tool/getpoint/index.html">坐标拾取器</a></li>
<li><a href="http://lbs.qq.com/javascript_v2/guide-start.html">http://lbs.qq.com/javascript_v2/guide-start.html</a></li>
<li><a href="http://lbs.qq.com/javascript_v2/demo.html">http://lbs.qq.com/javascript_v2/demo.html</a></li>
<li><a href="http://lbs.qq.com/webservice_v1/guide-gcoder.html">API 逆地址解析(坐标位置描述)</a></li>
<li><a href="http://lbs.qq.com/static_v2/guide-getImage.html">http://lbs.qq.com/static_v2/guide-getImage.html</a></li>
<li><a href="http://lbs.qq.com/javascript_v2/case-run.html#sample-geocoding-reverse">地址反查（坐标查位置）：逆地址解析</a></li>
<li><a href="http://lbs.qq.com/javascript_v2/case-run.html#sample-event-latlng">鼠标移动显示地图坐标信息</a></li>
<li><a href="http://lbs.qq.com/javascript_v2/case-run.html#sample-event-center">拖动地图显示地图中心坐标信息</a></li>
<li><a href="http://lbs.qq.com/javascript_v2/case-run.html#sample-search-circlebounds">周边（圆形区域）检索</a></li>
<li><a href="http://lbs.qq.com/javascript_v2/sample/sample-search-circlebounds.html">http://lbs.qq.com/javascript_v2/sample/sample-search-circlebounds.html</a></li>
<li><a href="http://lbs.qq.com/javascript_v2/doc/maptype.html">http://lbs.qq.com/javascript_v2/doc/maptype.html</a></li>
<li><a href="http://lbs.qq.com/javascript_v2/doc/projection.html">http://lbs.qq.com/javascript_v2/doc/projection.html</a></li>
</ul>


<p>高德</p>

<ul>
<li><a href="http://lbs.amap.com/console/show/picker">坐标获取</a></li>
<li><a href="http://lbs.amap.com/api">http://lbs.amap.com/api</a></li>
<li><a href="https://lbs.amap.com/api/javascript-api/example/geocoder/regeocoding?demo">逆向地理编码（坐标-地址）</a></li>
</ul>


<p>国内其他</p>

<ul>
<li><a href="http://lbs.tianditu.com/server/search.html">http://lbs.tianditu.com/server/search.html</a></li>
</ul>


<p>Google</p>

<ul>
<li><a href="https://www.google.com/maps">获取地理位置的经纬度</a>直接搜就行了</li>
<li><a href="https://support.google.com/maps/answer/18539?co=GENIE.Platform%3DDesktop&amp;hl=zh-Hans">https://support.google.com/maps/answer/18539?co=GENIE.Platform%3DDesktop&amp;hl=zh-Hans</a></li>
<li><a href="https://developers.google.cn/maps/documentation/geocoding/intro?hl=zh-cn#GeocodingResponses">地理编码转换</a></li>
</ul>


<p>NOTE: Google的在Java里面用需要指定证书和代理：</p>

<ul>
<li><a href="https://stackoverflow.com/questions/120797/how-do-i-set-the-proxy-to-be-used-by-the-jvm">https://stackoverflow.com/questions/120797/how-do-i-set-the-proxy-to-be-used-by-the-jvm</a></li>
<li><a href="https://docs.oracle.com/javase/8/docs/technotes/guides/net/proxies.html">https://docs.oracle.com/javase/8/docs/technotes/guides/net/proxies.html</a></li>
</ul>


<p>网页访问一次，把geo的CA证书保存到本地，然后导入到本地的证书库，加入到应用得启动参数里面：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>keytool -import -rfc -v -alias geo_ca -keystore truststore -file geo.cer
</span><span class='line'>
</span><span class='line'>java -Djava.net.useSystemProxies=true -Djavax.net.ssl.trustStore=.\security\truststore </span></code></pre></td></tr></table></div></figure>


<h4>各坐标系间的转换</h4>

<p>Example:</p>

<ul>
<li><a href="http://developer.baidu.com/map/jsdemo.htm#a5_1">google坐标转成百度坐标</a></li>
<li><a href="http://developer.baidu.com/map/jsdemo.htm#a5_2">原始坐标转成百度坐标</a></li>
<li><a href="http://lbs.qq.com/javascript_v2/case-run.html#sample-convertor-library">转换百度坐标为腾讯坐标</a></li>
</ul>


<p>坐标转换代码：</p>

<ul>
<li><a href="https://github.com/wandergis/coordtransform">https://github.com/wandergis/coordtransform</a></li>
</ul>


<h4>比例尺</h4>

<p>百度</p>

<ul>
<li><a href="http://lbsyun.baidu.com/index.php?title=jspopular/guide/widget">http://lbsyun.baidu.com/index.php?title=jspopular/guide/widget</a></li>
<li><a href="http://developer.baidu.com/map/jsdemo.htm#f0_4">http://developer.baidu.com/map/jsdemo.htm#f0_4</a></li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>map.addControl(new BMap.ScaleControl());
</span><span class='line'>map.enableScrollWheelZoom();   //启用滚轮放大缩小，默认禁用
</span><span class='line'>map.enableContinuousZoom();    //启用地图惯性拖拽，默认禁用</span></code></pre></td></tr></table></div></figure>


<p>左下角标注的尺寸包括一个数字加一条线段，就是地图上与<strong>那条线等长的距离</strong>的实际距离为数字表示的长度。假设长度为一厘米，那就是说那一厘米在地图上同等长度实际是20m的距离，比例为1:2000。</p>

<p>在百度地图API中，平面坐标是以最大级别18级为基准的。就是说在<strong>18级平面坐标的一个单位就代表了屏幕上的1个像素</strong> （详细的内容后面讲，可以参考<a href="https://my.oschina.net/bv10000/blog/644520">百度地图API详解之地图坐标系统</a>）。</p>

<p>Android里面计算百度比例尺的方式：取两个点获取它们的经纬度，然后算两个点之间的距离。</p>

<ul>
<li><a href="http://blog.csdn.net/mnorst/article/details/12975413">百度地图和谷歌地图的比例尺和分辨率</a></li>
<li><a href="http://blog.csdn.net/mad1989/article/details/9361983">百度、google、高德 地图比例尺功能实现</a></li>
</ul>


<p>NOTE: 百度地图SDK还提供了标注工具(PushpinTool)，测距工具(DistanceTool)。</p>

<p>Google</p>

<ul>
<li>通过手动算出各级的比例尺 <a href="http://www.360doc.com/content/15/0319/13/9009195_456410364.shtml">http://www.360doc.com/content/15/0319/13/9009195_456410364.shtml</a></li>
</ul>


<p>Bing</p>

<ul>
<li><a href="https://msdn.microsoft.com/en-us/library/aa940990.aspx">https://msdn.microsoft.com/en-us/library/aa940990.aspx</a></li>
<li><a href="https://blogs.bing.com/maps/2006/02/25/map-control-zoom-levels-gt-resolution">https://blogs.bing.com/maps/2006/02/25/map-control-zoom-levels-gt-resolution</a></li>
</ul>


<h2>深入了解地图 - 瓦片</h2>

<ul>
<li><a href="https://my.oschina.net/bv10000/blog/644520">百度地图API详解之地图坐标系统</a> <a href="http://www.jiazhengblog.com/blog/2011/07/02/289/">##</a></li>
<li><a href="https://segmentfault.com/a/1190000011276788">瓦片地图原理</a></li>
<li><a href="https://wiki.openstreetmap.org/wiki/Slippy_map_tilenames">Mercator projection</a></li>
<li><a href="http://cntchen.github.io/2016/05/09/%E5%9B%BD%E5%86%85%E4%B8%BB%E8%A6%81%E5%9C%B0%E5%9B%BE%E7%93%A6%E7%89%87%E5%9D%90%E6%A0%87%E7%B3%BB%E5%AE%9A%E4%B9%89%E5%8F%8A%E8%AE%A1%E7%AE%97%E5%8E%9F%E7%90%86/">国内主要地图瓦片坐标系定义及计算原理</a></li>
<li><a href="http://blog.csdn.net/evkj2013/article/details/12855889">OpenStreetMap/Google/百度/Bing瓦片地图服务(TMS) </a></li>
<li><a href="http://blog.csdn.net/mygisforum/article/details/7582449">Google 地图切片URL地址解析 </a></li>
<li><a href="http://blog.csdn.net/mygisforum/article/details/8162751">Tiles à la Google Maps: Coordinates, Tile Bounds and Projection</a></li>
<li><a href="http://blog.csdn.net/mygisforum/article/details/22997879">腾讯与百度地图瓦片规则分析</a></li>
<li><a href="http://cntchen.github.io/2016/05/09/%E7%99%BE%E5%BA%A6JavaScirpt%20%20API%E4%B8%AD%E7%BB%8F%E7%BA%AC%E5%BA%A6%E5%9D%90%E6%A0%87%E8%BD%AC%E7%93%A6%E7%89%87%E5%9D%90%E6%A0%87bug/">百度JavaScript API中经纬度坐标转瓦片坐标bug</a></li>
<li><a href="http://blog.csdn.net/fredricen/article/details/77189453">2017版高德地图瓦片分析</a></li>
</ul>


<p>各种tile的地址路径</p>

<ul>
<li><a href="https://github.com/CntChen/tile-lnglat-transform">https://github.com/CntChen/tile-lnglat-transform</a></li>
<li>各种tile的地址路径 <a href="https://github.com/brandonxiang/MapViewer/blob/master/app.js">https://github.com/brandonxiang/MapViewer/blob/master/app.js</a></li>
<li><a href="https://wiki.openstreetmap.org/wiki/Slippy_map_tilenames#Java">https://wiki.openstreetmap.org/wiki/Slippy_map_tilenames#Java</a></li>
</ul>


<p><a href="http://apis.map.qq.com/jsapi?qt=translate&amp;type=3&amp;points=113.338191,23.138992&amp;output=jsonp&amp;pf=jsapi&amp;ref=jsapi&amp;cb=qq.maps._svcb3.cbjcznrony1">腾讯&#8221;矢量&#8221;地图 - 通过JSON传数据画Canvas</a></p>

<h2>国内百度腾讯网页端的实现</h2>

<p>现在的地图基本都是使用瓦片技术，计算步骤如下:</p>

<ul>
<li>首先，根据投影（墨卡托投影）把 经纬度（度） 转成 平面坐标（m）；</li>
<li>然后，更具比例尺把 平面坐标 转成 像素坐标；</li>
<li>最后，根据坐标的平移把窗口内的瓦片从服务端下载并进行展示。</li>
</ul>


<p>通过JS代码了解地图的实现：</p>

<h4>百度</h4>

<p>打开一个百度的应用 <a href="http://api.map.baidu.com/lbsapi/getpoint/index.html">http://api.map.baidu.com/lbsapi/getpoint/index.html</a> 然后在调试窗口运行转换经纬度的代码，然后进到对应的代码，打断点，然后艰辛进行与混淆的代码死磕！</p>

<p><img src="/images/blogs/baidu-map-debug.png" alt="" /></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>var projection =new BMap.MercatorProjection();
</span><span class='line'>var point = projection.lngLatToPoint(new BMap.Point(113.338191,23.138992));
</span><span class='line'>point
</span><span class='line'>Q {x: 12616886.99, y: 2631894}
</span><span class='line'>
</span><span class='line'>var projection =new BMap.MercatorProjection();
</span><span class='line'>var point = projection.pointToLngLat(new BMap.Pixel(12616886.99,2631894));
</span><span class='line'>point
</span><span class='line'>H {lng: 113.338191, lat: 23.138992}
</span></code></pre></td></tr></table></div></figure>


<p>从代码上看还是不难的，但是里面有一堆魔法数字完全不懂。</p>

<p>如果仅仅获取瓦片 <a href="https://github.com/CntChen/tile-lnglat-transform/">https://github.com/CntChen/tile-lnglat-transform/</a> 推荐使用这个项目。</p>

<p>这里仅仅是经纬度转换为平面坐标(m)的过程。我们在源码中查找 getTilesUrl 在5901行打个断点，然后在回到网页，移动一下地图。接下来，就可以调试整个过程了。</p>

<p><img src="/images/blogs/baidu-map-getTilesUrl.png" alt="" /></p>

<p>注意标识的两处，是进行层级缩放、计算出瓦片编号的代码。</p>

<h4>腾讯</h4>

<p>看过了百度的，再看腾讯的。然鹅并没有觉得轻松啊，两种不同的坐标系，做法差别还是挺大的。不过从命名上看腾讯算学术派的了。</p>

<ul>
<li>Projection 对象规范 <a href="http://lbs.qq.com/javascript_v2/doc/projection.html">http://lbs.qq.com/javascript_v2/doc/projection.html</a></li>
<li><a href="http://lbs.qq.com/javascript_v2/doc/maptype.html">http://lbs.qq.com/javascript_v2/doc/maptype.html</a></li>
</ul>


<p>打开 <a href="http://lbs.qq.com/javascript_v2/case-run.html#sample-geocoding-reverse">http://lbs.qq.com/javascript_v2/case-run.html#sample-geocoding-reverse</a> ，在 map.qq.com/js/v2.js 的 apiLoad 处打断点进行到真正的map的js文件。</p>

<p><img src="/images/blogs/tencent-debug-apiLoad.png" alt="" /></p>

<p>然后查找 fromLatLngToPoint ，再在界面动一下，就可以调试整个过程：</p>

<p><img src="/images/blogs/tencent-debug-fromLatLngToPoint.png" alt="" /></p>

<ul>
<li>fromLatLngToPoint</li>
<li>fromPointToLatLng</li>
</ul>


<p>调式的时刻可以顺便看看整个调用链，会发现：</p>

<p><img src="/images/blogs/tencent-debug-fromDivPixelToLatLng.png" alt="" /></p>

<ul>
<li>fromDivPixelToLatLng</li>
<li>fromLatLngToDivPixel</li>
</ul>


<p>fromDivPixelToLatLng的条用链，以及数据的传递如下：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>fromDivPixelToLatLng 
</span><span class='line'>=&gt;
</span><span class='line'>
</span><span class='line'>-&gt;Rh 转成相对位置转成绝对坐标后，传入到Mc
</span><span class='line'>[
</span><span class='line'>a
</span><span class='line'>P {x: 930, y: -471}
</span><span class='line'>c
</span><span class='line'>ia {width: 1725872.4160540444, height: 794188.9248479041}
</span><span class='line'>b
</span><span class='line'>true
</span><span class='line'>]
</span><span class='line'>
</span><span class='line'>-&gt;Mc(g, a, h, f)  &lt;-&gt;  Gf 缩放后，调用fromPointToLatLng
</span><span class='line'>[
</span><span class='line'>g
</span><span class='line'>Sh {a: P, b: 0.7111111111111111, c: 40.74366543152521, d: true}
</span><span class='line'>a
</span><span class='line'>P {x: 1726802, y: 793718}
</span><span class='line'>h
</span><span class='line'>13
</span><span class='line'>f
</span><span class='line'>true
</span><span class='line'>]
</span><span class='line'>
</span><span class='line'>-&gt;fromPointToLatLng(Ad, e)
</span><span class='line'>[
</span><span class='line'>Ad
</span><span class='line'>P {x: 210.791259765625, y: 96.889404296875}
</span><span class='line'>e
</span><span class='line'>true
</span><span class='line'>]
</span><span class='line'>
</span><span class='line'>-&gt; Return value : u
</span><span class='line'>    lat:40.02892889530204
</span><span class='line'>    lng:116.42520904541016
</span></code></pre></td></tr></table></div></figure>


<p>从 坐标计算 经纬度 反过来了：</p>

<p><img src="/images/blogs/tencent-debug-fromPointToLatLng.png" alt="" /></p>

<p>腾讯的计算过程直接把 <strong>转平面坐标和转像素坐标</strong> 两个过程合并了。<strong>通过 fromLatLngToPoint 得到就是一个 像素坐标 的值</strong>，然后通过缩放就可以得到<strong>当前层级级别</strong>的 <strong>像素坐标</strong> 。</p>

<p>查找瓦片地址的代码，直接在代码里面查找 <code>x=</code> 在37823处代码都打断点，刷新重新加载瓦片就会进到断点。</p>

<p>然后查看调用链，</p>

<p><img src="/images/blogs/tencent-debug-tile.png" alt="" /></p>

<p>详细跟踪的话，会发现，每次加载都会计算左上角和右下角两个点的像素坐标 （窗口的bounds）。计算要加载的瓦片时，直接用最大减最小除以256（每个瓦片的像素），就得到要加载瓦片的编号了。</p>

<p>用了几天比较肤浅的跟了下QQ地图的功能，如果没有混淆应该看起来会爽很多。。。没有很深层次的东西，仅仅是一个源码调试过程的记载，一些理论原理的知识请查完文章中的链接。</p>

<h2>其他</h2>

<ul>
<li><a href="http://www.gpsspg.com/bs/sql.htm">http://www.gpsspg.com/bs/sql.htm</a> 基站数据</li>
<li><a href="http://greatmaps.codeplex.com/">http://greatmaps.codeplex.com/</a></li>
<li><a href="https://my.oschina.net/zhajiang/blog/424157">Leaflet调用腾讯地图</a></li>
</ul>


<p>&ndash;END</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Winse Liu</span></span>

      








  


<time datetime="2018-01-30T13:37:51+08:00" pubdate data-updated="true">Tue 2018-01-30 13:37</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/map/'>map</a>
  
</span>


	  <span style="padding: 0 1em;">
<a class="shellExecuteLink" href="npp-windows://e/_posts/2018-01-30-map-started-guide.markdown" title="本地编辑"><i class="icon-edit"> </i>编辑</a>
</span>	
    </p>
    
      <div class="sharing">
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2018/01/26/proxy-on-java-via-shandowsocks/" title="Previous Post: Java中使用代理-基于Shandowsocks">&laquo; Java中使用代理-基于Shandowsocks</a>
      
      
        <a class="basic-alignment right" href="/blog/2018/04/07/java-webstart-jnlp-with-jvmti/" title="Next Post: WebStart的使用以及如何结合JVMTI">WebStart的使用以及如何结合JVMTI &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
	
  
<!-- gitalk评论 start -->
    <div id="gitalk-container"></div> 
<!-- gitalk评论 end -->
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>佛爷</h1>
  <p>来之不易, 且等且珍惜. <br>得之我幸; 不得<span style="display:none">-争-复争-且不得</span>, 命也, 乐享天命, 福也. </p>
  <p><a href="https://github.com/winse"><i class="fa fa-github-alt">winse</i></a>&nbsp;&nbsp;<a href="http://weibo.com/winseliu"><i class="fa fa-weibo">winseliu</i></a></p>
</section>
<section>
  <h1><a class='category' href='/blog/categories/recommend/'>Recommend</a></h1>
	<ul role="list">
		
			<li class="post">
				<a href="/blog/2018/01/20/gitalk-on-octopress/">Gitalk on Octopress</a>
			</li>
		
			<li class="post">
				<a href="/blog/2017/11/16/sphinx-generate-docs/">使用Sphinx生成/管理文档</a>
			</li>
		
			<li class="post">
				<a href="/blog/2017/08/10/java-bytecode-security/">保护/加密JAVA代码</a>
			</li>
		
			<li class="post">
				<a href="/blog/2017/07/30/kubeadm-install-kubenetes-on-centos7/">Kubeadm部署kubernetes</a>
			</li>
		
			<li class="post">
				<a href="/blog/2017/07/08/casperjs-crawler/">爬虫之CasperJS</a>
			</li>
		
			<li class="post">
				<a href="/blog/2017/05/23/spark-on-hive-speculation-shit-bug/">Hive on Spark预测性执行BUG一枚</a>
			</li>
		
			<li class="post">
				<a href="/blog/2016/04/23/hadoop-guide-catalog/">[整理] Hadoop入门</a>
			</li>
		
			<li class="post">
				<a href="/blog/2016/03/28/hive-on-spark/">Hive on Spark</a>
			</li>
		
			<li class="post">
				<a href="/blog/2016/01/23/install-and-config-ganglia-on-redhat-2/">安装配置Ganglia(2)</a>
			</li>
		
			<li class="post">
				<a href="/blog/2015/08/24/manual-install-supervisor/">Supervisor安装配置</a>
			</li>
		
			<li class="post">
				<a href="/blog/2014/10/16/spark-build-and-configuration/">编译/搭建Spark环境</a>
			</li>
		
			<li class="post">
				<a href="/blog/2014/08/25/step-by-step-found-java-oom-error/">查找逐步定位Java程序OOM的异常实践</a>
			</li>
		
			<li class="post">
				<a href="/blog/2014/07/30/hadoop2-snappy-compress/">Hadoop2 Snappy Compress</a>
			</li>
		
			<li class="post">
				<a href="/blog/2014/07/27/start-redis/">[读读书]Redis入门指南</a>
			</li>
		
			<li class="post">
				<a href="/blog/2014/04/21/hadoop2-windows-startguide/">Windows下部署/配置/调试hadoop2</a>
			</li>
		
			<li class="post">
				<a href="/blog/2014/03/30/git-cheatsheet/">GIT操作记录手册</a>
			</li>
		
			<li class="post">
				<a href="/blog/2014/03/18/jekyll-edit-link-in-web-page/">Jekyll页面添加编辑按钮</a>
			</li>
		
			<li class="post">
				<a href="/blog/2013/09/19/let-shell-command-efficient/">让敲Shell命令高效起来</a>
			</li>
		
	</ul>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2018/06/09/reasonable-way-to-access-the-internet/">科学上网（续）</a>
      </li>
    
      <li class="post">
        <a href="/blog/2018/05/01/heatmap-base-on-baidu/">解读百度的Heatmap</a>
      </li>
    
      <li class="post">
        <a href="/blog/2018/04/07/java-webstart-jnlp-with-jvmti/">WebStart的使用以及如何结合JVMTI</a>
      </li>
    
      <li class="post">
        <a href="/blog/2018/01/30/map-started-guide/">Map入门指南</a>
      </li>
    
      <li class="post">
        <a href="/blog/2018/01/26/proxy-on-java-via-shandowsocks/">Java中使用代理-基于Shandowsocks</a>
      </li>
    
      <li class="post">
        <a href="/blog/2018/01/20/logstash-monitor-myself-blog-accesslog/">Logstash采集网站的访问日志</a>
      </li>
    
      <li class="post">
        <a href="/blog/2018/01/20/gitalk-on-octopress/">Gitalk on Octopress</a>
      </li>
    
      <li class="post">
        <a href="/blog/2017/11/20/sed-debug-sedsed/">Sed Debug: Sedsed</a>
      </li>
    
  </ul>
</section>
<section>
  <h1>Categories</h1>

	 
	<ul role="list">
		
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/alluxio/'>alluxio</a> (1) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/android/'>android</a> (1) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/bigdata/'>bigdata</a> (1) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/blabla/'>blabla</a> (6) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/books/'>books</a> (6) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/debug/'>debug</a> (1) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/docker/'>docker</a> (15) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/elasticsearch/'>elasticsearch</a> (3) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/es/'>es</a> (1) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/flume/'>flume</a> (1) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/ganglia/'>ganglia</a> (5) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/git/'>git</a> (3) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/hadoop/'>hadoop</a> (44) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/hbase/'>hbase</a> (1) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/hive/'>hive</a> (8) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/hole/'>hole</a> (1) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/java/'>java</a> (11) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/jekyll/'>jekyll</a> (8) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/jenkins/'>jenkins</a> (1) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/k8s/'>k8s</a> (8) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/kafka/'>kafka</a> (3) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/kubeadm/'>kubeadm</a> (2) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/logstash/'>logstash</a> (1) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/map/'>map</a> (2) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/nginx/'>nginx</a> (3) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/puppet/'>puppet</a> (11) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/recommend/'>recommend</a> (18) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/redis/'>redis</a> (7) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/scala/'>scala</a> (4) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/shell/'>shell</a> (4) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/spark/'>spark</a> (12) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/staf/'>staf</a> (1) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/tachyon/'>tachyon</a> (3) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/tez/'>tez</a> (2) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/tools/'>tools</a> (63) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/topics/'>topics</a> (2) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/vagrant/'>vagrant</a> (1) 
		</li>
		 
		<li style="float:left; width:120px"> 
			<a class='category' href='/blog/categories/zookeeper/'>zookeeper</a> (1) 
		</li>
		
		
		<li style="clear:both; width: 1px; margin: 0; padding: 0;"></li>
		<li class="category"><a href="/blog/archives">All categories</a> (206)</li>
	</ul>
	
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/winse">@winse</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'winse',
            count: 4,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>

<section>
  <h1>Softs, I'm using</h1>
  <ul>
    <li class="post">
		<a href="http://hadoop.apache.org/releases.html">hadoop-2.6.3</a>
	</li>
	<li class="post">
		<a href="https://issues.apache.org/jira/browse/HBASE/?selectedTab=com.atlassian.jira.jira-projects-plugin:changelog-panel">hbase-0.96.0</a>
	</li>
	<li class="post">
		<a href="https://hive.apache.org/downloads.html">hive-1.2.1</a>
	</li>
	<li class="post">
		<a href="https://issues.apache.org/jira/browse/TEZ/?selectedTab=com.atlassian.jira.jira-projects-plugin:summary-panel">tez-0.7.0</a>
    </li>
  </ul>
</section>

  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2018 - Winse Liu -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
  <script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1253461959'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "v1.cnzz.com/z_stat.php%3Fid%3D1253461959%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script>
</p>

</footer>
  


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
<script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>

<script>

var time=location.pathname.substring(6).substring(0,11);
var eName=location.pathname.substring(17);
var gitalk = new Gitalk({
  clientID: 'c14f68eac6330d15d984',
  clientSecret: '73b7c1fffa98e299ff0cdd332821201933858e6e',
  repo: 'winse.github.com',
  owner: 'winse',
  admin: ['winse'],
  id: eName,
  labels: ['Gitalk', time],
  body: "http://winseliu.com" + location.pathname,
  createIssueManually: true,
  
  // facebook-like distraction free mode
  distractionFreeMode: false
})

gitalk.render('gitalk-container')

</script>



<script>

$.ajax({
  type: "POST",
  url: "http://log.winseliu.com:20000",
  data: JSON.stringify({
    title: document.title,
    location: JSON.stringify(location),
    referrer: document.referrer,
    userAgent: navigator.userAgent
  }),
  contentType: "application/json; charset=utf-8",
  dataType: "json"
});

</script>









</body>
</html>
